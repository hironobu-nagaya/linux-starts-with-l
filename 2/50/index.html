<html lang="ja">
<head>
<title>Lから始まるLinux - 2章50話 ハッシュ(使い方)</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/49/" />
<link rel="next" href="2/51/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章49話</div>
<div><a href="2/49/">ハッシュ(基本)</a></div>
</div>
<div>
<div>今</div>
<div>2章50話 ハッシュ(使い方)</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章51話</div>
<div><a href="2/51/">終了ステータス</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><span>ハッシュ(使い方)</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>前回はハッシュが</span></span>
<span><span>どういうものかを</span></span>
<span><span>教えてもらったよ！</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>今回はハッシュの</span></span>
<span><span>使い方を学ぼう！</span></span>
</div>
</article>
<article class="header2"><span>ハッシュアルゴリズム</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>ハッシュを求める計算方法を</span></span>
<span><span><wbr>「ハッシュアルゴリズム</span></span>
<span><span>(hash algorithm)」<wbr>というよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>代表的なものに</span></span>
<span><span>以下があるんだ</span></span>
</div>
</article>
<article class="table">
<table>
<thead>
<tr>
<th><span>ハッシュアルゴリズム</span></th>
<th><span>ハッシュ値の長さ</span></th>
<th><span>安全性</span></th>
<th><span>対応するコマンド</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>MD5</span></td>
<td><span>128 bit</span></td>
<td><span>×</span></td>
<td><code>md5sum</code></td>
</tr>
<tr>
<td><span>SHA-1</span></td>
<td><span>160 bit</span></td>
<td><span>×</span></td>
<td><code>sha1sum</code></td>
</tr>
<tr>
<td><span>SHA-224</span></td>
<td><span>224 bit</span></td>
<td><span>○</span></td>
<td><code>sha224sum</code></td>
</tr>
<tr>
<td><span>SHA-256</span></td>
<td><span>256 bit</span></td>
<td><span>○</span></td>
<td><code>sha256sum</code></td>
</tr>
<tr>
<td><span>SHA-384</span></td>
<td><span>384 bit</span></td>
<td><span>○</span></td>
<td><code>sha384sum</code></td>
</tr>
<tr>
<td><span>SHA-512</span></td>
<td><span>512 bit</span></td>
<td><span>○</span></td>
<td><code>sha512sum</code></td>
</tr>
</tbody>
</table>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>安全性に<wbr>「×」<wbr>が</span></span>
<span><span>付いているものは</span></span>
<span><span>任意のハッシュ値を</span></span>
<span><span>生成できる方法が</span></span>
<span><span>見つかったなどで</span></span>
<span><span>現在では安全に</span></span>
<span><span>利用できないものだよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>安全性に<wbr>「×」<wbr>が</span></span>
<span><span>付いているものは</span></span>
<span><span>使っちゃいけない</span></span>
<span><span>ということ？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>セキュリティに</span></span>
<span><span>関わらない内容なら</span></span>
<span><span>使っても問題ないよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>例えば</span></span>
<span><span><wbr>「ダウンロードしたファイルが</span></span>
<span><span>データ化けしていないか」<wbr>を</span></span>
<span><span>確認する場合などだよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>逆のことをいうと</span></span>
<span><span><wbr>「ファイルが意図的に</span></span>
<span><span>改ざんされていないか」<wbr>を</span></span>
<span><span>確認する用途では</span></span>
<span><span>セキュリティが関わるので</span></span>
<span><span>使っちゃダメなんだね！</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>特に MD5 は処理が速いので</span></span>
<span><span>安全に使えないと知られてからも</span></span>
<span><span>セキュリティが関わらない用途で</span></span>
<span><span>使われ続けているんだ</span></span>
</div>
</article>
<article class="header2"><code>md5sum</code><span> コマンド</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><code>md5sum</code><span> は</span></span>
<span><span>MD5 のハッシュ値を</span></span>
<span><span>生成したり確認するよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">md5sum <wbr>[オプション]... <wbr>[ファイル]...
</code></pre></article><article class="table"><table><thead><tr><th><span>オプション</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><span>-c, <wbr>--check</span></td><td><span>入力からハッシュ値のチェックを行う</span></td></tr><tr><td><span>-q, <wbr>--quiet</span></td><td><span>チェックでハッシュ値が一致しなかったファイルのみ出力</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ハッシュアルゴリズムが</span></span><span><span>違うコマンドも</span></span><span><span>使い方は同様なので</span></span><span><span>他のアルゴリズムを</span></span><span><span>使いたい場合は</span></span><span><span>コマンドを読み替えてね</span></span></div></article><article class="header2"><span>ハッシュ値の出力</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん！</span></span><span><span>さっそくハッシュ値を</span></span><span><span>求めてみようよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>まずはハッシュを求める</span></span><span><span>元データを作ろう</span></span><span><span>どのように作ってもいいけど</span></span><span><span>以下のようにしてみようか</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>-n <wbr>&quot;hello&quot; <wbr>&gt; <wbr>~/hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>echo</code><span> の </span><code>-n</code><span> オプションは</span></span><span><span>末尾に改行を付けないだったね</span></span><span><span><wbr>「hello」<wbr>とだけ書かれた</span></span><span><code>hello</code><span> ファイルを作るんだね</span></span><span><span>実行したよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この </span><code>hello</code><span> ファイルを対象に</span></span><span><code>md5sum</code><span> を実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">md5sum <wbr>~/hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どんな値が出てくるか</span></span><span><span>ワクワクするね！</span></span></div></article><article class="code"><pre><code class="console">5d41402abc4b2a76b9719d911017c592  <wbr>/home/midori/hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>最初がハッシュ値で</span></span><span><span>最後がファイルのパスかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>複数のファイルを指定しても</span></span><span><span>出力の各行から</span></span><span><span>ファイルとハッシュ値の</span></span><span><span>対応がわかるよ！</span></span></div></article><article class="header2"><span>ハッシュ値の比較</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>拡張子が </span><code>.md5</code><span> や</span></span><span><code>.md5sum</code><span> のファイルには</span></span><span><code>md5sum</code><span> の出力が</span></span><span><span>書かれているんだ</span></span><span><span>このファイルを使えば</span></span><span><span>ハッシュ値の検証ができるよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>へぇ…</span></span><span><span>こっちも</span></span><span><span>やってみようよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>まずは </span><code>md5sum</code><span> の出力を</span></span><span><code>hello.md5sum</code><span> ファイルへ</span></span><span><span>出力しよう</span></span></div></article><article class="code"><pre><code class="bash">md5sum <wbr>~/hello <wbr>&gt; <wbr>~/hello.md5sum
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>実行したよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そうしたら </span><code>md5sum</code><span> に</span></span><span><code>-c</code><span> オプションを付けて</span></span><span><span>引数に </span><code>hello.md5sum</code><span> を</span></span><span><span>指定して実行してね</span></span></div></article><article class="code"><pre><code class="bash">md5sum <wbr>-c  <wbr>~/hello.md5sum
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>-c</code><span> オプションを指定すると</span></span><span><span>指定されたファイルの</span></span><span><span>ハッシュ値を求めるのではなく</span></span><span><span>指定されたファイルの内容から</span></span><span><span>ハッシュ値を確認する動作を</span></span><span><span>してくれるんだね！</span></span></div></article><article class="code"><pre><code class="console">/home/midori/hello: <wbr>OK
</code></pre></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>OK と出たよ！</span></span><span><code>hello.md5sum</code><span> に</span></span><span><span>記録されていたハッシュ値と</span></span><span><span>実際のファイルのハッシュ値が</span></span><span><span>一致したんだね！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ところで</span></span><span><span>一致しなかった場合は</span></span><span><span>どうなるんだろうね？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>それなら</span></span><span><code>hello</code><span> ファイルの</span></span><span><span>内容を変更してみよう</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>&gt;&gt; <wbr>~/hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>echo</code><span> に引数を</span></span><span><span>指定していないけど</span></span><span><span>何を出力しているのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>echo</code><span> に</span></span><span><span>引数を指定しないと</span></span><span><span>改行だけを出力するよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ということは</span></span><span><code>hello</code><span> ファイルの</span></span><span><span>内容の末尾に改行を</span></span><span><span>追加したんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この状態で</span></span><span><span>ハッシュ値の比較を</span></span><span><span>もう一度行ってみよう！</span></span></div></article><article class="code"><pre><code class="bash">md5sum <wbr>-c  <wbr>~/hello.md5sum
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これでファイルの</span></span><span><span>内容変更が検出できる</span></span><span><span>という訳なんだね！</span></span></div></article><article class="code"><pre><code class="console">/home/midori/hello: <wbr>FAILED
md5sum: <wbr>WARNING: <wbr>1 <wbr>computed <wbr>checksum <wbr>did <wbr>NOT <wbr>match
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>おお！</span></span><span><span>チェックで失敗したね！</span></span><span><span>ちゃんとハッシュ値の</span></span><span><span>変化を検出できたよ！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は </span><code>md5sum</code><span> で</span></span><span><span>ハッシュ値を求めたり</span></span><span><span>ハッシュ値を使った</span></span><span><span>比較検証を行ったよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>md5sum</code><span> は MD5 を使うけど</span></span><span><span>他のハッシュアルゴリズムを</span></span><span><span>使いたい場合</span></span><span><span>同様の </span><code>〜sum</code><span> コマンドで</span></span><span><span>ハッシュ値を扱えるよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>一般的な操作での主な用途は</span></span><span><span>ファイル内容変化の検出だよ</span></span><span><span>ダウンロードサイトでは</span></span><span><code>.md5</code><span> や </span><code>.md5sum</code><span> も一緒に</span></span><span><span>公開されていることがあるので</span></span><span><span>これらを使って検証することで</span></span><span><span>データ化けが起こっていないと</span></span><span><span>確認できるんだ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章49話</div><div><a href="2/49/">ハッシュ(基本)</a></div></div><div><div>今</div><div>2章50話 ハッシュ(使い方)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章51話</div><div><a href="2/51/">終了ステータス</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
