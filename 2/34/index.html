<html lang="ja">
<head>
<title>Lから始まるLinux - 2章34話 パイプ</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,pipe,yes,shuf">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/33/" />
<link rel="next" href="2/35/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章33話</div>
<div><a href="2/33/">ヒアドキュメント</a></div>
</div>
<div>
<div>今</div>
<div>2章34話 パイプ</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章35話</div>
<div><a href="2/35/">ファイル検索</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><span>パイプ</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><code>&gt;</code><span> で、<wbr>コマンドの出力を</span></span>
<span><span>ファイルに書き出して…</span></span>
<span><code>&lt;</code><span> で、<wbr>コマンドの入力を</span></span>
<span><span>ファイルから読み込んで…</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>こんな場合は<wbr>「パイプ(pipe)」<wbr>が使えるよ</span></span>
<span><span>コマンド同士が直接入出力をやりとりするんだ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div>
<div>
<span><span>え？</span></span>
<span><span>私がやろうとしていたような</span></span>
<span><span>入出力内容を仲介するファイルを</span></span>
<span><span>作らなくても済むの？</span></span>
</div>
</article>
<article class="header2"><span>使い方</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>パイプはコマンドの出力を</span></span>
<span><span>別のコマンドの入力に渡す仕組みだよ</span></span>
<span><span>2つのコマンドの間に</span></span>
<span><span><wbr>「パイプ、<wbr>バーチカルバー (</span><code>|</code><span>)」<wbr>を</span></span>
<span><span>置くだけだよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">コマンド1 <wbr>| <wbr>コマンド2
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>へぇ！</span></span><span><span>そんなことができるんだ！</span></span><span><span>なんだか面白そう！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>yes</code><span> は</span></span><span><span>指定された文字列を</span></span><span><span>出力し続けるよ</span></span></div></article><article class="code"><pre><code class="bash">yes <wbr>[文字列]
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>文字列の指定がなければ</span></span><span><code>yes</code><span> を出力するよ</span></span><span><span>さっそく </span><code>yes</code><span> を</span></span><span><span>実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">yes
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="console">yes
yes
yes
...
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>うわっ！</span></span><span><span>yes の出力が止まらなくなっちゃったよ！</span></span><span><span>どうしよう？！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>落ち着いて</span></span><span><span><wbr>「割り込み(interruption)」<wbr>操作を使おう</span></span><span><span>キーボードから Ctrl + C を押してみて</span></span><span><span>これで今動いているコマンドを</span></span><span><span>強制的に停止できるよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>…あ、<wbr>止まった！</span></span><span><span>良かったぁ…</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でもこの </span><code>yes</code><span> コマンド</span></span><span><span>単体だと使い道がなさそうだよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>確かに </span><code>yes</code><span> 単体では便利に見えないかもね</span></span><span><span>このコマンドはパイプと組み合わせるために</span></span><span><span>用意されているんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ここでパイプが登場するのね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>たまに<wbr>「yes / <wbr>no」<wbr>の確認を</span></span><span><span>求めるコマンドがあるよね</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん、<wbr>あるよ</span></span><span><span>親切だけど手入力しないといけないから</span></span><span><span>操作がどうしても遅くなっちゃうね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>例えば </span><code>rm</code><span> に </span><code>-i</code><span> オプションを指定すると</span></span><span><span><wbr>「削除してよいか」<wbr>の確認を取るようになるんだ</span></span><span><span>これを確認を求めるコマンドの代わりだと思ってね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そんなコマンドと</span><code>yes</code><span> を組み合わせて</span></span><span><span>以下のように書くとどう思う？</span></span></div></article><article class="code"><pre><code class="bash">yes <wbr>| <wbr>rm <wbr>-i <wbr>/home/midori/*
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>えっと…</span></span><span><span>確認が全部<wbr>「yes」<wbr>って</span></span><span><span>自動で答えてくれるってこと？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>確認作業を自動化できるんだ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>すごい！</span></span><span><span>それなら役に立ちそう！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>Linux の基本的な考え方に</span></span><span><span><wbr>「単純なコマンドを組み合わせて複雑な処理を作る」<wbr></span></span><span><span>というものがあるんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>その中心がパイプなんだ</span></span><span><span>使いこなせるようになれば</span></span><span><span>もっと自由にコマンドを</span></span><span><span>操作できるようになるよ</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回はパイプを学んだよ！</span></span><span><span>コマンド同士の入出力をつなげられるんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>パイプはいくつもつなげられるよ！</span></span><span><span>以下のコマンドが何をするのか考えてみて</span></span></div></article><article class="code"><pre><code class="bash">cat <wbr>&lt;&lt; <wbr>EOF <wbr>| <wbr>shuf <wbr>| <wbr>head <wbr>-n <wbr>1
大吉
中吉
中吉
小吉
小吉
小吉
吉
吉
吉
吉
EOF
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>shuf</code><span> は行をランダムに並び替えるよ</span></span><span><span>shuffle の略なんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>head</code><span> の </span><code>-n</code><span> オプションは</span></span><span><span>指定された行数だけ表示するんだ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>これは…</span></span><span><span>おみくじ？！</span></span></div></article><article class="ordered-list"><ol><li><code>cat</code><span> とヒアドキュメントで複数行を生成</span></li><li><code>shuf</code><span> で行をランダムに並び替え</span></li><li><code>head -n 1</code><span> で先頭の1行だけ表示</span></li></ol></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>こんな風にパイプを活用すれば</span></span><span><span>いろんなアイデアを</span></span><span><span>簡単に実現できるよ</span></span></div></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>お兄ちゃん！</span></span><span><span>これ単純だけどすっごく楽しい！</span></span><span><span>履歴で何回も呼び出せて遊べちゃう！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章33話</div><div><a href="2/33/">ヒアドキュメント</a></div></div><div><div>今</div><div>2章34話 パイプ</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章35話</div><div><a href="2/35/">ファイル検索</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
