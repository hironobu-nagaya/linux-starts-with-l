<html lang="ja">
<head>
<title>Lから始まるLinux - 2章46話 プロセス置換</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/45/" />
<link rel="next" href="2/47/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章45話</div>
<div><a href="2/45/">パッチ</a></div>
</div>
<div>
<div>今</div>
<div>2章46話 プロセス置換</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章47話</div>
<div><a href="2/47/">グルーピング</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><span>プロセス置換</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>お兄ちゃん！</span></span>
<span><code>diff</code><span> で比較する内容を</span></span>
<span><span>入力リダイレクトから</span></span>
<span><span>受け取りたいんだけど</span></span>
<span><span>入力リダイレクトは</span></span>
<span><span>同時に1つしか使えないんだ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><code>diff</code><span> で</span></span>
<span><span><wbr>「比較元」<wbr>と</span></span>
<span><span><wbr>「比較先」<wbr>の両方を</span></span>
<span><span>入力リダイレクトから</span></span>
<span><span>受け取る方法って</span></span>
<span><span>あるのかな？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>ちゃんとあるから</span></span>
<span><span>安心してね</span></span>
<span><span>今回は<wbr>「プロセス置換</span></span>
<span><span>(process substitution)」<wbr></span></span>
<span><span>を学ぼう！</span></span>
</div>
</article>
<article class="header2"><span>書き方</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>プロセス置換は</span></span>
<span><span>このように書くよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">コマンド1 <wbr>&lt;(コマンド2)
コマンド1 <wbr>&gt;(コマンド2)
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>&lt;</code><span> や </span><code>&gt;</code><span> と </span><code>(...)</code><span> の間に</span></span><span><span>スペースを入れてはいけないよ</span></span><span><span>注意してね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これは </span><code>コマンド1</code><span> の</span></span><span><code>&lt;(...)</code><span> や </span><code>&gt;(...)</code><span> がある位置に</span></span><span><code>コマンド2</code><span> の実行結果を</span></span><span><span>内容に持つファイルが</span></span><span><span>引数で指定されたような</span></span><span><span>状態になるよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ファイルを</span></span><span><span>入力で使うの場合は </span><code>&lt;(...)</code></span><span><span>出力で使うの場合は </span><code>&gt;(...)</code></span><span><span>となるんだ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>ちょっと</span></span><span><span>言っている意味が</span></span><span><span>理解できないぞ？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これは定義を理解するより</span></span><span><span>実際に使って覚えた方が</span></span><span><span>いいと思うよ</span></span></div></article><article class="header2"><span>使い方</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>それではプロセス置換を</span></span><span><span>使いながら覚えよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>お兄ちゃん</span></span><span><span>よろしくね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>内容が異なる二つの</span></span><span><span>ディレクトリを作って</span></span><span><span>それらの </span><code>ls</code><span> の結果を</span></span><span><code>diff</code><span> で比べてみるよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>まずは二つのディレクトリ</span></span><span><code>diff1</code><span> と </span><code>diff2</code><span> を作るよ</span></span></div></article><article class="code"><pre><code class="bash">mkdir <wbr>~/diff{1,2}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ブレース展開を</span></span><span><span>使っているんだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次は </span><code>diff1</code><span> ディレクトリの中に</span></span><span><span>ファイルを作ってみよう</span></span></div></article><article class="code"><pre><code class="bash">touch <wbr>~/diff1/{1,2,3,4}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ブレース展開が大活躍だね！</span></span><span><span>コマンドを実行したよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今度は </span><code>diff2</code><span> ディレクトリの中に</span></span><span><span>ファイルを作ってみよう</span></span></div></article><article class="code"><pre><code class="bash">touch <wbr>~/diff2/{1,2,4,5}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ディレクトリの内容が</span></span><span><span>ちょっとずつ違うように</span></span><span><span>ファイルを作るんだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ここで </span><code>ls</code><span> に</span></span><span><code>-1</code><span> オプションを指定して</span></span><span><code>diff1</code><span> の内容を見てみよう</span></span><span><code>1</code><span>(イチ) なので気を付けてね</span></span></div></article><article class="code"><pre><code class="bash">ls <wbr>-1 <wbr>~/diff1
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>-1</code><span> は</span></span><span><span>どんなオプション</span></span><span><span>なんだろうね？</span></span></div></article><article class="code"><pre><code class="console">1
2
3
4
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど！</span></span><span><span>各ファイルを</span></span><span><span>1行ずつ表示してくれる</span></span><span><span>オプションなんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そういうことだね</span></span><span><span>同じように</span></span><span><code>diff2</code><span> ディレクトリも</span></span><span><span>表示されてみよう！</span></span></div></article><article class="code"><pre><code class="bash">ls <wbr>-1 <wbr>~/diff2
</code></pre></article><article class="code"><pre><code class="console">1
2
4
5
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>ls</code><span> の出力が</span></span><span><span>少しだけ違うのなら</span></span><span><code>diff</code><span> で</span></span><span><span>それぞれの出力を</span></span><span><span>比較できそうだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>コマンドでは</span></span><span><span>入力リダイレクトを</span></span><span><span>1つしか使えないけど</span></span><span><span>プロセス置換は</span></span><span><span>複数使えるんだ</span></span><span><span>これらの出力の差分を</span></span><span><span>表示させてみよう！</span></span></div></article><article class="code"><pre><code class="bash">diff <wbr>&lt;(ls <wbr>-1 <wbr>~/diff1) <wbr>&lt;(ls <wbr>-1 <wbr>~/diff2)
</code></pre></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>なるほど！</span></span><span><span>お兄ちゃんの</span></span><span><span>言っていた意味が</span></span><span><span>今なら理解できるよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>プロセス置換 </span><code>&lt;(...)</code><span> の位置に</span></span><span><span>コマンドの実行結果を</span></span><span><span>内容に持つファイルが</span></span><span><span>引数で指定されたような</span></span><span><span>状態になってくれるんだね！</span></span></div></article><article class="code"><pre><code class="console">3d2
&lt; <wbr>3
4a4
&gt; <wbr>5
</code></pre></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>うん！</span></span><span><code>3</code><span> ファイルは </span><code>diff1</code><span> にあって </span><code>diff2</code><span> になくて</span></span><span><code>5</code><span> ファイルは </span><code>diff2</code><span> にあって </span><code>diff1</code><span> にはないね</span></span><span><span>ちゃんと期待どおりの差分を</span></span><span><span>出力してくれているよ！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は<wbr>「プロセス置換」<wbr>を学んだよ</span></span><span><span>コマンドの引数のある場所に</span></span><span><span>別のコマンドの実行結果内容を</span></span><span><span>当てはめたい場合に便利なんだ！</span></span></div></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>一つのコマンド内で</span></span><span><span>複数回使えるというのも</span></span><span><span>便利で嬉しいね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>たいていは入力や出力リダイレクトを</span></span><span><span>そのまま書けば済む場合が多く</span></span><span><span>使用頻度はあまり多くない記述だよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回の </span><code>diff</code><span> ように</span></span><span><span>複数のリダイレクトを</span></span><span><span>同時に扱いたい場合や</span></span><span><span>コマンドが引数の指定のみ受け付け</span></span><span><span>標準入力を受け付けない場合などで</span></span><span><span>使われるんだ</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章45話</div><div><a href="2/45/">パッチ</a></div></div><div><div>今</div><div>2章46話 プロセス置換</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章47話</div><div><a href="2/47/">グルーピング</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
