<html lang="ja">
<head>
<title>Lから始まるLinux - 2章55話 grepコマンド</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,grep">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/54/" />
<link rel="next" href="2/56/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章54話</div>
<div><a href="2/54/">正規表現</a></div>
</div>
<div>
<div>今</div>
<div>2章55話 grepコマンド</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章56話</div>
<div><a href="2/56/">sedコマンド</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><code>grep</code><span> コマンド</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>お兄ちゃん！</span></span>
<span><span>今回は正規表現を</span></span>
<span><span>使ったコマンドを</span></span>
<span><span>教えてくれるんだよね？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>そうだよ！</span></span>
<span><span>今回は </span><code>grep</code><span> を学ぼう！</span></span>
</div>
</article>
<article class="header2"><span>使い方</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><code>grep</code><span> はファイルの内容から</span></span>
<span><span>指定された正規表現を検索して</span></span>
<span><span>マッチした行を表示してくれるよ！</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">grep <wbr>[オプション]... <wbr>正規表現 <wbr>[ファイル]
</code></pre></article><article class="table"><table><thead><tr><th><span>オプション</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><code>-E</code><span>, <wbr></span><code>--extended-regexp</code></td><td><span>拡張正規表現を使って検索(</span><code>+</code><span> や </span><code>?</code><span> などが使える)</span></td></tr><tr><td><code>-F</code><span>, <wbr></span><code>--fixed-strings</code></td><td><span>正規表現を使わず指定された文字列で検索</span></td></tr><tr><td><code>-o</code><span>, <wbr></span><code>--only-matching</code></td><td><span><wbr>「マッチした行」<wbr>の代わりに<wbr>「正規表現にマッチした箇所」<wbr>を表示</span></td></tr><tr><td><code>-c</code><span>, <wbr></span><code>--count</code></td><td><span><wbr>「マッチした行」<wbr>の代わりに<wbr>「正規表現にマッチした件数」<wbr>を表示</span></td></tr><tr><td><code>-l</code><span>, <wbr></span><code>--files-with-matches</code></td><td><span><wbr>「マッチした行」<wbr>の代わりに<wbr>「正規表現にマッチする内容を持つファイル」<wbr>を表示</span></td></tr><tr><td><code>-L</code><span>, <wbr></span><code>--files-without-match</code></td><td><span><wbr>「マッチした行」<wbr>の代わりに<wbr>「正規表現にマッチしない内容を持つファイル」<wbr>を表示</span></td></tr><tr><td><code>-m 回数</code><span>, <wbr></span><code>--max-count=回数</code></td><td><span>ファイル内で指定された回数マッチした時点で終了</span></td></tr><tr><td><code>-q</code><span>, <wbr></span><code>--quiet</code><span>, <wbr></span><code>--silent</code></td><td><span>結果を表示しない</span></td></tr><tr><td><code>-s</code><span>, <wbr></span><code>--no-messages</code></td><td><span>エラーメッセージを表示しない</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><code>grep</code><span> を使えば</span></span><span><span>ファイルの内容を</span></span><span><span>目で調べなくても</span></span><span><span>良くなるね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>正規表現はシェルで</span></span><span><span>特殊な意味を持つ記号を多く使うよ</span></span><span><span>なので正規表現は</span></span><span><span><wbr>「シングルクォート(</span><code>'</code><span>)」<wbr>で</span></span><span><span>囲うことが多いんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>わかった！</span></span><span><span>正規表現はなるべく</span></span><span><span>シングルクォートで囲うね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>grep</code><span> は指定された正規表現が</span></span><span><span>見つかったら<wbr>「成功」<wbr>を</span></span><span><span>見つからなかったら<wbr>「失敗」<wbr>を返すよ</span></span><span><span>このことを利用して</span></span><span><span>条件判定にも使えるんだ</span></span></div></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>面白そうな</span></span><span><span>コマンドだね！</span></span></div></article><article class="header2"><span>実践</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>/etc/passwd</code><span> ファイルを</span></span><span><span>検索してみよう</span></span><span><span>ユーザ情報が保管されている</span></span><span><span>設定ファイルなんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span><wbr>「コロン(</span><code>:</code><span>)」<wbr>区切りで</span></span><span><span>情報が格納されていて</span></span><span><span>最初がユーザ名になっているよ</span></span></div></article><article class="code"><pre><code class="bash">cat <wbr>/etc/passwd
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>実際に見るのが</span></span><span><span>理解しやすいよね！</span></span></div></article><article class="code"><pre><code class="console">root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
...
shigeru:x:1000:1000:Shigeru <wbr>Wakagi:/home/shigeru:/bin/bash
midori:x:1001:1001:Midori <wbr>Wakagi:/home/midori:/bin/bash
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>確かに<wbr>「コロン(</span><code>:</code><span>)」<wbr>区切りで</span></span><span><span>色々な情報があって</span></span><span><span>最初がユーザ名のようだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この中から </span><code>midori</code><span> ユーザの</span></span><span><span>情報だけを表示したい場合には</span></span><span><span>どうすればいいだろう？</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これではどうかな？</span></span></div></article><article class="code"><pre><code class="bash">grep <wbr>'midori' <wbr>/etc/passwd
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>確かに見つかるね</span></span><span><span>だけど最初のユーザ名以外の場所に</span></span><span><code>midori</code><span> という文字列が入っていると</span></span><span><span>その行も一緒に表示されてしまうよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ユーザ名が先頭に</span></span><span><span>書かれていることを</span></span><span><span>利用しよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>それならこれで</span></span><span><span>どうかな？</span></span></div></article><article class="code"><pre><code class="bash">grep <wbr>'^midori' <wbr>/etc/passwd
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>さっきよりもいいね！</span></span><span><span>でも </span><code>midoriiro</code><span> ユーザのように</span></span><span><code>midori</code><span> から始まっている</span></span><span><span>ユーザの行も引っかかって</span></span><span><span>表示されてしまうんだ</span></span><span><span>こうのような場合を避けるには</span></span><span><span>どうしたらいいんだろう？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ヒントは</span></span><span><span><wbr>「情報はコロン(</span><code>:</code><span>)で区切られている」<wbr></span></span><span><span>だよ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>あっ！</span></span><span><span>それならこうだよね！</span></span></div></article><article class="code"><pre><code class="bash">grep <wbr>'^midori:' <wbr>/etc/passwd
</code></pre></article><article class="talk"><div><img src="img/shigeru-smile.svg" alt="若木 しげる(笑顔)" /></div><div><span><span>よくできました！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>grep</code><span> はこのように</span></span><span><span>正規表現を指定して</span></span><span><span>調べたい文字列を</span></span><span><span>探すことができるよ</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は文字列検索コマンド</span></span><span><code>grep</code><span> を学んだよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>grep</code><span> で見つけた内容を</span></span><span><span>パイプで別コマンド渡して加工するなど</span></span><span><span>さらに高度な使い方もできるんだ</span></span><span><span>まずは文字列を探すコマンドとして</span></span><span><span>慣れていこう！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章54話</div><div><a href="2/54/">正規表現</a></div></div><div><div>今</div><div>2章55話 grepコマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章56話</div><div><a href="2/56/">sedコマンド</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
