<html lang="ja">
<head>
<title>Lから始まるLinux - 2章51話 終了ステータス</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,exit status,true,false">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/50/" />
<link rel="next" href="2/52/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章50話</div>
<div><a href="2/50/">ハッシュ(使い方)</a></div>
</div>
<div>
<div>今</div>
<div>2章51話 終了ステータス</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章52話</div>
<div><a href="2/52/">testコマンド</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><span>終了ステータス</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>お兄ちゃん！</span></span>
<span><span>たいていのコマンドって実行しても</span></span>
<span><span>起こったことを知らせてくれないよね</span></span>
<span><span>失敗したらエラーメッセージが</span></span>
<span><span>出ることが多いけど</span></span>
<span><span>成功したか失敗したかわかりにくいよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>実はコマンドは成功や失敗を</span></span>
<span><span>伝えているんだよ</span></span>
<span><span>今回は<wbr>「終了ステータス(exit status)」<wbr>を学ぼう！</span></span>
<span><span><wbr>「終了コード(exit code)」<wbr>や</span></span>
<span><span><wbr>「返り値(return value, <wbr>retval)」<wbr>とも</span></span>
<span><span>よばれるよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div>
<div>
<span><span>えっ？</span></span>
<span><span>コマンドは成功か失敗を</span></span>
<span><span>教えてくれていたの？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>普段は気にならないようになっているので</span></span>
<span><span>気が付かないのが普通だから大丈夫だよ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>終了ステータスは</span></span>
<span><span><wbr>「コマンドの成否」<wbr>を</span></span>
<span><span>数字で表したものだよ</span></span>
<span><span>実はこの数字を返していたんだ</span></span>
</div>
</article>
<article class="header2"><code>true</code><span> コマンド</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><code>true</code><span> は</span></span>
<span><span>どんな引数が与えられても</span></span>
<span><span>何もせず成功で終了するよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">true <wbr>[引数]...
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>引数なしで</span></span><span><span>実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">true
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>…何も起こらず</span></span><span><span>すぐにプロンプトが表示されたね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>何も起こっていないように見えるけど</span></span><span><span>シェルはこのコマンドの</span></span><span><span><wbr>「成功」<wbr>という結果を覚えているんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どうやって見ればいいのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>?</code><span> 変数を使おう！</span></span><span><span>この変数には直前のコマンドの</span></span><span><span>終了ステータスが入っているんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>echo</code><span> で </span><code>?</code><span> 変数の値を</span></span><span><span>表示させて確認しよう</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>$?
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どれどれ…</span></span></div></article><article class="code"><pre><code class="console">0
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>0</code><span> が表示されたよ！</span></span><span><code>true</code><span> が成功して終了するということは</span></span><span><code>0</code><span> は成功を意味するんだよね？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>シェルでは </span><code>0</code><span> が成功</span></span><span><code>0</code><span> 以外は失敗を意味するよ</span></span></div></article><article class="header2"><code>false</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>false</code><span> は</span></span><span><span>どんな引数が与えられても</span></span><span><span>何もせず失敗で終了するよ</span></span></div></article><article class="code"><pre><code class="bash">false <wbr>[引数]...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>名前がわかりやすいね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>こちらも引数なしで</span></span><span><span>実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">false
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これも特に何も起きず</span></span><span><span>すぐプロンプトが返ってきたね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>挙動は </span><code>true</code><span> と同じだけど</span></span><span><span>結果が違うんだ</span></span><span><span>終了ステータスを</span></span><span><span>確認してみよう</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>$?
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これまでの説明からすると</span></span><span><code>0</code><span> 以外が入っていそうだね</span></span></div></article><article class="code"><pre><code class="console">1
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今度は </span><code>1</code><span> が表示されたよ！</span></span><span><code>0</code><span> 以外が<wbr>「失敗」<wbr>を</span></span><span><span>意味するんだよね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そうなんだ</span></span><span><span>コマンドは終了するときに</span></span><span><span>終了ステータスを返しているよ</span></span><span><span>普段はあまり見ることはなく</span></span><span><span>必要な時に確認するものなんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど…</span></span><span><span>コマンドが成功したかどうか</span></span><span><code>?</code><span> 変数で確認できるんだね</span></span></div></article><article class="header2"><span>終了ステータスの反転 </span><code>!</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>コマンドの前に </span><code>!</code><span> を付けると</span></span><span><span>そのコマンドの終了ステータスを</span></span><span><span>反転するよ</span></span></div></article><article class="code"><pre><code class="bash">! <wbr>コマンド
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>コマンドが<wbr>「成功(</span><code>0</code><span>)」<wbr>を返せば<wbr>「失敗(</span><code>0</code><span>以外)」<wbr></span></span><span><span>コマンドが<wbr>「失敗(</span><code>0</code><span>以外)」<wbr>を返せば<wbr>「成功(</span><code>0</code><span>)」<wbr></span></span><span><span>を返すってこと？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そういうことだね！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は終了ステータスを学んだよ！</span></span><span><span>コマンドは終了ステータス</span></span><span><span>という数字を返していて</span></span><span><span>成功は </span><code>0</code><span>、<wbr>失敗は </span><code>0</code><span> 以外なんだ！</span></span><span><span>また成功と失敗は </span><code>!</code><span> で反転できるんだね！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でもこれって</span></span><span><span>どういう場面で</span></span><span><span>役に立つのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>例えば状況を判断して</span></span><span><span>処理を分ける場合に使われるよ</span></span><span><span><wbr>「あるコマンドが成功したら次の処理をする」<wbr>とか</span></span><span><span><wbr>「失敗したらエラーメッセージを表示する」<wbr></span></span><span><span>といった感じだね</span></span><span><span>具体的な使い方は少し応用的だから</span></span><span><span>もう少し後で学ぶことにしよう</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章50話</div><div><a href="2/50/">ハッシュ(使い方)</a></div></div><div><div>今</div><div>2章51話 終了ステータス</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章52話</div><div><a href="2/52/">testコマンド</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
