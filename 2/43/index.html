<html lang="ja">
<head>
<title>Lから始まるLinux - 2章43話 evalコマンド</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,eval">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="2/42/" />
<link rel="next" href="2/44/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>2章42話</div>
<div><a href="2/42/">算術式展開</a></div>
</div>
<div>
<div>今</div>
<div>2章43話 evalコマンド</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>2章44話</div>
<div><a href="2/44/">差分</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><code>eval</code><span> コマンド</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>お兄ちゃん！</span></span>
<span><span>ブレース展開を</span></span>
<span><span>試しているんだけど</span></span>
<span><span>どうも上手く行かないんだ！</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>試したコマンドはこれだよ！</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">END=4
echo <wbr>{1..$END}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ブレース展開されて</span></span><span><span>以下のようになると</span></span><span><span>思ったんだけど…</span></span></div></article><article class="code"><pre><code class="console">1 <wbr>2 <wbr>3 <wbr>4
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でも実際は</span></span><span><span>こうだったんだ…</span></span></div></article><article class="code"><pre><code class="console">{1..4}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>この原因…</span></span><span><span>わかるかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これは初心者が</span></span><span><span>手こずる問題の一つだね！</span></span><span><span>今回はこの挙動の説明と</span></span><span><span>解決方法を伝えるよ</span></span></div></article><article class="header2"><span>多段展開の挙動</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>みどりの記述が</span></span><span><span>期待どおりに動くには</span></span><span><span>展開が2段階必要なんだ</span></span></div></article><article class="ordered-list"><ol><li><code>END</code><span> 変数が展開されて数値 </span><code>4</code><span> になる</span></li><li><code>{1..4}</code><span> がブレース展開される</span></li></ol></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>言われてみると</span></span><span><span>確かにそうだよね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>このように展開が</span></span><span><span>何段階も重なっている場合</span></span><span><span>シェルは最初の展開しか</span></span><span><span>行ってくれないんだ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>つまり </span><code>END</code><span> 変数は</span></span><span><span>展開されるけど</span></span><span><span>ブレース展開は</span></span><span><span>行われないということ？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そういうことなんだ</span></span><span><span>実際に結果は</span></span><span><code>{1..4}</code><span> だったでしょ？</span></span></div></article><article class="header2"><span>多段展開の解釈</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でも、<wbr>色々な記述を学んで</span></span><span><span>それらを組み合わせられるようになると</span></span><span><span>こういった場面は結構あると思うんだ</span></span><span><span>どうにかならないかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>eval</code><span> は多段の展開を評価するよ</span></span><span><span><wbr>「evaluate(評価する)」<wbr>の略なんだ</span></span></div></article><article class="code"><pre><code class="bash">eval <wbr>コマンド
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>このように </span><code>eval</code><span> を実行すると</span></span><span><span>展開が無くなるまで</span></span><span><span>展開を繰り返してから</span></span><span><span>指定のコマンドを実行してくれるんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>へぇ！</span></span><span><span>これで問題を解決できるかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>みどりの例で</span></span><span><code>eval</code><span> を使ってみよう！</span></span></div></article><article class="code"><pre><code class="bash">END=4
eval <wbr>echo <wbr>{1..$END}
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>echo</code><span> の前に</span></span><span><code>eval</code><span> を追加しただけだね！</span></span><span><span>ちゃんと動いてくれるかな？</span></span></div></article><article class="code"><pre><code class="console">1 <wbr>2 <wbr>3 <wbr>4
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>おお！</span></span><span><span>こうやって解決するんだ！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は記述の展開が多段になっていると</span></span><span><span>シェルは最初の展開しかしてくれないことと</span></span><span><span>多段の展開をしてくれる </span><code>eval</code><span> を覚えたよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>定義どおりの記述をしているはずなのに</span></span><span><span>期待どおりの動作をしてくれない場合は</span></span><span><span>この挙動が原因の場合がほとんどなんだ</span></span><span><span>もしそうなら </span><code>eval</code><span> で解決できるよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章42話</div><div><a href="2/42/">算術式展開</a></div></div><div><div>今</div><div>2章43話 evalコマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章44話</div><div><a href="2/44/">差分</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
