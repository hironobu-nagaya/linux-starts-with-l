<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 2章57話 バイナリ関連コマンド</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,file,strip,strings,ldd,od"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="2/56/" /><link rel="next" href="2/58/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>2章56話</div><div><a href="2/56/">パス関連コマンド</a></div></div><div><div>今</div><div>2章57話 バイナリ関連コマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章58話</div><div><a href="2/58/">日時関連コマンド</a></div></div></div></header><main><section><article class="header1"><span>バイナリ関連コマンド</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん！</span></span><span><span>色々なコマンドを覚えて</span></span><span><span>操作の幅を広げたいんた！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回はバイナリに関する</span></span><span><span>コマンドを見ていこう！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span><wbr>「バイナリ(binary)」<wbr>は</span></span><span><span>コンピュータが直接処理するためのデータだよ</span></span><span><span>人間が読むためのテキストでは書かれていないんだ</span></span><span><span>だから専用のコマンドで扱う必要があるよ！</span></span></div></article><article class="header2"><code>file</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>file</code><span> は</span></span><span><span>ファイル形式を表示するよ</span></span></div></article><article class="code"><pre><code class="bash">file <wbr>[オプション]... <wbr>ファイル...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>もしかしてテキストファイルにも使える？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>うん、<wbr>使えるよ！</span></span><span><span>HTML などの種別も判別してくれるんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>では </span><code>ls</code><span> のファイル形式を見てみよう</span></span></div></article><article class="code"><pre><code class="bash">file <wbr>/bin/ls
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ちょっとワクワクするね！</span></span></div></article><article class="code"><pre><code class="console">/bin/ls: <wbr>ELF <wbr>64-bit <wbr>LSB <wbr>pie <wbr>executable, <wbr>x86-64, <wbr>version <wbr>1 <wbr>(SYSV), <wbr>dynamically <wbr>linked, <wbr>interpreter <wbr>/lib64/ld-linux-x86-64.so.2, <wbr>BuildID[sha1]=3ccc0d8aa8dc371f9c762c6e76823aa5b9d4041b, <wbr>for <wbr>GNU/Linux <wbr>3.2.0, <wbr>stripped
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この</span></span><span><span><wbr>「ELF(Executable and Linkable Format)」<wbr></span></span><span><span>というのが</span></span><span><span>Linux のバイナリ実行ファイル形式だよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>Windows の EXE みたいなものなのね！</span></span></div></article><article class="header2"><code>strip</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次は </span><code>strip</code><span> だよ</span></span><span><span>バイナリ実行ファイルから</span></span><span><span>デバッグ情報などを削除して</span></span><span><span>ファイルサイズを</span></span><span><span>大幅に減らしてくれるんだ</span></span></div></article><article class="code"><pre><code class="bash">strip <wbr>[オプション]... <wbr>ファイル...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>デバッグ情報って</span></span><span><span>普通の人は使わないけど</span></span><span><span>削除しても問題ないの？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>基本的には大丈夫だよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>配布されているパッケージは</span></span><span><span>ほとんどがストリップ済みなんだ</span></span><span><span>さっきの </span><code>file</code><span> の出力の</span></span><span><span>最後をみてごらん</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「ストリップ済み(</span><code>stripped</code><span>)」<wbr></span></span><span><span>ってあるね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>strip</code><span> を使う機会は少ないけど</span></span><span><span><wbr>「ストリップ」<wbr>という概念は出てくるよ</span></span></div></article><article class="header2"><code>strings</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>strings</code><span> は</span></span><span><span>バイナリの中から</span></span><span><span>人間が読める文字列を</span></span><span><span>抜き出してくれるよ</span></span></div></article><article class="code"><pre><code class="bash">strings <wbr>[オプション]... <wbr>ファイル...
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>ls</code><span> に対して実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">strings <wbr>/bin/ls
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>ls</code><span> の中に</span></span><span><span>普通のテキストが</span></span><span><span>混じっているの？</span></span></div></article><article class="code"><pre><code class="console">/lib64/ld-linux-x86-64.so.2
v,nv
_ITM_deregisterTMCloneTable
__gmon_start__
...
.data
.bss
.gnu_debuglink
.gnu_debugdata
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>おわっ！</span></span><span><span>たくさんの行が出力されたよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でも…</span></span><span><span>その中に<wbr>「help」<wbr>とか</span></span><span><span>見覚えのある単語もあるね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>バイナリの中には</span></span><span><span>エラーやヘルプのメッセージが</span></span><span><span>含まれていることが多いんだ</span></span><span><span>出力が多いので</span></span><span><code>less</code><span> でページ送りしながら見たり</span></span><span><code>grep</code><span> で探したい文字列だけ抜き出すといいよ</span></span></div></article><article class="code"><pre><code class="bash">strings <wbr>/bin/ls <wbr>| <wbr>less
</code></pre></article><article class="code"><pre><code class="bash">strings <wbr>/bin/ls <wbr>| <wbr>grep <wbr>'help'
</code></pre></article><article class="header2"><code>ldd</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>ldd</code><span> は実行ファイルが参照している</span></span><span><span>ライブラリを表示してくれるんだ</span></span></div></article><article class="code"><pre><code class="bash">ldd <wbr>[オプション]... <wbr>ファイル...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「ライブラリ」<wbr>は</span></span><span><span>コマンドの共通部品だったよね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>ls</code><span> を対象に調べてみよう！</span></span></div></article><article class="code"><pre><code class="bash">ldd <wbr>/bin/ls
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どんなライブラリを</span></span><span><span>参照しているのかな？</span></span></div></article><article class="code"><pre><code class="console">        <wbr>linux-vdso.so.1 <wbr>(0x00007fff41b49000)
        <wbr>libselinux.so.1 <wbr>=&gt; <wbr>/lib64/libselinux.so.1 <wbr>(0x00007fb3e6187000)
        <wbr>libcap.so.2 <wbr>=&gt; <wbr>/lib64/libcap.so.2 <wbr>(0x00007fb3e617d000)
        <wbr>libc.so.6 <wbr>=&gt; <wbr>/lib64/libc.so.6 <wbr>(0x00007fb3e5e00000)
        <wbr>libpcre2-8.so.0 <wbr>=&gt; <wbr>/lib64/libpcre2-8.so.0 <wbr>(0x00007fb3e60e1000)
        <wbr>/lib64/ld-linux-x86-64.so.2 <wbr>(0x00007fb3e61e1000)
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>各行が必要としているライブラリだよ</span></span><span><span>もしこれらのライブラリが見つからないと</span></span><span><code>ls</code><span> は動かないんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>コマンドが動かないときの</span></span><span><span>原因調査に使えそうだね！</span></span></div></article><article class="header2"><code>od</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>od</code><span> はファイルの中身を</span></span><span><span>八進数や十六進数の</span></span><span><span>数値で表示するよ</span></span></div></article><article class="code"><pre><code class="bash">od <wbr>[オプション]... <wbr>[ファイル]...
</code></pre></article><article class="table"><table><thead><tr><th><span>オプション</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><code>-x</code></td><td><span>十六進数2バイト表示</span></td></tr><tr><td><code>-o</code></td><td><span>八進数2バイト表示</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>バイナリは</span></span><span><span>生のデータだから</span></span><span><span>数字として見るんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>ls</code><span> を </span><code>od</code><span> で覗いてみよう</span></span><span><span>表示が膨大なので</span></span><span><code>head</code><span> と一緒に使うね</span></span></div></article><article class="code"><pre><code class="bash">od <wbr>/bin/ls <wbr>| <wbr>head
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どれどれ？</span></span></div></article><article class="code"><pre><code class="console">0000000 <wbr>042577 <wbr>043114 <wbr>000402 <wbr>000001 <wbr>000000 <wbr>000000 <wbr>000000 <wbr>000000
0000020 <wbr>000003 <wbr>000076 <wbr>000001 <wbr>000000 <wbr>065420 <wbr>000000 <wbr>000000 <wbr>000000
...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>数字だらけでよく分からないね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>ls</code><span> の中身を</span></span><span><span>八進数で表示しているんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今は数字を理解できる必要は無いよ</span></span><span><span><wbr>「</span><code>od</code><span> でバイナリの中身が読める」<wbr></span></span><span><span>とだけ覚えておこう！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回はバイナリ関連コマンド</span></span><span><code>file</code><span>, <wbr></span><code>strip</code><span>, <wbr></span><code>strings</code><span>, <wbr></span><code>ldd</code><span>, <wbr></span><code>od</code></span><span><span>を学んだよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>バイナリを直接扱う機会は多くはないので</span></span><span><span>最初はこのぐらいのコマンドを</span></span><span><span>知っていれば十分だよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章56話</div><div><a href="2/56/">パス関連コマンド</a></div></div><div><div>今</div><div>2章57話 バイナリ関連コマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章58話</div><div><a href="2/58/">日時関連コマンド</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>