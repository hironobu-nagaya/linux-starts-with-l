<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 2章59話 数学関連コマンド</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,seq,factor,expr,bc"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="2/58/" /><link rel="next" href="2/60/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>2章58話</div><div><a href="2/58/">日時関連コマンド</a></div></div><div><div>今</div><div>2章59話 数学関連コマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章60話</div><div><a href="2/60/">ログイン関連コマンド</a></div></div></div></header><main><section><article class="header1"><span>数学関連コマンド</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん！</span></span><span><span>思いつく動作の数だけ</span></span><span><span>コマンドがあるみたいだよ！</span></span><span><span>今回はどんなコマンドを</span></span><span><span>扱ってくれるんだろう？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回は数学に関する</span></span><span><span>コマンドを紹介するよ！</span></span></div></article><article class="header2"><code>seq</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>seq</code><span> は<wbr>「数列(sequence)」<wbr>を生成するよ</span></span><span><span>以下のように引数を1～3つ指定して使うんだ</span></span></div></article><article class="code"><pre><code class="bash">seq <wbr>終了値
seq <wbr>開始値 <wbr>終了値
seq <wbr>開始値 <wbr>増分 <wbr>終了値
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span><wbr>「開始値」<wbr>や<wbr>「増分」<wbr>が</span></span><span><span>指定されなかった場合</span></span><span><code>1</code><span> となるんだ</span></span><span><span>以下を実行してみよう</span></span></div></article><article class="code"><pre><code class="bash">seq <wbr>5
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どんな結果になるのかな？</span></span></div></article><article class="code"><pre><code class="console">1
2
3
4
5
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「</span><code>1</code><span> から始まり、<wbr></span></span><span><code>1</code><span> ずつ増えながら、<wbr></span></span><span><code>5</code><span> で終わる」<wbr>んだね！</span></span></div></article><article class="header2"><code>factor</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>factor</code><span> は</span></span><span><span>素因数分解をするよ</span></span></div></article><article class="code"><pre><code class="bash">factor <wbr>[整数]...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>素因数分解って…</span></span><span><span>どんな計算だったっけ？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これは実行して</span></span><span><span>見てみるのが</span></span><span><span>早いと思うよ</span></span></div></article><article class="code"><pre><code class="bash">factor <wbr>60
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どれどれ？</span></span></div></article><article class="code"><pre><code class="console">60: <wbr>2 <wbr>2 <wbr>3 <wbr>5
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど！</span></span><span><span><wbr>「60 = 2 × 2 × 3 × 5」<wbr>のような</span></span><span><span>分解をしてくれるんだね！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>でも素因数を扱うことは</span></span><span><span>めったにないような気がするなぁ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>素数はどうだろう？</span></span><span><span>素数は素因数分解できない性質を利用すれば</span></span><span><code>factor</code><span> から素数を調べられるんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下のコマンドは</span></span><span><code>1</code><span> から </span><code>20</code><span> の間にある素数を</span></span><span><code>seq</code><span> のように列挙するよ！</span></span></div></article><article class="code"><pre><code class="bash">factor <wbr>{1..20} <wbr>| <wbr>awk <wbr>-F':? <wbr>+' <wbr>'NF <wbr>== <wbr>2 <wbr>{ <wbr>print <wbr>$1 <wbr>}'
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>awk</code><span> の </span><code>NF</code><span> は</span></span><span><span><wbr>「フィールドの個数」<wbr>だよ</span></span><span><span>Number of Field の略なんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>へぇ…</span></span><span><span>実行してみるね！</span></span></div></article><article class="code"><pre><code class="console">2
3
5
7
11
13
17
19
</code></pre></article><article class="header2"><code>expr</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>expr</code><span> は</span></span><span><span>指定された表現を</span></span><span><span>解釈してくれるんだ</span></span><span><span>整数演算などで使われるよ</span></span></div></article><article class="code"><pre><code class="bash">expr <wbr>表現
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下を実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">expr <wbr>1 <wbr>+ <wbr>1
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これは予想しやすいね！</span></span><span><code>2</code><span> になるんでしょ？</span></span></div></article><article class="code"><pre><code class="console">2
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>正解！</span></span><span><code>expr</code><span> には注意があるよ</span></span><span><span>式で<wbr>「アスタリスク(</span><code>*</code><span>)」<wbr>は<wbr>「乗算」<wbr>だけど</span></span><span><span>シェルでは<wbr>「ワイルドカード」<wbr>なんだ</span></span><span><span>このようなシェルで意味を持つ記号は</span></span><span><span>クォートしてあげよう</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これって算術式展開 </span><code>$(( ... <wbr>))</code><span> の方が</span></span><span><span>楽じゃないのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>良い所に気が付いたね！</span></span><span><span>算術式展開が登場するまでは</span></span><span><code>expr</code><span> が使われていたんだ</span></span><span><span>今でも移植性を考慮した</span></span><span><span>スクリプトなどで</span></span><span><span>使われることがあるよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>また </span><code>表現</code><span> が</span></span><span><span>正しく評価できなければ</span></span><span><span>失敗を返すんだ</span></span><span><span>このことを利用して</span></span><span><span>整数の判定ができるよ</span></span></div></article><article class="code"><pre><code class="bash">TEXT=abc
expr <wbr>&quot;$TEXT&quot; <wbr>+ <wbr>1 <wbr>&gt; <wbr>/dev/null <wbr>2&gt;&amp;1 <wbr>\
    <wbr>&amp;&amp; <wbr>echo <wbr>&quot;$TEXT <wbr>は整数です&quot; <wbr>\
    <wbr>|| <wbr>echo <wbr>&quot;$TEXT <wbr>は整数ではありません&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど！</span></span><span><code>TEXT</code><span> 変数の値が整数じゃなかったら</span></span><span><span>演算できなくて失敗を返すんだね！</span></span></div></article><article class="header2"><code>bc</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>bc</code><span> は計算機なんだ</span></span><span><span>小数演算などで使われるよ</span></span></div></article><article class="code"><pre><code class="bash">bc <wbr>[オプション]... <wbr>[ファイル]...
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>早速実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">bc <wbr>&lt;&lt;&lt; <wbr>'1.1 <wbr>+ <wbr>1.2'
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ええっと…</span></span><span><span>答えは </span><code>2.3</code><span> かな？</span></span></div></article><article class="code"><pre><code class="console">2.3
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>正解！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これも算術式展開 </span><code>$(( ... <wbr>))</code><span> で…</span></span><span><span>って聞くのは野暮かな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>現在では小数の計算も</span></span><span><span>算術式展開を使うことが多いよ</span></span><span><code>expr</code><span> の小数バージョンのような</span></span><span><span>使われ方をするのも同じだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>bc</code><span> 自体が高度なスクリプト言語で</span></span><span><span>プログラムのように数式を書けるんだ</span></span><span><span>複雑な計算式をテキストに記述して</span></span><span><code>bc</code><span> に計算させるという使い方もされるよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下は </span><code>bc</code><span> で</span></span><span><span>半径2の円の面積を求めるよ</span></span></div></article><article class="code"><pre><code class="bash">bc <wbr>&lt;&lt; <wbr>\EOF
pi=3.14
r=2
r*r*pi
EOF
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>bc</code><span> の書き方を知らなくても</span></span><span><span>どんな計算を行っているか</span></span><span><span>見ればだいたい伝わる内容だね！</span></span></div></article><article class="code"><pre><code class="console">12.56
</code></pre></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は数学に関するコマンド</span></span><span><code>seq</code><span>, <wbr></span><code>factor</code><span>, <wbr></span><code>expr</code><span>, <wbr></span><code>bc</code></span><span><span>を学んだよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>用途はアイデア次第だよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章58話</div><div><a href="2/58/">日時関連コマンド</a></div></div><div><div>今</div><div>2章59話 数学関連コマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章60話</div><div><a href="2/60/">ログイン関連コマンド</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>