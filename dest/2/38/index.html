<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 2章38話 バックグラウンド実行</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,background,jobs,fg,bg"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="2/37/" /><link rel="next" href="2/39/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>2章37話</div><div><a href="2/37/">パッチ</a></div></div><div><div>今</div><div>2章38話 バックグラウンド実行</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章39話</div><div><a href="2/39/">プロセス</a></div></div></div></header><main><section><article class="header1"><span>バックグラウンド実行</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん！</span></span><span><span>音楽を聴きながら</span></span><span><span>作業をするように</span></span><span><span>複数のコマンドを</span></span><span><span>同時に動かせないかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ちゃんとそういう仕組みがあるよ！</span></span><span><span><wbr>「バックグラウンド実行」<wbr></span></span><span><span>とよばれるんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>やっぱりできるんだね！</span></span><span><span>教えて欲しい！</span></span></div></article><article class="header2"><span>フォアグラウンドとバックグラウンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>sleep</code><span> は</span></span><span><span>指定した秒数だけ待機するよ</span></span><span><span>指定がなければ1秒待機するんだ</span></span></div></article><article class="code"><pre><code class="bash">sleep <wbr>[秒数]
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>好きな秒数で </span><code>sleep</code><span> を</span></span><span><span>動かしてみよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>長すぎない数字がいいよね</span></span><span><span>3秒でどうかな？</span></span></div></article><article class="code"><pre><code class="bash">sleep <wbr>3
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>…あっ</span></span><span><span>3秒後ぐらい待たされた後に</span></span><span><span>プロンプトが表示されたよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>sleep</code><span> が終わるまで</span></span><span><span>次の操作ができないよね</span></span><span><span>これを<wbr>「フォアグラウンド(foreground)」<wbr>というんだ</span></span><span><span>この<wbr>「フォアグラウンド」<wbr>を</span></span><span><span><wbr>「バックグラウンド」<wbr>に持っていこう</span></span><span><span>コマンドの最後に </span><code>&amp;</code><span> を付けるだけだよ</span></span></div></article><article class="code"><pre><code class="bash">コマンド <wbr>&amp;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は長めの方がいいよね？</span></span><span><span>これでどうかな？</span></span></div></article><article class="code"><pre><code class="bash">sleep <wbr>273 <wbr>&amp;
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>あっ！</span></span><span><span>すぐにプロンプトが返ってきた！</span></span></div></article><article class="code"><pre><code class="console">[1] <wbr>5123
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>しかも </span><code>[1]</code><span> と</span></span><span><span>何かメッセージが出てきたよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>sleep</code><span> がバックグラウンドで動いて</span></span><span><span>フォアグラウンドで他の操作が</span></span><span><span>できるようになったんだ</span></span><span><span>バックグラウンドで動いている</span></span><span><span>プログラムを<wbr>「ジョブ(job)」<wbr>というよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>表示された</span><code>[1]</code><span> は</span></span><span><span><wbr>「ジョブ番号(job number, <wbr>jobspec)」<wbr>で</span></span><span><span>ジョブを一意に識別する番号なんだ</span></span></div></article><article class="header2"><code>jobs</code><span> コマンド</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ジョブは動作状況が見えにくいよね</span></span><span><span>ジョブの確認はどうすればよいのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>jobs</code><span> はジョブ一覧を表示するよ</span></span></div></article><article class="code"><pre><code class="bash">jobs <wbr>[オプション]... <wbr>[ジョブ番号]...
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ここでは </span><code>jobs</code><span> だけ実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">jobs
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>さっきの </span><code>sleep</code><span> は</span></span><span><span>バックグラウンドで</span></span><span><span>動いていてくれているかな？</span></span></div></article><article class="code"><pre><code class="console">[1]+ <wbr>Running                 <wbr>sleep <wbr>273 <wbr>&amp;
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>おお！</span></span><span><code>sleep 273 &amp;</code><span> が</span></span><span><span>動いているのがわかるね！</span></span></div></article><article class="header1"><code>fg</code><span>, <wbr></span><code>bg</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>fg</code><span> はジョブを</span></span><span><span>フォアグラウンドに移すよ</span></span><span><span>foreground の略なんだ</span></span></div></article><article class="code"><pre><code class="bash">fg <wbr>[ジョブ番号]
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>指定が無ければ</span></span><span><span>最後に実行されたジョブが対象になるよ</span></span><span><span>以下を実行してみよう！</span></span></div></article><article class="code"><pre><code class="bash">fg
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>実行したよ！</span></span></div></article><article class="code"><pre><code class="bash">sleep <wbr>273
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>sleep</code><span> が</span></span><span><span>フォアグラウンドになったんだね</span></span><span><span>プロンプトが表示されず</span></span><span><span>待たされ続けているよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>フォアグラウンドで</span></span><span><span>動いているコマンドを</span></span><span><span>バックグラウンドに</span></span><span><span>戻すこともできるの？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>できるよ！</span></span><span><span>Ctrl + Z を押してみて</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>Ctrl + C の割り込みと</span></span><span><span>操作が似ているね</span></span></div></article><article class="code"><pre><code class="console">[1]+  <wbr>Stopped                  <wbr>sleep <wbr>273
</code></pre></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>プロンプトが返ってきたよ！</span></span><span><code>jobs</code><span> と同じ感じで</span></span><span><span>番号が出てきた！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これはコマンドが</span></span><span><span>一時停止状態になって</span></span><span><span>バックグラウンドに</span></span><span><span>移ったという意味なんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>bg</code><span> は一時停止状態の</span></span><span><span>ジョブを再開するよ</span></span><span><span>これは background の略だよ</span></span></div></article><article class="code"><pre><code class="bash">bg <wbr>[ジョブ番号]...
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これも </span><code>bg</code><span> だけで実行しよう！</span></span></div></article><article class="code"><pre><code class="bash">bg
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>じゃあ </span><code>bg</code><span> を実行するね！</span></span></div></article><article class="code"><pre><code class="">[1]+ <wbr>sleep <wbr>273 <wbr>&amp;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>表示があって</span></span><span><span>すぐプロンプトが返ってきたよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ジョブの状況を確認してみよう</span></span></div></article><article class="code"><pre><code class="bash">jobs
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>どれどれ…</span></span></div></article><article class="code"><pre><code class="console">[1]+ <wbr>Running                 <wbr>sleep <wbr>273 <wbr>&amp;
</code></pre></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>本当だ！</span></span><span><span>裏でまた動き始めてくれたんだね！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>コマンドの後ろに </span><code>&amp;</code><span> を付けるだけで</span></span><span><span>バックグラウンド実行になるんだね！</span></span><span><span>関連コマンド </span><code>jobs</code><span>, <wbr></span><code>fg</code><span>, <wbr></span><code>bg</code><span> も学んだよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>バックグラウンド実行されるコマンドは</span></span><span><span>音楽のようにずっと裏で動いて欲しいコマンドや</span></span><span><span>時間のかかる処理などが実行されることが多いよ</span></span><span><span>今意識している操作をフォアグラウンドで進めて</span></span><span><span>Linux を快適に操作しよう！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>2章37話</div><div><a href="2/37/">パッチ</a></div></div><div><div>今</div><div>2章38話 バックグラウンド実行</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>2章39話</div><div><a href="2/39/">プロセス</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>