<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 4章5話 電源管理</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,super user,root,shutdown,systemctl,reboot,halt,poweroff"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="4/4/" /><link rel="next" href="4/6/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>4章4話</div><div><a href="4/4/">sudoとリダイレクト</a></div></div><div><div>今</div><div>4章5話 電源管理</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>4章6話</div><div><a href="4/6/">パッケージ管理</a></div></div></div></header><main><section><article class="header1"><span>電源管理</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん！</span></span><span><span>管理者になって</span></span><span><span>よく行う操作って何だろう？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>すぐに思いつくのは電源管理だね</span></span><span><span>Linux は複数のユーザが</span></span><span><span>操作する前提なので</span></span><span><span>電源管理はスーパユーザの仕事なんだ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>へぇ…</span></span><span><span>私にもその仕事を教えてよ！</span></span></div></article><article class="header2"><code>shutdown</code><span> コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>shutdown</code><span> は</span></span><span><span>基本的な電源管理コマンドだよ</span></span><span><span>どんなシステムにでもあると</span></span><span><span>考えても大丈夫なんだ</span></span></div></article><article class="code"><pre><code class="bash">shutdown <wbr>[オプション]... <wbr>時刻 <wbr>[メッセージ]
</code></pre></article><article class="table"><table><thead><tr><th><span>オプション</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><code>-P</code></td><td><span>電源オフ(デフォルト)</span></td></tr><tr><td><code>-H</code></td><td><span>システム停止</span></td></tr><tr><td><code>-r</code></td><td><span>再起動</span></td></tr><tr><td><code>-h</code></td><td><span>電源オフ、<wbr>システム停止が指定されていた場合はそれを上書きしない</span></td></tr></tbody></table></article><article class="table"><table><thead><tr><th><span>時刻の例</span></th><th><span>意味</span></th></tr></thead><tbody><tr><td><code>now</code></td><td><span>今すぐ</span></td></tr><tr><td><code>+30</code></td><td><span>30分後に</span></td></tr><tr><td><code>22:00</code></td><td><span>22:00に</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>難しく考えずに</span></span><span><span>以下の2つを覚えておけばいいよ</span></span></div></article><article class="table"><table><thead><tr><th><span>よく使う指定</span></th><th><span>意味</span></th></tr></thead><tbody><tr><td><code>sudo shutdown -h now</code></td><td><span>今すぐ電源オフ</span></td></tr><tr><td><code>sudo shutdown -r now</code></td><td><span>今すぐ再起動</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>まずはこの二つの指定を</span></span><span><span>覚えておくね！</span></span></div></article><article class="header2"><code>systemd</code><span> での電源管理</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>最近のディストリビューションでは</span></span><span><code>systemd</code><span> が電源を管理しているんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>systemd</code><span> が使われている場合</span></span><span><span>プロセスの一番親になっているので</span></span><span><code>pstree</code><span> で確認してみよう</span></span></div></article><article class="code"><pre><code class="bash">pstree
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>一番の親が</span></span><span><code>systemd</code><span> かどうか</span></span><span><span>見ればいいんだね？</span></span></div></article><article class="code"><pre><code class="console">systemd─┬─ModemManager───2*[{ModemManager}]
        <wbr>├─NetworkManager───2*[{NetworkManager}]
        <wbr>...
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃんの言うとおり</span></span><span><code>systemd</code><span> だったよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この場合電源管理は</span></span><span><code>systemd</code><span> に任せるのが一般的だよ</span></span><span><code>systemd</code><span> を管理するコマンド</span></span><span><code>systemctl</code><span> で以下のようにするよ</span></span></div></article><article class="table"><table><thead><tr><th><span>コマンド</span></th><th><span>動作</span></th></tr></thead><tbody><tr><td><code>sudo systemctl poweroff</code></td><td><span>電源オフ</span></td></tr><tr><td><code>sudo systemctl halt</code></td><td><span>システム停止</span></td></tr><tr><td><code>sudo systemctl reboot</code></td><td><span>再起動</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>systemd</code><span> が電源管理している場合</span></span><span><code>shutdown</code><span> は使わないほうが</span></span><span><span>いいのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>大丈夫だよ</span></span><span><span>この場合 </span><code>shutdown</code><span> は</span></span><span><code>systemd</code><span> の作法に従って</span></span><span><span>動いてくれるんだ</span></span></div></article><article class="header2"><span>他の電源管理コマンド</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>最近のディストリビューションは</span></span><span><span>親切なコマンドが</span></span><span><span>多く用意されているんだ</span></span><span><span>以下のコマンドでも</span></span><span><span>電源管理ができる場合があるよ</span></span></div></article><article class="table"><table><thead><tr><th><span>コマンド</span></th><th><span>動作</span></th></tr></thead><tbody><tr><td><code>poweroff</code></td><td><span>電源オフ</span></td></tr><tr><td><code>halt</code></td><td><span>システム停止</span></td></tr><tr><td><code>reboot</code></td><td><span>再起動</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>コマンドだけというのは</span></span><span><span>楽で覚えやすいね！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は電源管理の方法を学んだよ！</span></span><span><span>幾つも方法があるんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>shutdown</code><span> はどこでも使えるので</span></span><span><span>管理者の基本として覚えておこう！</span></span><span><span>普段はどの方法を使っても大丈夫だよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>4章4話</div><div><a href="4/4/">sudoとリダイレクト</a></div></div><div><div>今</div><div>4章5話 電源管理</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>4章6話</div><div><a href="4/6/">パッケージ管理</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>