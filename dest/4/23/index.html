<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 4章23話 強制アクセス制御</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,super user,root,mandatory access control,mac,SELinux,AppArmor,TOMOYO Linux"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="4/22/" /><link rel="next" href="5/1/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>4章22話</div><div><a href="4/22/">PAM</a></div></div><div><div>今</div><div>4章23話 強制アクセス制御</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>5章1話</div><div><a href="5/1/">個人設定</a></div></div></div></header><main><section><article class="header1"><span>強制アクセス制御</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回は</span></span><span><span><wbr>「強制アクセス制御(mandatory access control, <wbr>MAC)」<wbr></span></span><span><span>を知ろう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なんだかすごそうな名前だね！</span></span></div></article><article class="header2"><span>概要</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>Linux の基本的なアクセス制御は</span></span><span><span><wbr>「パーミッション」<wbr>なんだ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>パーミッションのように</span></span><span><span>アクセス制御対象の所有者が</span></span><span><span>自分で制御を決められる方式を</span></span><span><span><wbr>「任意アクセス制御(discretionary access control, <wbr>DAC)」<wbr></span></span><span><span>とよぶよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ファイル所有者が </span><code>chmod</code><span> で</span></span><span><span>パーミッションを設定できるよね</span></span><span><span>確かに<wbr>「任意」<wbr>のアクセス制御だと思う！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>パーミッションは仕組みは簡単だけど</span></span><span><span>ちゃんとアクセス制御できているよね？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>でも色々な使われ方をしているうちに</span></span><span><span>パーミッションだけでは</span></span><span><span>不十分な場合も出てきたんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>たとえばどんな感じかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>みどりのゲームサーバプログラムが</span></span><span><span>悪意あるユーザに乗っ取られたとしよう</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>たまに耳にする</span></span><span><span><wbr>「任意のコードを実行できる脆弱性」<wbr></span></span><span><span>とかというやつだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>その悪意あるユーザは</span></span><span><span>ゲームサーバプロセス実行者の権限で</span></span><span><span>そこからほとんどのコマンドを</span></span><span><span>実行できてしまうんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ほとんどのコマンドは</span></span><span><span>パーミッションで誰でも</span></span><span><span>実行を許しているからね</span></span><span><span>確かにそうなっちゃうね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そこでゲームサーバのプロセスに</span></span><span><span>以下のような制限を設けられたとしよう</span></span></div></article><article class="unordered-list"><ul><li><span>ゲームサーバのコマンドだけ実行できる</span></li><li><span>ゲームサーバに関係あるディレクトリ配下のみアクセスできる</span></li><li><span>ゲームサーバが扱う設定ファイルのみ読み込みできる</span></li><li><span>ゲームサーバが扱うデータファイルのみ読み書きできる</span></li><li><span>ゲームサーバが使うポートのみ使用できる</span></li></ul></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>良さそうな仕組みだね！</span></span><span><span>ゲームサーバが乗っ取られても</span></span><span><span>ゲームサーバ本来の動作以外は</span></span><span><span>実質何もできなくなっちゃうね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>このようにアクセス制御対象を</span></span><span><span>所有者ではなくシステムが管理して</span></span><span><span>できることできないことを</span></span><span><span>強制するアクセス制御を</span></span><span><span><wbr>「強制アクセス制御」<wbr>とよぶよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>とても強力なアクセス制御なんだね</span></span></div></article><article class="header2"><span>実装</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>強制アクセス制御の実装には</span></span><span><span>以下のようなものがあるよ</span></span></div></article><article class="table"><table><thead><tr><th><span>実装</span></th><th><span>説明</span></th></tr></thead><tbody><tr><td><a href="https://selinuxproject.org/" target="_blank" rel="noopener noreferrer">SELinux</a></td><td><span>細く設定できるが難しい</span></td></tr><tr><td><a href="https://apparmor.net" target="_blank" rel="noopener noreferrer">AppArmor</a></td><td><span>簡単に使えることを目指している</span></td></tr><tr><td><a href="https://tomoyo.sourceforge.net/" target="_blank" rel="noopener noreferrer">TOMOYO Linux</a></td><td><span>動作の学習から設定を作成する</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>強制アクセス制御の実装は</span></span><span><span>ディストリビューションに</span></span><span><span>含まれている場合がほとんどなんだ</span></span><span><span>なのでディストリビューションの</span></span><span><span>デフォルトを使うのが無難だよ</span></span><span><span>例えば Red Hat 系では SELinux</span></span><span><span>Debian 系では AppArmor が</span></span><span><span>採用されているよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>強制アクセス制御は</span></span><span><span>どうやって設定すれば</span></span><span><span>いいのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>強制アクセス制御の設定は複雑で難しく</span></span><span><span>強制アクセス制御の実装によっても変わるんだ</span></span><span><span>なのでここでは紹介だけに留めておくね</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は強制アクセス制御について学んだよ！</span></span><span><span>パーミッションではできなかった</span></span><span><span>細かなアクセス制御を指定できるんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>強制アクセス制御は簡易な解説では</span></span><span><span><wbr>「最初にオフにしましょう」<wbr>と</span></span><span><span>書かれてしまうぐらい難しい話題なんだ</span></span><span><span>でもちゃんと設定すれば</span></span><span><span>強固なセキュリティを</span></span><span><span>確保できる仕組みだよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>4章22話</div><div><a href="4/22/">PAM</a></div></div><div><div>今</div><div>4章23話 強制アクセス制御</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>5章1話</div><div><a href="5/1/">個人設定</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>