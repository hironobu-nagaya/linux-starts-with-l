<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 3章5話 if文(実践)</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,shell script,if"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="3/4/" /><link rel="next" href="3/6/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>3章4話</div><div><a href="3/4/">if文(使い方)</a></div></div><div><div>今</div><div>3章5話 if文(実践)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>3章6話</div><div><a href="3/6/">case文(使い方)</a></div></div></div></header><main><section><article class="header1"><code>if</code><span>文(実践)</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>前回は</span><code>if</code><span>文の</span></span><span><span>使い方を学んだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回は</span><code>if</code><span>文を使った</span></span><span><span>シェルスクリプトを書いて</span></span><span><span>実際にどのようなものか</span></span><span><span>学んでいこう！</span></span></div></article><article class="header2"><span>実践</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回はパスワード強度をチェックする</span></span><span><code>check-passwd</code><span> スクリプトを</span></span><span><span>作ってみよう！</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>おお！</span></span><span><span>本格的な内容そう！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下でエディタを開いてね</span></span></div></article><article class="code"><pre><code class="bash">vim <wbr>check-passwd
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>準備万端だよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>内容は以下のようにしよう</span></span></div></article><article class="code"><pre><code class="bash">#!/bin/bash

echo <wbr>-n <wbr>&quot;パスワードを入力して下さい: <wbr>&quot;
read <wbr>-s <wbr>PASSWORD

if <wbr>[ <wbr>&quot;$(echo <wbr>-n <wbr>&quot;$PASSWORD&quot; <wbr>| <wbr>wc <wbr>-m)&quot; <wbr>-lt <wbr>8 <wbr>]
then
  <wbr>echo <wbr>&quot;パスワードは8文字以上にしましょう&quot;
elif <wbr>[ <wbr>-z <wbr>&quot;$(tr <wbr>-cd <wbr>a-z <wbr>&lt;&lt;&lt; <wbr>&quot;$PASSWORD&quot;)&quot; <wbr>]
then
  <wbr>echo <wbr>&quot;パスワードには英小文字を含めましょう&quot;
elif <wbr>[ <wbr>-z <wbr>&quot;$(tr <wbr>-cd <wbr>A-Z <wbr>&lt;&lt;&lt; <wbr>&quot;$PASSWORD&quot;)&quot; <wbr>]
then
  <wbr>echo <wbr>&quot;パスワードには英大文字を含めましょう&quot;
elif <wbr>[ <wbr>-z <wbr>&quot;$(tr <wbr>-cd <wbr>0-9 <wbr>&lt;&lt;&lt; <wbr>&quot;$PASSWORD&quot;)&quot; <wbr>]
then
  <wbr>echo <wbr>&quot;パスワードには英数字を含めましょう&quot;
else
  <wbr>echo <wbr>&quot;良いパスワードです！&quot;
fi
</code></pre></article><hr /><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>では全体の構造を見てみよう</span></span><span><code>if</code><span>文の前までは</span></span><span><span>どういう動きをするのかな？</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>-n <wbr>&quot;パスワードを入力して下さい: <wbr>&quot;
read <wbr>-s <wbr>PASSWORD
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これは </span><code>read</code><span> で</span></span><span><span>パスワード入力を求めているよ！</span></span><span><span>ただし </span><code>-s</code><span> オプションで</span></span><span><span>入力を画面表示しないように</span></span><span><span>なっているね</span></span><span><span>入力されたパスワードを</span></span><span><span>覗き見されるのを</span></span><span><span>防いでくれているんだ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>また </span><code>read</code><span> で</span></span><span><span>カーソルがあるだけだと</span></span><span><span>ユーザは何をしていいのか</span></span><span><span>わからないので</span></span><span><code>echo</code><span> で入力を促す</span></span><span><span>メッセージを表示して</span></span><span><span>ユーザがパスワード入力すれば</span></span><span><span>良いことを伝えているね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおりだね！</span></span><span><span>ここは </span><code>read</code><span> の</span></span><span><span>おさらいのような感じだね</span></span></div></article><hr /><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次は</span><code>if</code><span>文の中に入っていこう</span></span><span><span>最初のコマンドは</span></span><span><span>何をしているのかな？</span></span></div></article><article class="code"><pre><code class="bash">[ <wbr>&quot;$(echo <wbr>-n <wbr>&quot;$PASSWORD&quot; <wbr>| <wbr>wc <wbr>-m)&quot; <wbr>-lt <wbr>8 <wbr>]
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>むっ…</span></span><span><span>これはちょっと</span></span><span><span>読み解くのが難しいかも</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>こういうときは分解して考えよう</span></span><span><code>[ &quot;$( ... <wbr>)&quot; -lt 8 ]</code><span> と考えて</span></span><span><span>コマンド展開 </span><code>$( ... <wbr>)</code><span> の部分は</span></span><span><span>後回しで考えよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど！</span></span><span><span>コマンド展開 </span><code>$( ... <wbr>)</code><span> を</span></span><span><span>考えいないようにすると</span></span><span><span><wbr>「コマンド展開の結果が8より小さければ」<wbr></span></span><span><span>と読めるね</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>その後に</span></span><span><span>コマンド展開の内容を</span></span><span><span>分けて考えればいいんだ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>read</code><span> で受け取った</span></span><span><code>PASSWORD</code><span> 変数の値を</span></span><span><code>echo</code><span> で表示して</span></span><span><span>それを </span><code>wc</code><span> に渡して</span></span><span><span>文字数を数えているね</span></span><span><span>これは入力されたパスワードの</span></span><span><span>文字数を表示している処理に</span></span><span><span>なると思うよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>まとめると</span></span><span><span><wbr>「入力されたパスワード文字数が8より小さければ」<wbr></span></span><span><span>という判定処理をしているんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru-smile.svg" alt="若木 しげる(笑顔)" /></div><div><span><span>よくできました！</span></span><span><span>そのとおりの処理になっているよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>この判定処理が成功したら</span></span><span><span><wbr>「パスワードは8文字以上にしましょう」<wbr></span></span><span><span>と表示するんだね！</span></span></div></article><hr /><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次は </span><code>elif</code><span> の</span></span><span><span>コマンドを読んでみよう！</span></span></div></article><article class="code"><pre><code class="bash">[ <wbr>-z <wbr>&quot;$(tr <wbr>-cd <wbr>a-z <wbr>&lt;&lt;&lt; <wbr>&quot;$PASSWORD&quot;)&quot; <wbr>]
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これも最初はコマンド展開は</span></span><span><span>考えないようにするね</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>それなら…</span></span><span><span><wbr>「コマンド展開の結果が空文字なら」<wbr></span></span><span><span>という判定処理になっているよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>コマンド展開の中身を見ると</span></span><span><code>tr</code><span> で文字列の加工をするのかな</span></span><span><span>加工内容はヒアドストリング </span><code>&lt;&lt;&lt;</code><span> で</span></span><span><code>PASSWORD</code><span> 変数の値を入力しているね</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>tr</code><span> の </span><code>-c</code><span>, <wbr></span><code>-d</code><span> オプションと</span></span><span><code>a-z</code><span> 引数で</span></span><span><span><wbr>「英小文字(</span><code>a-z</code><span>)以外の文字を削除」<wbr></span></span><span><span>という処理になるはず！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>以上を合わせると</span></span><span><span><wbr>「パスワードから英小文字以外を削除して0文字だったら」<wbr></span></span><span><span>もっとわかりやすく言い換えると</span></span><span><span><wbr>「パスワードに英小文字が含まれていなかったら」<wbr></span></span><span><span>という判定処理なっているんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru-smile.svg" alt="若木 しげる(笑顔)" /></div><div><span><span>ちょっと難しかったけど良く読めたね！</span></span><span><span>その理解のとおりだよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>この判定処理が成功したら</span></span><span><span><wbr>「パスワードには英小文字を含めましょう」<wbr></span></span><span><span>と表示してくれるというわけなんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>後に続いている </span><code>elif</code><span> のコマンドも</span></span><span><span><wbr>「英大文字(</span><code>A-Z</code><span>)」<wbr>や</span></span><span><span><wbr>「英数字(</span><code>0-9</code><span>)」<wbr>で</span></span><span><span>同じようなことを</span></span><span><span>しているだけなんだ</span></span></div></article><hr /><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>最後は </span><code>else</code><span> の処理だね</span></span></div></article><article class="code"><pre><code class="bash">echo <wbr>&quot;良いパスワードです！&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>最後の </span><code>else</code><span> に到達するということは</span></span><span><span>今までの悪いパスワードの条件判定が失敗</span></span><span><span>つまり全て当てはまらなかった場合に</span></span><span><span>実行される処理だよ</span></span></div></article><article class="talk"><div><img src="img/midori-smile.svg" alt="若木 みどり(笑顔)" /></div><div><span><span>ここまで到達したら</span></span><span><span><wbr>「良いパスワードです！」<wbr>と</span></span><span><span>合格がもらえるんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru-smile.svg" alt="若木 しげる(笑顔)" /></div><div><span><span>よくできました！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>このパスワード合格の条件って</span></span><span><span>結構厳しくないかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これは自分のシェルスクリプトなんだ</span></span><span><span>もし自分に合わないと思う所あれば</span></span><span><span>好きなように書き換えていいんだよ</span></span></div></article><article class="talk"><div><img src="img/midori-surprised.svg" alt="若木 みどり(驚き)" /></div><div><span><span>そっか！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>こうやって学びながら</span></span><span><span>自分好みにカスタマイズするのも</span></span><span><span>良い勉強になるから</span></span><span><span>条件を変えたり</span></span><span><span>メッセージを工夫したりして</span></span><span><span>自分だけのオリジナルの</span></span><span><span>スクリプトを作ってみるとよいよ！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回の例題は</span></span><span><span>ハードだったけど</span></span><span><span>とても勉強になったよ！</span></span><span><span>お兄ちゃんの言うとおり</span></span><span><span>これを元に色々書き換えて</span></span><span><span>試してみる！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>3章4話</div><div><a href="3/4/">if文(使い方)</a></div></div><div><div>今</div><div>3章5話 if文(実践)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>3章6話</div><div><a href="3/6/">case文(使い方)</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>