<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 5章24話 ビルド(実践)</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,build,gcc,make,configure,GNU Hello"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="5/23/" /><link rel="next" href="5/25/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>5章23話</div><div><a href="5/23/">ビルド(手順)</a></div></div><div><div>今</div><div>5章24話 ビルド(実践)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>5章25話</div><div><a href="5/25/">BOINC</a></div></div></div></header><main><section><article class="header1"><span>ビルド(実践)</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>前回はソースコードを</span></span><span><span>ビルドする手順を教わったよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回は実際に</span></span><span><span>ソースコードをビルドしよう！</span></span></div></article><article class="header2"><span>必要パッケージインストール</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>今回は </span><a href="https://gnu.org/software/hello" target="_blank" rel="noopener noreferrer">GNU Hello</a><span> をビルドしよう！</span></span><span><span><wbr>「Hello, <wbr>world!」<wbr>と表示するコードを</span></span><span><span>パッケージ化したものだよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>初めて試すのに</span></span><span><span>ちょうど良さそうな題材だね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>まずは必要となるパッケージ</span></span><span><code>gcc</code><span> と </span><code>make</code><span> を</span></span><span><span>インストールしよう！</span></span></div></article><article class="code"><pre><code class="bash">sudo <wbr>apt <wbr>install <wbr>-y <wbr>gcc <wbr>make
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>OK！</span></span><span><span>インストールできたよ！</span></span></div></article><article class="header2"><span>ダウンロード</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次に GNU Hello の</span></span><span><span>ソースコードをダウンロードしよう</span></span><span><span>作業用ディレクトリを作り</span></span><span><span>そこへ移動しておいてね</span></span></div></article><article class="code"><pre><code class="">mkdir <wbr>-p <wbr>~/hello
cd <wbr>~/hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ディレクトリを作って</span></span><span><span>そこに移動したよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そうしたら </span><a href="https://ftp.gnu.org/gnu/hello/" target="_blank" rel="noopener noreferrer">公式ページ</a><span> から</span></span><span><span>ソースコードを取得しよう</span></span><span><span>バージョン番号は変数に分けておくと</span></span><span><span>柔軟性を持たせられるよ</span></span></div></article><article class="code"><pre><code class="bash">VERSION=2.12.1
curl <wbr>-LO <wbr>&quot;https://ftp.gnu.org/gnu/hello/hello-$VERSION.tar.gz&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ダウンロードが終わったよ</span></span><span><span>拡張子が </span><code>.tar.gz</code><span> ということは</span></span><span><span>tarball なんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>そのままでは使えないので</span></span><span><code>tar</code><span> で展開しよう</span></span></div></article><article class="code"><pre><code class="bash">tar <wbr>xf <wbr>&quot;hello-$VERSION.tar.gz&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>hello-$VERSION</code><span> という</span></span><span><span>ディレクトリが展開されるよ</span></span><span><span>その展開されたディレクトリへ移動しよう！</span></span></div></article><article class="code"><pre><code class="bash">cd <wbr>&quot;hello-$VERSION&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>いよいよソースコードとご対面だね</span></span></div></article><article class="header2"><code>configure</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次は configure スクリプトだよ</span></span><span><span>まずはどんなオプションがあるか</span></span><span><span>確認しよう！</span></span></div></article><article class="code"><pre><code class="bash">./configure <wbr>--help
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>たくさんオプションがあるけど</span></span><span><span>どれを使えばいいの？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>一般的にはインストール先を指定する</span></span><span><code>--prefix</code><span> オプションを使うよ</span></span><span><span>以下のようにして実行しよう</span></span></div></article><article class="code"><pre><code class="bash">./configure <wbr>--prefix=/usr
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>/usr</code><span> へインストールするようにしたよ！</span></span></div></article><article class="header2"><code>make</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次に </span><code>make</code><span> を実行しよう</span></span></div></article><article class="code"><pre><code class="bash">make
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>おお！</span></span><span><code>hello</code><span> という</span></span><span><span>実行ファイルができた！</span></span><span><span>これはもう動くの？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>実行ファイルは完成しているよ</span></span><span><span>以下のように動かしてみよう</span></span></div></article><article class="code"><pre><code class="bash">./hello
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>やってみるね！</span></span></div></article><article class="code"><pre><code class="console">Hello, <wbr>world!
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>実行ファイルが</span></span><span><span>期待どおりに動いているね！</span></span><span><span>ビルド成功だよ！</span></span></div></article><article class="header2"><code>make install</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>最後に </span><code>make install</code><span> を実行しよう</span></span><span><code>/usr</code><span> 配下にファイルを配置するので</span></span><span><code>sudo</code><span> が必要になるよ</span></span></div></article><article class="code"><pre><code class="bash">sudo <wbr>make <wbr>install
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これで </span><code>hello</code><span> が</span></span><span><span>システム全体で</span></span><span><span>使えるようになったんだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>実行ファイルと一緒に</span></span><span><span>関連ファイルも適切な場所に配置されるんだ</span></span><span><span>例えば </span><code>hello</code><span> のマニュアルも</span></span><span><span>見れるようになっているよ</span></span></div></article><article class="code"><pre><code class="bash">man <wbr>hello
</code></pre></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は GNU Hello を</span></span><span><span>ビルドしてインストールしたよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>パッケージ管理システムから手に入るパッケージは</span></span><span><span>大多数のユーザが使えるよう</span></span><span><span>無難な設定のビルドで作られているんだ</span></span><span><span>ソースコードからビルドすることで</span></span><span><span>特別な機能を有効にしたり</span></span><span><span>自分の環境に最適化した</span></span><span><span>実行ファイルを作ることができるよ！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>5章23話</div><div><a href="5/23/">ビルド(手順)</a></div></div><div><div>今</div><div>5章24話 ビルド(実践)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>5章25話</div><div><a href="5/25/">BOINC</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>