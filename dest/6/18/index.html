<!DOCTYPE html>
<html lang="ja"><head><title>Lから始まるLinux - 6章18話 S-nail</title><base href="../.."><meta charset="utf-8"><meta name="author" content="Hironobu Nagaya"><meta name="robots" content="all"><meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,S-nail,MUA"><meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です"><meta name="viewport" content="width=device-width, initial-scale=0.5" /><meta name="format-detection" content="telephone=no, email=no, address=no" /><link rel="prev" href="6/17/" /><link rel="next" href="7/1/" /><link rel="icon" href="favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="css/normalize.css" type="text/css"><link rel="stylesheet" href="css/common.css" type="text/css"><link rel="stylesheet" href="css/story.css" type="text/css"></head><body><header><h1>Lから始まるLinux</h1><div class="relation"><div><div>前</div><div>6章17話</div><div><a href="6/17/">Postfix</a></div></div><div><div>今</div><div>6章18話 S-nail</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>7章1話</div><div><a href="7/1/">Raspberry Pi</a></div></div></div></header><main><section><article class="header1"><span>S-nail</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>前回は MTA である Postfix を</span></span><span><span>設定して起動したよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>MTA に対してメールクライアントソフトを</span></span><span><span><wbr>「MUA(mail user agent)」<wbr>とよぶよ</span></span><span><span>Linux の MUA は伝統的に</span></span><span><code>mail</code><span>, <wbr></span><code>mailx</code><span>, <wbr></span><code>nail</code><span> などなんだ</span></span><span><span>今回はこれらの操作を引き継いだ MUA の</span></span><span><span>S-nail を使ってメールを送受信してみよう！</span></span></div></article><article class="header2"><span>インストール</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>S-nail のパッケージ名は </span><code>s-nail</code><span> だよ</span></span><span><span>パッケージ管理システムから</span></span><span><span>インストールしよう</span></span></div></article><article class="code"><pre><code class="bash">sudo <wbr>apt <wbr>install <wbr>-y <wbr>s-nail
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>インストールしたよ！</span></span></div></article><article class="header2"><span>メール送信</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下のようにして</span></span><span><span>メールを送信するよ</span></span></div></article><article class="code"><pre><code class="bash">s-nail <wbr>-s <wbr>件名 <wbr>ユーザ
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下のようにして</span></span><span><span>僕へメールを送ってみてね</span></span></div></article><article class="code"><pre><code class="bash">s-nail <wbr>-s <wbr>&quot;テスト送信&quot; <wbr>shigeru
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="console">To: <wbr>shigeru
Subject: <wbr>テスト送信
<span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>なるほど！</span></span><span><span>ここに本文を書いていけばいいのね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>終了は Ctrl + D か </span><code>~.</code><span> と入力だよ</span></span></div></article><article class="code"><pre><code class="bash">-------
(Preliminary) <wbr>Envelope <wbr>contains:
To: <wbr>shigeru
Subject: <wbr>テスト送信
Send <wbr>this <wbr>message <wbr>[yes/no, <wbr>empty: <wbr>recompose]? <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>最後の行は</span></span><span><span><wbr>「メッセージを送りますか？」<wbr>だね！</span></span><span><code>yes</code><span> で送信されるということだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>うん</span></span><span><span>省略形の </span><code>y</code><span> だけでもいいんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>プロンプトが返ってきたよ</span></span><span><span>これでメール送信完了なんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>入力リダイレクトやパイプなどを使って</span></span><span><span>入力を与えると非対話的な動作になるよ</span></span></div></article><article class="code"><pre><code class="bash">s-nail <wbr>-s <wbr>&quot;テスト送信&quot; <wbr>shigeru <wbr>&lt;&lt; <wbr>\EOF
テスト送信の本文です！
EOF
</code></pre></article><article class="header1"><span>メール閲覧</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>メール閲覧は </span><code>s-nail</code><span> を</span></span><span><span>そのまま実行しよう！</span></span></div></article><article class="code"><pre><code class="bash">s-nail
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="console">s-nail <wbr>version <wbr>v14.9.24.  <wbr>Type <wbr>`?' <wbr>for <wbr>help
/var/mail/midori: <wbr>1 <wbr>message <wbr>1 <wbr>new
▸N  <wbr>1 <wbr>shigeru@localhost <wbr>2025-01-18 <wbr>17:24   <wbr>18/638   <wbr>兄より
? <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>あっ！</span></span><span><span>お兄ちゃんから</span></span><span><span>メールが届いている！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>対話的動作の </span><code>s-nail</code><span> では</span></span><span><span>以下のコマンドを受け付けるんだ</span></span></div></article><article class="table"><table><thead><tr><th><span>コマンド</span></th><th><span>省略形</span></th><th><span>説明</span></th></tr></thead><tbody><tr><td><code>headers</code></td><td><code>h</code></td><td><span>メール一覧</span></td></tr><tr><td><code>next</code></td><td><code>n</code></td><td><span>次のメール</span></td></tr><tr><td><code>delete</code></td><td><code>d</code></td><td><span>メール削除</span></td></tr><tr><td><code>reply</code></td><td><code>r</code></td><td><span>メール返信</span></td></tr><tr><td><code>Reply</code></td><td><code>R</code></td><td><span>メール返信(送り主だけ)</span></td></tr><tr><td><code>quit</code></td><td><code>q</code></td><td><span>変更を保存して終了</span></td></tr><tr><td><code>xit</code><span>, <wbr></span><code>exit</code></td><td><code>x</code><span>, <wbr></span><code>e</code></td><td><span>変更を破棄して終了</span></td></tr><tr><td><code>?</code></td><td><code>?</code></td><td><span>ヘルプを表示</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>数字</code><span> を入れると</span></span><span><span>その番号のメールが表示されるよ</span></span><span><span>何も入力せず Enter を押すと</span></span><span><span>今見ているメール(</span><code>▸</code><span>) を表示するんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>じゃあ　Enter だけ入力するね</span></span></div></article><article class="code"><pre><code class="console">Date: <wbr>Sat, <wbr>18 <wbr>Jan <wbr>2025 <wbr>17:24:48 <wbr>+0900
To: <wbr>midori@localhost
Subject: <wbr>テスト送信
Message-Id: <wbr>&lt;20250118082448.BFFA11F5CF5@localhost&gt;
From: <wbr>shigeru@localhost

おめでとう！
コマンドだけでメールを見れるようになったんだね
メール送信機能を持つデーモンもあるし
シェルスクリプトからメールを送信しても良いんだ
何か問題が発生したらメール送信するようにしておくと
問題の早期発見に役に立つよ！

</code></pre></article><article class="header2"><span>メール通知</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>メールが届いていたら</span></span><span><span>お知らせがあると助かるなぁ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>以下のオプションで</span></span><span><span>メール確認ができるよ</span></span></div></article><article class="table"><table><thead><tr><th><span>オプション</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><code>-e</code></td><td><span>メールボックスにメールがあるかを確認。<wbr>あるなら成功、<wbr>ないなら失敗</span></td></tr><tr><td><code>-H</code></td><td><span>メール一覧を表示</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>~/.bashrc</code><span> に書いておけば</span></span><span><span>ログインのたびに通知を出せるんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>-e</code><span> オプションは</span></span><span><span>全て既読でもメールがあれば</span></span><span><span>成功になっちゃうんだね</span></span><span><span>新着や未読メールが</span></span><span><span>あることを知りたい場合は</span></span><span><span>どうすればいいのかな？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>メール一覧の出力から判断しよう</span></span><span><span>以下のようなコマンドはどうかな？</span></span></div></article><article class="code"><pre><code class="bash">s-nail <wbr>-H <wbr>| <wbr>grep <wbr>-sqm1 <wbr>'^[▸ <wbr>][NU]' <wbr>\
    <wbr>&amp;&amp; <wbr>echo <wbr>&quot;新着/未読メールがあります！&quot;
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>お兄ちゃん、<wbr>ありがとう！</span></span><span><span>これを </span><code>~/.bashrc</code><span> に書いて置くよ！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は S-nail を扱ったよ！</span></span><span><span>メール送受信をしてくれるんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>他にも以下のような MUA があるよ</span></span><span><span>自分の使いやすい MUA でメールを扱おう！</span></span></div></article><article class="unordered-list"><ul><li><code>procmail</code></li><li><code>fetchmail</code></li><li><code>mutt</code></li></ul></article></section></main><footer><div class="relation"><div><div>前</div><div>6章17話</div><div><a href="6/17/">Postfix</a></div></div><div><div>今</div><div>6章18話 S-nail</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>7章1話</div><div><a href="7/1/">Raspberry Pi</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>