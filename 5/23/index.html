<html lang="ja">
<head>
<title>Lから始まるLinux - 5章23話 ビルド(手順)</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,build,gcc,make,configure">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="5/22/" />
<link rel="next" href="5/24/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>5章22話</div>
<div><a href="5/22/">アーカイブ</a></div>
</div>
<div>
<div>今</div>
<div>5章23話 ビルド(手順)</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>5章24話</div>
<div><a href="5/24/">ビルド(実践)</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><span>ビルド(手順)</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>お兄ちゃん！</span></span>
<span><span>ソースコードから</span></span>
<span><span>プログラムを作るには</span></span>
<span><span>どうすればいいのかな？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>そのことを</span></span>
<span><span><wbr>「ビルド(build)」<wbr>と呼ぶよ</span></span>
<span><span>ビルド手順は使うツールや</span></span>
<span><span>プログラム言語などによって</span></span>
<span><span>変わってくるんだ</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>今回は</span></span>
<span><span>Linux で一般的な</span></span>
<span><span>C や C++ 言語での</span></span>
<span><span>ビルドを説明するね</span></span>
</div>
</article>
<article class="header2"><span>必要なパッケージ</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>ビルドには</span></span>
<span><span>以下のパッケージが必要だよ</span></span>
</div>
</article>
<article class="table">
<table>
<thead>
<tr>
<th><span>パッケージ</span></th>
<th><span>役割</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>gcc</span></td>
<td><span>コンパイラ(ソースコードから実行ファイルを生成)</span></td>
</tr>
<tr>
<td><span>make</span></td>
<td><span>ビルドツール(コンパイラの動作を統括)</span></td>
</tr>
</tbody>
</table>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>ソースコードによっては</span></span>
<span><span>以下のようなパッケージが</span></span>
<span><span>追加で必要になる場合があるよ</span></span>
</div>
</article>
<article class="table">
<table>
<thead>
<tr>
<th><span>パッケージ</span></th>
<th><span>役割</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span>autoconf</span></td>
<td><span>configure スクリプト生成</span></td>
</tr>
<tr>
<td><span>automake</span></td>
<td><span>Makefile ファイル雛形生成</span></td>
</tr>
<tr>
<td><span>flex</span></td>
<td><span>字句解析</span></td>
</tr>
<tr>
<td><span>bison</span></td>
<td><span>構文解析</span></td>
</tr>
<tr>
<td><span>pkg-config</span></td>
<td><span>パッケージ管理</span></td>
</tr>
<tr>
<td><span>libtool</span></td>
<td><span>ライブラリ管理</span></td>
</tr>
<tr>
<td><span>m4</span></td>
<td><span>マクロ処理</span></td>
</tr>
<tr>
<td><span>patch</span></td>
<td><span>ソースコード修正</span></td>
</tr>
<tr>
<td><span>ncurses</span></td>
<td><span>画面描画ライブラリ</span></td>
</tr>
</tbody>
</table>
</article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>追加パッケージは</span></span>
<span><span>どうやって知ればいいのかな？</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>たいていソースコードには</span></span>
<span><span>README や INSTALL ファイルが付属しているよ</span></span>
<span><span>この中に必要なパッケージやビルド手順が</span></span>
<span><span>書かれていることが多いからこれを読もう！</span></span>
</div>
</article>
<article class="header2"><code>configure</code></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>多くの場合ソースコードと一緒に</span></span>
<span><code>configure</code><span> スクリプトが</span></span>
<span><span>付属しているんだ</span></span>
<span><span>これは以下のようなビルドの</span></span>
<span><span>前準備をしてくれるツールだよ</span></span>
</div>
</article>
<article class="unordered-list">
<ul>
<li><span>マシン環境(OS, <wbr>必要パッケージなど)の確認</span></li>
<li><span>機能の有効/無効の設定</span></li>
<li><span>ビルド設定ファイル Makefile 生成</span></li>
</ul>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>どんな指定ができるかは</span></span>
<span><code>--help</code><span> オプションで</span></span>
<span><span>調べられるよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">./configure <wbr>--help
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>そのプログラム独自の機能などの</span></span><span><span>確認ができるんだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そうしたら必要なオプションを指定して</span></span><span><code>configure</code><span> スクリプトを実行しよう！</span></span></div></article><article class="code"><pre><code class="bash">./configure
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>簡単そうだけど</span></span><span><span>失敗することってある？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>失敗する場合は</span></span><span><span>必要なライブラリやツールが</span></span><span><span>無い場合がほとんどだよ</span></span><span><span>エラーメッセージを読んで</span></span><span><span>不足しているものを</span></span><span><span>インストールしてあげよう</span></span></div></article><article class="header2"><code>make</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次に </span><code>make</code><span> を実行しよう</span></span><span><span>これで実行ファイルを</span></span><span><span>生成してくれるよ</span></span></div></article><article class="code"><pre><code class="bash">make
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これだけで</span></span><span><span>作ってくれるんだ？！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>configure スクリプトが生成した</span></span><span><code>Makefile</code><span> の指示に従って</span></span><span><span>動作しているだけだからね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>make</code><span> が何をしているのか気になるのなら</span></span><span><code>Makefile </code><span>を覗いてみるといいよ</span></span></div></article><article class="code"><pre><code class="bash">less <wbr>Makefile
</code></pre></article><article class="header2"><code>make install</code></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ビルドが終わったらインストールだよ</span></span><span><span>成果物を所定のディレクトリへ配置しよう！</span></span></div></article><article class="code"><pre><code class="bash">make <wbr>install
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>/usr</code><span> 配下などに</span></span><span><span>インストールする場合は</span></span><span><span>書き込みができるよう</span></span><span><code>sudo</code><span> が必要となるよ</span></span></div></article><article class="header1"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回はソースコードから</span></span><span><span>実行ファイルを作るビルドを学んだよ！</span></span><span><code>configure</code><span> スクリプトと </span><code>make</code><span> で</span></span><span><span>簡単にできてしまうんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>これらの定型的な手順は<wbr>「CMMI</span></span><span><span>(configure-make-make-install)」<wbr></span></span><span><span>と呼ばれているよ</span></span><span><span>次回は実際にソースコードから</span></span><span><span>実行ファイルを作ってみよう！</span></span></div></article></section></main><footer><div class="relation"><div><div>前</div><div>5章22話</div><div><a href="5/22/">アーカイブ</a></div></div><div><div>今</div><div>5章23話 ビルド(手順)</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>5章24話</div><div><a href="5/24/">ビルド(実践)</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
