chapter=3
story=14
title=ヌルコマンド
keyword=shell script
keyword=null command
prev=3/13/
prev-title=exitコマンド
next=3/15/
next-title=引数処理

# ヌルコマンド `:`

しげる（通常）：
  今回は「ヌルコマンド(null command)」 `:` を学ぼう！
みどり（通常）：
  ひょっとして
  「何もしない」
  コマンドかな？
しげる（驚き）：
  そのとおり！
  よくわかったね！
みどり（通常）：
  `/dev/null` とかで
  気になって調べたんだ
  null は「空っぽ」「空虚」
  って意味でしょ！
みどり（通常）：
  でもなんで
  「何もしない」コマンドが
  用意されているんだろうね？

## 使い方

しげる（通常）：
  まずは
  使い方から
  見ていこう！

```bash
: [引数]...
```

しげる（通常）：
  どんな引数を指定しても
  何もせず成功して終了するよ
みどり（通常）：
  `true` と同じということ？
しげる（通常）：
  そうだね！
  挙動は `true` と一緒だよ
しげる（通常）：
  `true` は「成功を返す」に
  重きをおいているけど
  `:` は「何もしない」に
  重きをおいているんだ
みどり（通常）：
  文脈で `true` と `:` を
  使い分けるんだね！

## コマンドの記述が必要な場合

しげる（通常）：
  いくつかの記述には
  必ずコマンドが必要になるよ
  制御文 `if`, `for`, `while` での処理のほか
  グルーピング `{ ... }`, `( ... )` などがあるよ
みどり（通常）：
  「必ず書かないといけないけど書く処理がない」
  そういう時に `:` を書いておけばいいんだ！
しげる（通常）：
  たとえば以下は
  成功するまでコマンドを繰り返すよ

```bash
while ! コマンド
do
  :
done
```

みどり（通常）：
  `!` で `コマンド` の終了ステータスを反転させているから
  「 `コマンド` が失敗する限り処理を繰り返し」という処理ね
みどり（通常）：
  `do` ～ `done` の間に必ず処理を
  書かないと行けないから
  そこで `:` を書いているんだね！

## 空ファイル作成

しげる（通常）：
  空ファイル作成を
  以下のように書くこともあるよ

```bash
: > ファイル
```

みどり（通常）：
  何もせず何も出力しないから
  こうやって空ファイルを作れるんだね
  `touch` と同じかな？
しげる（通常）：
  実は `touch` の本当の役割は
  「ファイルに記録されている
  時刻を修正する」なんだ
  オプションを指定しないと
  「最終アクセス時刻と
  変更時刻を今に変更する」
  という動きをするよ
  ファイルが存在していなければ
  空ファイルを作って
  時刻を設定してくれていたんだ
みどり（通常）：
  「触って(touch)」
  アクセスしたのは今だよ！
  っていう役割だったんだね
しげる（通常）：
  なので存在しないファイルを指定する場合は
  `touch` と同じだけど
  存在しているファイルを指定する場合は
  挙動が違ってくるんだ

コマンド         | ファイルの内容
---------------- | --------------
`touch ファイル` | 変化なし
`: > ファイル`   | 空になる

しげる（通常）：
  `:` の代わりに
  何も出力しないコマンドで
  代用することもできるけど
  `:` が一番簡単な指定だよ

## コメント（非推奨）

しげる（通常）：
  `:` の引数に文章を書いて
  コメントとして
  使われることもあるんだ

```bash
: コメント
```

みどり（通常）：
  どんな引数でも何もしないので
  確かにコメント代わりに使えるかも
しげる（通常）：
  でも `:` もコマンドである以上
  わずかでも処理があるんだ
  `#` ではそのようなこともなく
  コマンドの途中でも使えるよ
  `#` は `:` をコメントとして使う場合の
  完全上位互換なんだ
しげる（通常）：
  見かけても
  「これはコメントなんだな」
  と読むようにして
  自分で書くコメントは `#` を使おう！

## まとめ

みどり（通常）：
  今回はヌルコマンド `:` を学んだよ！
  「何もしない」ことを
  意思表示する所で使うんだ！
しげる（通常）：
  知らないとスクリプトの中に出てきた
  `:` に戸惑うことになるよ
  ヌルコマンドがあることを覚えておこう！

