chapter=5
story=20
title=メッセージ(準備)
keyword=mesg
keyword=w
prev=5/19/
prev-title=テキストブラウザ
next=5/21/
next-title=メッセージ(実践)

# メッセージ(準備)

みどり（通常）：
  お兄ちゃん！
  私とお兄ちゃんが
  それぞれログインしているときに
  チャットみたいに会話できたら
  便利だと思わない？
しげる（通常）：
  Linux には他のユーザに
  メッセージを送る機能があるんだ
  今回はその準備を学ぼう！

## `mesg` コマンド

しげる（通常）：
  `mesg` は
  メッセージ受信設定を管理するよ

```bash
mesg [オプション]... [y|n]
```

しげる（通常）：
  引数なしで実行すると
  現在の設定を表示するよ
  実行してみよう！

```bash
mesg
```

みどり（通常）：
  どれどれ？

```console
is y
```

みどり（通常）：
  `y` は Yes ってことかな？
しげる（通常）：
  そうだね
  メッセージを受け取る許可が
  ある状態だよ
しげる（通常）：
  もし `is n` と表示されたら No
  メッセージの受け取りを
  拒否している状態なんだ
しげる（通常）：
  許可を切り替えたい場合は
  `mesg` の引数に
  `y` (yes) または
  `n` (no) を指定するんだ
  例えば以下のようにするよ

```bash
mesg n
```

みどり（通常）：
  私はお兄ちゃんのメッセージを
  受け取りたいから
  `y` のままにおくね！
しげる（通常）：
  `n` を設定しても
  スーパユーザからの
  メッセージは拒否できないんだ
  このことは覚えておこう

## 通信相手の確認

しげる（通常）：
  通信するには
  相手がログインしている
  必要があるよ
みどり（通常）：
  これは
  `who` や `w` で
  確認できるね
しげる（通常）：
  この目的では
  相手が何をしているかも
  表示してくれる
  `w` がいいよ
  実行してみよう

```bash
w
```

みどり（通常）：
  うん！

```console
17:07:36 up 7 days, 10:12,  2 users,  load average: 4.17, 4.11, 4.09
USER     TTY       LOGIN@   IDLE   JCPU   PCPU  WHAT
midori   pts/0     09:11    0.00s  0.17s  0.00s w
shigeru  pts/1     09:19    2.00s  3.97s  3.75s -bash
```

しげる（通常）：
  もし相手が複数ログインしているなら
  ユーザ名の他に端末名も必要になるよ
  WHAT の項目を確認して
  対象の行を特定し
  その TTY を控えよう

## まとめ

みどり（通常）：
  今回はお兄ちゃんと
  チャットをするための準備をしたよ！
  `mesg` でメッセージ受信設定
  `w` で相手の確認をするんだ！
しげる（通常）：
  メッセージは最近あまり
  使われない機能なんだ
  でも Linux を使っている
  身近な人同士なら
  面白い使い方ができるよ！

