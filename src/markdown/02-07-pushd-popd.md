chapter=2
story=7
title=pushdとpopd
prev=2/6/
prev-title=ディレクトリ指定
next=2/8/
next-title=履歴

# `pushd` と`popd`

みどり（通常）：
  お兄ちゃん！
  同じディレクトリを
  何度も行き来していると
  `cd` を打つのが
  面倒になってくるよ…
しげる（通常）：
  それなら
  `pushd` と `popd` を使おう！
しげる（通常）：
  `cd` のように
  カレントディレクトリを
  変更するコマンドだけど
  追加の機能があるんだ！

## スタック

しげる（通常）：
  `pushd` と `popd` を使う前に
  まずは「スタック(stack)」
  という言葉を覚えよう！
みどり（通常）：
  それはどういうものなのかな？
しげる（通常）：
  複数の情報を蓄えておける
  構造のことなんだ
しげる（通常）：
  スタックは
  「積まれたお皿」に
  似ているよ
みどり（通常）：
  積まれたお皿？
しげる（通常）：
  積まれたお皿があって
  そこに新しい皿を
  追加するとき
  みどりはどうするかな？
みどり（通常）：
  積まれたお皿の一番上に
  新しいお皿を乗せるよ！
しげる（通常）：
  じゃあ逆に積まれたお皿から
  お皿を一枚取り出すときは
  どうしようか？
みどり（通常）：
  普通だったら
  一番上から
  一枚取り出すよね？
しげる（通常）：
  このような方法で
  お皿を出し入れしていると
  下のお皿ほど昔に
  積まれたものになるよね
みどり（通常）：
  言われてみれば
  確かにそうだね
しげる（通常）：
  この「積まれたお皿」の
  出し入れルールを
  「後入れ先出し
  (last-in first-out, LIFO)」
  と呼ぶよ
しげる（通常）：
  そしてその「後入れ先出し」を
  持つ構造をスタックというんだ
みどり（通常）：
  スタックでは
  後に入れたものほど
  先に取り出されるんだね！
しげる（通常）：
  スタックの操作には
  名前が付いているよ
しげる（通常）：
  スタックに追加する操作を
  「プッシュ(push)」
  スタックから取り出す操作を
  「ポップ(pop)」
  と呼ぶんだ
みどり（驚き）：
  あれ？
  `pushd` と `popd` って
  もしかして…？
しげる（笑顔）：
  察しがいいね！
  `pushd` は push directory
  `popd` は pop directory
  の略なんだ

## `pushd` コマンド

しげる（通常）：
  `pushd` は
  ワーキングディレクトリを
  スタックに入れた上で
  指定のディレクトリに移動するよ
しげる（通常）：
  まずは `pwd` で
  ワーキングディレクトリを
  確認しよう！

```bash
pwd
```

みどり（通常）：
  ワーキングディレクトリは
  現在自分がいる
  ディレクトリのことだよね！

```bash
/home/midori
```

しげる（通常）：
  次に `pushd` で
  `/tmp` に移動してみよう！

```bash
pushd /tmp
```

みどり（通常）：
  うん！
  やってみるね！

```console
/tmp ~
```

みどり（通常）：
  何かが表示されたよ！
  たぶんパスかな？
しげる（通常）：
  そのとおり！
  `~` はホームディレクトリだったね
  みどりの場合は `/home/midori` だよ
しげる（通常）：
  この表示は
  `~` がスタックにプッシュされ
  現在 `/tmp` にいることを
  あらわしているよ
みどり（通常）：
  最初がワーキングディレクトリで
  残りがスタックの内容なんだね！
みどり（通常）：
  スタックということは
  何個も積み重ねられるんだよね？
  もう一回 `pushd` を使ったら
  どうなるのかな？
しげる（通常）：
  それでは `pushd` を使って
  `/etc` に移動してみよう！
  どんな表示がされるか
  想像してから実行してみてね

```bash
pushd /etc
```

みどり（通常）：
  こうだとは思うけど…

```bash
/etc /tmp ~
```

みどり（通常）：
  予想どおり！
  一番右側の `/etc` は
  現在のディレクトリだよね
みどり（通常）：
  残りはスタックの内容で
  現在は `/tmp` と `~` の
  二つのディレクトリが
  入っているんだね！

## `popd` コマンド

しげる（通常）：
  `popd` は
  `pushd` でプッシュしたスタックから
  ディレクトリをポップして
  そのディレクトリに移動するよ
しげる（通常）：
  では `popd` を実行してみよう！

```bash
popd
```

みどり（通常）：
  うん！

```console
/tmp ~
```

みどり（通常）：
  `popd` の出力は
  `pushd` と同じなんだね
  一番最初がワーキングディレクトリで
  残りがスタックの内容なんだ！
しげる（通常）：
  `popd` を実行した後で `pwd` を実行し
  ワーキングディレクトリを確認してみよう！

```bash
pwd
```

みどり（通常）：
  やってみる！

```console
/tmp
```

みどり（通常）：
  今は `/tmp` にいるよ！
  `pushd` の出力のとおりだね！
しげる（通常）：
  現在スタックには `~` だけが残っているね
  だからもう一度 `popd` を実行すると
  ホームディレクトリに戻れるよ！

## まとめ

みどり（通常）：
  今回は `pushd` と `popd` を学んだよ！
  ワーキングディレクトリを
  スタックに保存した上で移動し
  後でそこへ戻れるんだ！
しげる（通常）：
  みどりが最初に悩んでいたように
  何度も行き来する場合に
  便利な移動コマンドだよ！

