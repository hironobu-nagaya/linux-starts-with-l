chapter=4
story=20
title=fstabファイル
keyword=super user
keyword=root
keyword=fstab
keyword=mount
keyword=systemd
keyword=systemctl
prev=4/19/
prev-title=hostsファイル
next=4/21/
next-title=motdファイル

# `fstab` ファイル

しげる（通常）：
  今回は `/etc/fstab` を
  見てみよう！
みどり（通常）：
  このファイルは
  何の設定なんだろうね？
しげる（通常）：
  マウント設定が記述されているんだ
  システムが起動した時のマウントは
  この内容に従っているよ

## 書式

しげる（通常）：
  `/etc/fstab` は
  以下の書式で
  記述されているよ

フィールド | 名称        | 説明
---------- | ----------- | ----
1          | file system | ストレージのデバイスファイル
2          | dir         | マウントポイント
3          | type        | ファイルシステム種別
4          | options     | マウントオプション
5          | dump        | `dump` でバックアップを取るか(後述)
6          | pass        | 起動時にファイルシステムのチェックをするか(後述)

dump の値 | 意味
--------- | ----
0         | `dump` でバックアップを取らない
1         | `dump` でバックアップを取る

pass の値 | 意味
--------- | ----
0         | 起動時にファイルシステムをチェックしない
1         | 起動時にファイルシステムをチェックする(マウントポイントが `/` の場合)
2         | 起動時にファイルシステムをチェックする(マウントポイントが `/` 以外の場合)

みどり（通常）：
  `dump` って
  どんなコマンドなのかな？
しげる（通常）：
  ファイルをメディアに
  バックアップするよ
  バックアップメディアに
  磁気テープが使われていた時代の
  バックアップ方法なので
  通常は `0` で大丈夫だよ

## `mount` コマンド

しげる（通常）：
  `mount` は `/etc/fstab` を見ているよ
  もし `/etc/fstab` に設定があれば
  以下のように指定を簡略化できるんだ

```bash
mount デバイスファイル
mount マウントポイント
```

みどり（通常）：
  一方しか指定しなくても
  `/etc/fstab` から
  もう片方の指定が
  わかるものね！

## `systemd` を使っている場合

しげる（通常）：
  `systemd` は
  マウント設定も
  管理しているんだ
  `/etc/fstab` を編集したら
  設定の再読み込みが
  必要になるよ

```bash
sudo systemctl --daemon-reload
```

## まとめ

みどり（通常）：
  今回は `/etc/fstab` 設定ファイル
  について学んだよ！
  マウントの設定が
  書かれているんだ！
しげる（通常）：
  USB メモリのような
  一時的なマウント設定ではなく
  SSD や HDD などの
  永続的なマウント設定を記述するよ
  新しいストレージを用意したら
  自動でマウントされるよう
  `/etc/fstab` で設定しよう！

