chapter=2
story=42
title=算術式展開
keyword=arithmetic expansion
prev=2/41/
prev-title=コマンド置換
next=2/43/
next-title=evalコマンド

# 算術式展開

みどり（通常）：
  お兄ちゃん！
  足し算って3桁ぐらいから
  暗算が厳しくなるよね！
しげる（驚き）：
  うん？
みどり（通常）：
  ええっと
  要するに Linux 上で
  計算ができればなぁと…
しげる（通常）：
  もちろんできるよ！
  今回は 「算術式展開
  (arithmetic expansion)」
  を使おう！

## 使い方

しげる（通常）：
  基本的な書き方はこうだよ

```bash
$(( ... ))
```

みどり（通常）：
  コマンド展開 `$( ... )` より
  丸括弧が多い書き方なんだね
しげる（通常）：
  `...` の所に式を書けば
  展開してくれるんだ
  代表的な「演算子(operator)」は
  以下のようなものがあるよ

演算子 | 意味
------ | ----
`+`    | 加算
`-`    | 減算
`*`    | 乗算
`/`    | 除算
`%`    | 剰余算

しげる（通常）：
  さっそく `echo` で
  演算結果を表示させてみよう！

```bash
echo "$((1 + 1))"
```

みどり（通常）：
  実行してみるね！

```console
2
```

みどり（笑顔）：
  おおっ！
  まさに私が欲しかった機能だ！

## 変数の使用

しげる（通常）：
  算術式展開の中では
  変数やコマンド展開も使えるよ

```bash
TIMER=180
sleep $((TIMER / 2)); \
echo "半分が経過しました"; \
sleep $((TIMER / 2)); \
tput bel
```

みどり（通常）：
  あれ？
  `TIMER` 変数の値を
  参照するときは
  `$TIMER` と
  書くんじゃなかったっけ？
しげる（通常）：
  算術式展開の中では
  変数は参照でしか
  使われないんだ
  そのため参照を表す記号 `$` は省略可能で
  変数名のまま演算してもいいんだよ

## まとめ

みどり（通常）：
  今回は算術式展開を学んだよ！
  簡単な計算はシェル上で
  そのままできちゃうんだね！
しげる（通常）：
  整数だけでなく
  小数の演算もできるよ
  数値の加工は良くあるので
  算術式展開に慣れておこう！

