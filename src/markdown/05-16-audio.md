chapter=5
story=16
title=サウンド再生
keyword=aplay
keyword=mpg123
keyword=ogg123
keyword=timidity
keyword=wav
keyword=mp3
keyword=ogg
keyword=midi
keyword=spx
prev=5/15/
prev-title=ALSA
next=5/17/
next-title=cron

# サウンド再生

みどり（通常）：
  お兄ちゃん！
  前回は ALSA を設定して
  Linux で音を再生できるようにしたね！
しげる（通常）：
  今回はいよいよ
  音源の再生に
  挑戦してみよう！
しげる（通常）：
  音楽ファイルには
  色々な形式があるけど
  それぞれの形式ごとに適した
  再生方法を紹介していくよ

## WAV

しげる（通常）：
  「WAV(waveform audio file format)」は
  無圧縮サウンドファイル形式だよ
  サウンドが無劣化で保存されているんだ
  録音の生データなどは WAV だったりするよ
みどり（通常）：
  基本的なサウンドファイルって感じだよね
  何で再生するのかな？
しげる（通常）：
  `aplay` は WAV 再生ツールだよ
  ALSA に含まれる標準ツールなんだ

```bash
aplay [オプション]... ファイル...
```

みどり（通常）：
  じゃあ再生してみるね！

```bash
aplay music.wav
```

みどり（驚き）：
  おおー！
  ちゃんと音楽が
  再生されたよ！

## MP3

しげる（通常）：
  「MP3(MPEG-1 Audio Layer-3)」は
  圧縮サウンドファイル形式だよ
  最も普及している形式なので
  馴染み深いんじゃないかな？
みどり（通常）：
  私の持っている音楽ファイルは
  ほとんどが MP3 なんだ！
  これが再生できれば文句なしだよ
しげる（通常）：
  `mpg123` は MP3 再生ツールだよ

```bash
mpg123 [オプション]... ファイル...
```

オプション     | 役割
-------------- | ----
`--no-control` | コントロール機能を無効にする

みどり（通常）：
  さっそく再生してみるね！

```bash
mpg123 music.mp3
```

みどり（通常）：
  いいねいいね！
  ちゃんと音楽が
  再生されている！
みどり（通常）：
  今度はバックグラウンドで
  再生させてみよう！
しげる（通常）：
  `mpg123` は
  ターミナル操作を受け付ける
  「コントロール機能」が
  有効になっているんだ
  バックグラウンド実行すると
  この機能が影響して止まっちゃうんだ
  バックグラウンド実行する時は
  オプションでコントロール機能を
  無効化するといいよ

```bash
mpg123 --no-control music.mp3 &
```

## Ogg

しげる（通常）：
  Ogg は「コンテナ形式」という
  様々なサウンドファイル形式を
  内包できる入れ物なんだ
  多くの場合で圧縮形式 Vorbis が
  使われているよ
しげる（通常）：
  `ogg123` は
   Ogg 再生ツールだよ

```bash
ogg123 [オプション]... ファイル...
```

みどり（通常）：
  `ogg123` は `mpg123` に
  あやかって命名したのかな？
  再生してみるね

```bash
ogg123 music.ogg
```

## MIDI

しげる（通常）：
  「MIDI(Musical Instrument Digital Interface)」は
  楽譜のようなファイルだよ
  「どの音をどのタイミングで鳴らすか」
  だけが書かれているんだ
  だから音楽ファイルの中でも
  ファイルサイズがとても小さいんだ
みどり（通常）：
  MIDI は音がチープな印象が
  あるんだけど…
しげる（通常）：
  MIDI の音源データは
  「サウンドフォント
  (sound font, SF)」というよ
しげる（通常）：
  再生される音は
  サウンドフォントに左右されるんだ
  最近のサウンドフォントは
  良くできているので
  一度聴いてみるといいよ
みどり（通常）：
  MIDI は再生ソフトとは別に
  サウンドフォントも
  用意しないといけないんだね
しげる（通常）：
  `timidity` は
  MIDI 再生ツールだよ

```bash
timidity [オプション]... ファイル...
```

しげる（通常）：
  パッケージ管理システムでは
  `timidity` と一緒にサウンドフォントも
  インストールしてくれる場合が多いよ
  `timidity` をインストールしたら
  まずは再生を試してみよう
みどり（通常）：
  再生してみるね！

```bash
timidity music.midi
```

みどり（驚き）：
  おおっ！
  全然チープじゃない！
  十分楽しめる音だよ！
しげる（通常）：
  サウンドフォントは
  沢山種類があるんだ
  サウンドフォントを
  入れ替えて聴くのも
  楽しみ方の一つだよ

## Speex

しげる（通常）：
  Speex は「人間の音声」に特化した
  圧縮サウンドフォーマットだよ
  「人間の音声」に
  最適化した圧縮を行うことで
  ファイルサイズの割には
  音質の劣化が少ないんだ
  その成り立ちから
  人間の音声以外には向かない
  特化型のフォーマットだね
みどり（通常）：
  音声通話で使われている形式と
  聞いたことがあるよ
  音声主体の音源があるなら
  Speex に変換して
  保存するのもよさそうだね
しげる（通常）：
  Speex は Ogg コンテナに内包される
  フォーマットでもあるんだ
  だから再生は `ogg123` で大丈夫！
みどり（通常）：
  音源を用意してみたので
  再生してみよう！

```bash
ogg123 music.spx
```

## まとめ

みどり（通常）：
  今回は各種形式の
  サウンドファイルの
  再生方法を学んだよ！
  こうやって見てみると色々な
  ファイルフォーマットがあるんだね
しげる（通常）：
  どれも有名な再生ソフトだから
  必要なものはすぐに
  インストールして使えるはずだよ
  必要な再生ソフトで音源を楽しんでね！

