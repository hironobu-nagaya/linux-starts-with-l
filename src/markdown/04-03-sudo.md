chapter=4
story=3
title=sudoコマンド
keyword=super user
keyword=root
keyword=sudo
prev=4/2/
prev-title=suコマンド
next=4/4/
next-title=sudoとリダイレクト

# `sudo` コマンド

みどり（通常）：
  お兄ちゃん！
  `su` でスーパユーザに
  なれるのはわかったけど
  「ユーザを切り替える」って
  大げさな感じがするよ
  もっと簡単に管理者操作が
  できないのかな？
しげる（通常）：
  もちろんできるよ！
  今回は `sudo` を学ぼう！

## 使い方

しげる（通常）：
  `sudo` は
  指定されたユーザの権限で
  コマンドを実行するよ

```bash
sudo [-u ユーザ名] コマンド
```

しげる（通常）：
  ユーザを指定する場合は
  `-u` オプションを使うけど
  指定されない場合は
  スーパユーザとなるんだ
  大抵はスーパユーザとして
  実行する場合がほとんどなので
  `sudo コマンド` と覚えておこう
みどり（通常）：
  コマンドの実行者だけを
  切り替えてくれるんだね
  これなら `midori` ユーザのまま
  操作できるよ
しげる（通常）：
  そのことを試すために
  `whoami` を実行してみよう

```bash
whoami
```

みどり（通常）：
  `whoami` は
  ユーザ名を表示してくれる
  コマンドだったよね

```console
midori
```

みどり（笑顔）：
  うん！
  私は `midori` ユーザだよ！
しげる（通常）：
  今度は `sudo` を使って
  実行してみよう！

```bash
sudo whoami
```

みどり（通常）：
  スーパユーザとして
  `whoami` を実行してくれるから…

```console
root
```

みどり（通常）：
  シェルのプロンプトは `$` のままだけど
  実行結果は `root` ユーザだね！

## 設定

しげる（通常）：
  `sudo` は誰にでも許可を
  しているわけじゃないんだ
みどり（通常）：
  他人の権限を使うんだもの
  それはそうだよね！
しげる（通常）：
  `sudo` の設定ファイルは
  `/etc/sudoers` だよ
みどり（通常）：
  ここの設定を変更して
  私に `sudo` を
  使わせてくれたんだね！
しげる（通常）：
  設定ファイルで設定ができるけど
  多くのディストリビューションでは
  `sudo` を使えるグループが用意されているんだ
  そのグループにユーザが所属することで
  `sudo` を使えるようにしているのが大半だよ
みどり（通常）：
  へぇ…
  どんなグループなのかな？
しげる（通常）：
  伝統的には `wheel` グループと呼ばれるよ
  でも新しいディストリビューションでは
  `sudo` グループなどの名前を
  使っていることもあるよ
みどり（通常）：
  `wheel` や `sudo` グループに所属していたら
  `sudo` を使える見込みが高いのね！

## まとめ

みどり（通常）：
  今回は別ユーザとして
  コマンドを実行する
  `sudo` を学んだよ！
みどり（通常）：
  また設定ファイル `/etc/sudoers` を編集したり
  `wheel` や `sudo` グループに所属することで
  `sudo` を使えるユーザを
  管理していることを知ったよ！
しげる（通常）：
  `sudo` は気軽に打ててしまうけど
  スーパユーザとして
  操作しているのを忘れないでね
しげる（通常）：
  便利だからと何でも
  `sudo` を付けるのは悪い癖だよ
  必要な時だけ `sudo` を付けよう！

