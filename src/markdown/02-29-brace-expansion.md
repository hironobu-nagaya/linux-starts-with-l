chapter=2
story=29
title=ブレース展開
keyword=brace expansion
prev=2/28/
prev-title=ワイルドカード
next=2/30/
next-title=クォート

# ブレース展開

しげる（通常）：
  今回は文字列を生成する
  「ブレース展開
  (brace expansion)」
  を学んで行こう！
みどり（通常）：
  文字列を作れると
  どんなことが
  できるんだろう？

## 基本的な使い方

しげる（通常）：
  ブレース展開は
  以下のように書くよ

```bash
{要素1,要素2...}
```

しげる（通常）：
  これは次のように
  展開されるんだ

```bash
要素1 要素2 ...
```

みどり（通常）：
  これって普通に
  要素をスペースで区切って
  書けばいいんじゃないかな？
しげる（通常）：
  ブレース展開単独だと
  その通りだけど
  ブレース展開は他の文字列と
  組み合わせて力を発揮するんだ
  次の例をみてみよう

```bash
cp my-file{,.backup}
```

みどり（通常）：
  この書き方で
  `cp` が動くのかな？
  引数は最低2つ必要だよね？
しげる（通常）：
  確かに引数が1つしか
  ないように見えるよね
  でもブレース展開の働きで
  次のように展開されるんだ

```bash
cp my-file my-file.backup
```

1. 1つ目の要素は空文字なので、そのまま `my-file` になる
2. 2つ目の要素は `.backup` なので、これが `my-file` に追加されて `my-file.backup` になる

しげる（通常）：
  結果としてこのコマンドは
  `my-file` をコピーして
  `my-file.backup` を作ってくれるよ
みどり（笑顔）：
  なるほど！
  元のファイル名を活かした
  指定ができるんだね！

## 発展的な使い方

しげる（通常）：
  以下のように指定することで
  連続した範囲を展開できるんだ
  数字でもアルファベットでも使えるよ

```bash
{文字1..文字2}
```

みどり（通常）：
  どんなふうに
  使えるのかな？
しげる（通常）：
  こんな例を
  試してみようか

```bash
touch chapter-{0..9}{0..9}
```

みどり（驚き）：
  わっ！
  `chapter-00` から
  `chapter-99` まで
  100 個のファイルができてる！
しげる（通常）：
  これを使えば名前が規則的な
  ファイルを一気に作れるんだ
みどり（通常）：
  1回のコマンド実行で
  できてしまうんだね！
しげる（通常）：
  今度は
  アルファベットの
  例をみてみよう

```bash
mkdir project-{a..d}
```

しげる（通常）：
  これは
  `project-a` から
  `project-d` までの
  4つのディレクトリを作るよ
みどり（通常）：
  規則が分かれば
  一つずつ引数を
  指定しなくても
  いいんだね！
しげる（通常）：
  範囲指定が数値の場合
  「刻み(step)」を
  指定できるんだ
  こんな感じだよ

```bash
touch {0..20..5}
```

しげる（通常）：
  これは
  「`0` から始まり、
  `20` で終わる、
  `5` 刻みの数値」
  に展開されるよ
しげる（通常）：
  具体的には
  `0`, `5`, `10`, `15`, `20`
  の5つになるよ
みどり（驚き）：
  うわぁ！
  こんな使い方が
  できるんだ！

## まとめ

みどり（通常）：
  今回学んだ
  「ブレース展開」って
  「ワイルドカード」と
  似ている気がするよ
しげる（通常）：
  確かに似ている部分もあるけど
  ワイルドカードは基本的に
  存在するファイルにしか
  適用できないんだ
しげる（通常）：
  なので「ブレース展開」は
  コマンド実行時点では
  存在していないファイル名などを
  指定する場合に使われるよ
しげる（通常）：
  例えば `mv` や `cp` などの
  「移動先」や「コピー先」で
  使われるんだ
みどり（通常）：
  「ワイルドカード」と
  「ブレース展開」には
  そういう使い分けが
  あるんだね！
しげる（通常）：
  状況に合わせて使い分けたり
  組み合わせたりするといいよ！

