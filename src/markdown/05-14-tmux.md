chapter=5
story=14
title=tmuxコマンド
keyword=terminal multiplexer
keyword=tmux
prev=5/13/
prev-title=SCP(macOS,Linux)
next=5/15/
next-title=ALSA

# `tmux` コマンド

みどり（通常）：
  お兄ちゃん！
  複数の端末を立ち上げると
  便利だと気が付いたよ！
みどり（通常）：
  それぞれの端末で
  やることを分けられて
  Windows や macOS の
  仮想デスクトップの
  ような感覚で使えるよ！
しげる（通常）：
  それはいいライフハックだね！
  でも実はそれを一つの端末で
  済ませる方法があるんだ
みどり（驚き）：
  え？
  そんなことも
  できるの？
しげる（通常）：
  今回は
  「ターミナルマルチプレクサ
  (terminal multiplexer)」
  である `tmux` を紹介するよ

## 使い方

しげる（通常）：
  通常、ログインしたら
  システムから端末画面をもらうんだ
  ターミナルマルチプレクサは
  その処理の間に入って
  柔軟に端末を管理してくれるよ
みどり（通常）：
  へぇ…
  どんなことが
  できるのかな？
しげる（通常）：
  それでは
  `tmux` を起動して
  試してみよう

```bash
tmux
```

みどり（通常）：
  お！
  いつもの画面の下部に
  行が追加されたよ？
  `0:bash` とあるね
しげる（通常）：
  ここで `Ctrl + B` を押した後に
  `c` を押してみよう
みどり（通常）：
  新しいシェルの画面！
  画面下部に `1:bash` が追加されて
  そちらがハイライトされたよ
しげる（通常）：
  今度は `Ctrl + B` を押した後に
  `0`(ゼロ) を押してみよう
みどり（通常）：
  これは元の画面！
みどり（通常）：
  そっか！
  `0:bash` や `1:bash` は
  端末の画面を
  表しているんだね！
しげる（通常）：
  そういうことだよ
  こんなふうに一つの端末で
  複数の端末を管理できるんだ
  以下は代表的な
  `tmux` の操作だよ

操作                     | 挙動
------------------------ | ----
`Ctrl + B` の後に `c`    | 新しいウィンドウを作成
`Ctrl + B` の後に `x`    | 現在のペインを削除
`Ctrl + B` の後に `,`    | 現在のウィンドウの名前変更
`Ctrl + B` の後に `n`    | 次のウィンドウを開く
`Ctrl + B` の後に `p`    | 前のウィンドウを開く
`Ctrl + B` の後に `数字` | 指定された数字のウィンドウを開く

## `.tmux.conf` ファイル

しげる（通常）：
  `tmux` はカスタマイズ可能なんだ
  設定ファイルは
  `~/.tmux.conf` だよ

```bash
vim ~/.tmux.conf
```

みどり（通常）：
  どんな設定が
  おすすめかな？
しげる（通常）：
  `Ctrl` と `B` キーは離れていて
  押しにくい配置なんだ
  なのでこのキーを
  別に設定している人は多いよ
  以下は `Ctrl + B` の代わりに
  `Ctrl + A` を使う設定だよ

```tmux
set-option -g prefix C-a
unbind C-b
```

しげる（通常）：
  `tmux` ではウィンドウなどを
  `0` から数え始めるよ
  でも `0` と `1` は
  キー配置が離れていて
  少し使いにくいんだ
  以下はウインドウとペインを
  `1` から数え始めるようにするよ

```tmux
set-option -g base-index 1
set-window-option -g pane-base-index 1
```

しげる（通常）：
  デフォルトでは実行したコマンドに応じて
  ウィンドウ名を自動設定する機能が有効になっているんだ
  自分で意味ある名前を付けても上書きされてしまうよ
  この機能を無効にするには以下のように設定するんだ

```tmux
set-window-option -g automatic-rename off
```

しげる（通常）：
  まずは上記の3つの設定を
  おすすめするよ！
みどり（通常）：
  お兄ちゃんの説明が納得だったので
  まずはお兄ちゃんの
  おすすめの設定を書くよ！
しげる（通常）：
  設定を変更したら反映しよう
  `tmux` を再起動するか
  以下のコマンドで反映できるよ

```bash
tmux source-file ~/.tmux.conf
```

## まとめ

みどり（通常）：
  今回は端末を便利に管理する
  `tmux` を教えてもらったよ！
しげる（通常）：
  今回は基本的なウィンドウ機能の
  紹介だけだったけど
  実際はもっと多機能なんだ
  画面を分割したり
  複数人で画面を共有したりなど
  端末に関することが色々できるよ！
しげる（通常）：
  ターミナルマルチプレクサは
  他に [GNU Screen](https://www.gnu.org/software/screen/) などもあるよ

