chapter=2
story=65
title=プロセス関連コマンド
keyword=killall
keyword=pkill
keyword=pidof
keyword=pgrep
prev=2/64/
prev-title=ログイン関連コマンド
next=2/66/
next-title=システム関連コマンド

# プロセス関連コマンド

みどり（通常）：
  お兄ちゃん！
  色々なコマンドを
  教えてもらっているけど
  さすがにそろそろ
  出尽くしたんじゃないかな？！
しげる（通常）：
  プロセスという
  大事なことが抜けているね
  今回はプロセスに関する
  コマンドを見ていこう！

## `killall` コマンド

しげる（通常）：
  `killall` は
  指定された名前のプロセス
  全てにシグナルを送るよ

```bash
killall [オプション]... プロセス名...
```

みどり（通常）：
  へぇ！
  PID を調べるのに
  ひと手間なので
  名前で指定できるのは
  うれしいね！
しげる（通常）：
  以下は
  全ての `sleep` プロセスに
  SIGTERM を送信するよ

```bash
killall sleep
```

## `pkill` コマンド

しげる（通常）：
  `pkill` は
  正規表現で指定されたプロセスに
  シグナルを送るよ

```bash
pkill [オプション]... 正規表現
```

オプション                         | 役割
---------------------------------- | ----
`-f`, `--full`                     | プロセスではなくコマンドラインに正規表現を使う
`-U UID,...`, `--uid UID,...`      | 指定された UID を持つプロセスのみ
`-G GID,...`, `--group GID,...`    | 指定された GID を持つプロセスのみ
`-P PPID,...`, `--parent PPID,...` | 指定された PPID を持つプロセスのみ

みどり（通常）：
  名前より詳しい条件で
  指定したい場合に便利だね！
しげる（通常）：
  以下は
  3桁以上の秒数が指定されている
  `sleep` プロセスに
  SIGTERM を送信するよ

```bash
pkill -f 'sleep [1-9][0-9]{2,}'
```

## `pidof` コマンド

しげる（通常）：
  `pidof` は
  名前から PID を
  探してくれるよ

```bash
pidof [オプション]... 名前...
```

みどり（通常）：
  プロセス停止は
  `killall` でいいけど
  その他のプロセス操作で
  PID が必要な場合に
  使えそうだね
しげる（通常）：
  以下は全ての
  `sleep` プロセスの
  NICE値を5増加させるよ

```bash
renice +5 $(pidof sleep)
```

## `pgrep` コマンド

しげる（通常）：
  `pgrep` は
  正規表現から PID を
  探してくれるんだ

```bash
pgrep [オプション]... 正規表現
```

オプション                         | 役割
---------------------------------- | ----
`-f`, `--full`                     | プロセスではなくコマンドラインに正規表現を使う
`-U UID,...`, `--uid UID,...`      | 指定された UID を持つプロセスのみ
`-G GID,...`, `--group GID,...`    | 指定された GID を持つプロセスのみ
`-P PPID,...`, `--parent PPID,...` | 指定された PPID を持つプロセスのみ

みどり（通常）：
  指定自体は
  `pkill` と似ているね！
しげる（通常）：
  以下は
  3桁以上の秒数が
  指定されている
  `sleep` のNICE値を
  5増加させるよ

```bash
renice +5 $(pgrep -f 'sleep [1-9][0-9]{2,}')
```

## まとめ

みどり（通常）：
  今回はプロセスを扱うコマンド
  `killall`, `pkill`, `pidof`, `pgrep`
  を学んだよ！
しげる（通常）：
  基本的なプロセス管理は
  `ps` や `kill` でできるけど
  これらを知っていると
  柔軟な操作を可能にするよ！

