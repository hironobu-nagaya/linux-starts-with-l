chapter=3
story=19
title=envコマンド
keyword=shell script
keyword=env
prev=3/18/
prev-title=exportコマンド
next=3/20/
next-title=パラメータ展開(基本)

# `env` コマンド

みどり（通常）：
  お兄ちゃん！
  環境変数で変数を
  シェルスクリプトに
  渡せるのはわかったけど
  シェルスクリプトをたくさん作ると
  環境変数だらけになっちゃうよ！
  なんとかならないかな？
しげる（通常）：
  今回はそんな問題を解決する
  `env` を説明するよ！

## 使い方

しげる（通常）：
  `env` は
  指定された変数名の変数を
  コマンドに渡して実行するよ
  environment の略なんだ

```bash
env [オプション]... [変数名=値]... [コマンド]
```

みどり（通常）：
  へぇ…
  環境変数でない普通の変数も
  コマンドに渡せるんだ！
しげる（通常）：
  最近のシェルは `env` と
  同等の機能を持っているよ
  単に変数を渡したいだけなら
  以下のように書けるんだ

```bash
変数名=値... コマンド
```

みどり（驚き）：
  ただコマンドの前に変数を
  指定するだけでできるの？！
しげる（通常）：
  できるかどうかは
  試してみよう！

## 実践

しげる（通常）：
  前回みどりが改良した
  `greet` スクリプトは
  以下のようなものだったね

```bash
#!/bin/bash

if [ -z "$NAME" ]
then
  echo -n "名前を入力して下さい: "
  read NAME
fi
echo "こんにちは、$NAMEさん！"
```

みどり（通常）：
  うん！
しげる（通常）：
  前回は実行するスクリプトに
  `NAME` 環境変数を渡していたけど
  今回は `NAME` 変数を渡してみよう！

```bash
NAME=みどり ./greet
```

みどり（通常）：
  本当に `NAME` 変数が渡っていれば
  その値が使われるはずだけど…

```console
こんにちは、みどりさん！
```

みどり（驚き）：
  おお！
  期待どおりに動くね！

## 確認

しげる（通常）：
  `env` を引数なしで実行すると
  宣言されている変数一覧を
  表示するよ

```bash
env
```

みどり（通常）：
  似たようなコマンドでは
  おなじみの操作だね！

コマンド   | 表示内容
---------- | ------------
`readonly` | 読み取り専用変数
`export`   | 環境変数
`env`      | 変数(上記も含む)

## まとめ

みどり（通常）：
  今回はコマンドに
  変数を渡す方法を学んだよ！
  `変数名=値... コマンド`
  と書くだけなんだ！
しげる（通常）：
  一部のコマンドは
  変数で挙動を変えるよ
  `export` を使うと
  以降のコマンドにも影響があるので
  今回限りで変数を渡したい場合に
  便利な書き方なんだ

