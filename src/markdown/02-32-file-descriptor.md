chapter=2
story=32
title=ファイルディスクリプタ
keyword=FD
keyword=file discriptor
keyword=/dev/null
prev=2/31/
prev-title=リダイレクト
next=2/33/
next-title=ヒアドキュメント

# ファイルディスクリプタ

しげる（通常）：
  今回はリダイレクトと関わりが深い
  「ファイルディスクリプタ
  (file descriptor, FD)」
  について学ぼう！
  「ファイル記述子」
  ともよばれるよ
みどり（通常）：
  便利なリダイレクトが
  もっと便利になるのかな？！

## 標準のファイルディスクリプタ

しげる（通常）：
  ファイルディスクリプタは
  入力元や出力先を表す概念だよ
  標準では以下が定義されているんだ

番号 | 名前                                          | 入力元 / 出力先
---- | --------------------------------------------- | ---------------
0    | 標準入力(standard input, stdin)               | キーボード入力
1    | 標準出力(standard output, stdout)             | 端末画面出力
2    | 標準エラー出力(standard error outout, stderr) | 端末画面出力

みどり（通常）：
  「端末画面出力」が2つもあるよ？
しげる（通常）：
  コマンドの出力結果を
  ファイルに出力したい場合でも
  通常はエラーメッセージまでは
  含めて欲しくないよね？
  これらを区別するために
  「通常」と「エラー」で
  出力を分けているんだ

## ファイルディスクリプタの操作

しげる（通常）：
  リダイレクト記号の前に
  「番号」を記述することで
  対象のファイルディスクリプタを
  リダイレクトできるんだ

```bash
コマンド 番号> ファイル
```

みどり（通常）：
  あれ？
  前回は番号を指定しなかったよ？
しげる（通常）：
  番号は省略可能なんだ
  省略した場合…
  入力の場合は「標準入力(`0`)」
  出力の場合は「標準出力(`1`)」となるよ
しげる（通常）：
  以下はコマンドの出力を
  `ファイル` に書き出しつつ
  エラーメッセージを
  `/dev/null` に捨てるよ

```bash
コマンド > ファイル 2> /dev/null
```

## ファイルディスクリプタへのリダイレクト

みどり（通常）：
  それじゃ…
  エラーメッセージを含めた
  出力全部を捨てたいのなら
  このようにすればいいんだね！

```bash
コマンド > /dev/null 2> /dev/null
```

しげる（通常）：
  そうだね！
  でももっと簡単に指定できるよ
みどり（驚き）：
  えっ？
  これ以上簡単になるの？
しげる（通常）：
  リダイレクト先に
  ファイルディスクリプタを指定するんだ
  このように記述するよ

```bash
コマンド >&番号
```

しげる（通常）：
  これを使って
  このように書けるんだ

```bash
コマンド > /dev/null 2>&1
```

1. 「標準出力」は `/dev/null` に出力される
2. 「標準エラー出力(`2`)」は「標準出力(`1`)」に出力される
3. 「標準出力」は `/dev/null` に出力されるので「標準エラー出力」も `/dev/null` に出力される

みどり（驚き）：
  おおっと！
  これは頭を使うぞ…
しげる（通常）：
  最初のうちは
  出力を全部捨てたいのなら
  `> /dev/null 2>&1` と
  機械的に覚えてしまおう！

## まとめ

みどり（通常）：
  今回はファイルディスクリプタを学んだよ
  その番号とリダイレクト記号を合わせて
  細かくリダイレクトを指定できるんだ！
しげる（通常）：
  特に「出力を全部捨てる」は頻出だよ
  コマンド末尾に `> /dev/null 2>&1` だよ！

