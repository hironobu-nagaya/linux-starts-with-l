chapter=2
story=63
title=数学関連コマンド
keyword=seq
keyword=factor
keyword=expr
keyword=bc
prev=2/62/
prev-title=日時関連コマンド
next=2/64/
next-title=ログイン関連コマンド

# 数学関連コマンド

みどり（通常）：
  お兄ちゃん！
  思いつく動作の数だけ
  コマンドがあるみたいだよ！
  今回はどんなコマンドを
  扱ってくれるんだろう？
しげる（通常）：
  今回は数学に関する
  コマンドを紹介するよ！

## `seq` コマンド

しげる（通常）：
  `seq` は
  「数列(sequence)」を生成するよ
  以下のように引数を1～3つ指定して使うんだ

```bash
seq 終了値
seq 開始値 終了値
seq 開始値 増分 終了値
```

しげる（通常）：
  「開始値」や「増分」が
  指定されなかった場合
  `1` となるんだ
  以下を実行してみよう

```bash
seq 5
```

みどり（通常）：
  どんな結果に
  なるのかな？

```console
1
2
3
4
5
```

みどり（通常）：
  「`1` から始まり、
  `1` ずつ増えながら、
  `5` で終わる」んだね！

## `factor` コマンド

しげる（通常）：
  `factor` は
  素因数分解をするよ

```bash
factor [整数]...
```

みどり（通常）：
  素因数分解って…
  どんな計算だったっけ？
しげる（通常）：
  これは実行して
  見てみるのが
  早いと思うよ

```bash
factor 60
```

みどり（通常）：
  どれどれ？

```console
60: 2 2 3 5
```

みどり（通常）：
  なるほど！
  「60 = 2 × 2 × 3 × 5」のような
  分解をしてくれるんだね！
みどり（通常）：
  でも素因数を扱うことは
  めったにないような気がするなぁ
しげる（通常）：
  素数はどうだろう？
  素数は素因数分解できないことを利用すれば
  `factor` から素数を調べられるんだ
しげる（通常）：
  以下のコマンドは
  `1` から `20` の間にある素数を
  `seq` のように列挙するよ！

```bash
factor {1..20} | awk -F':? +' 'NF == 2 { print $1 }'
```

しげる（通常）：
  `awk` の `NF` は
  「フィールドの個数」だよ
  Number of Field の略なんだ
みどり（通常）：
  へぇ…
  実行してみるね！

```console
2
3
5
7
11
13
17
19
```

## `expr` コマンド

しげる（通常）：
  `expr` は
  指定された表現を
  解釈してくれるんだ
  整数演算などで使われるよ

```bash
expr 表現
```

しげる（通常）：
  以下を実行してみよう！


```bash
expr 1 + 1
```

みどり（通常）：
  これは予想しやすいね！
  `2` になるんでしょ？

```console
2
```

しげる（通常）：
  正解！
  `expr` には注意があるよ
  式で「アスタリスク(`*`)」は「乗算」だけど
  シェルでは「ワイルドカード」なんだ
  このようなシェルで意味を持つ記号は
  クォートしてあげよう
みどり（通常）：
  これって算術式展開 `$(( ... ))` の方が
  楽じゃないのかな？
しげる（通常）：
  良い所に気が付いたね！
  算術式展開が登場するまでは
  `expr` が使われていたんだ
  今でも移植性を考慮した
  スクリプトなどで
  使われることがあるよ
しげる（通常）：
  また `表現` が
  正しく評価できなければ
  失敗を返すんだ
  このことを利用して
  整数の判定ができるよ

```bash
TEXT=abc
expr "$TEXT" + 1 > /dev/null 2>&1 \
    && echo "$TEXT は整数です" \
    || echo "$TEXT は整数ではありません"
```

みどり（通常）：
  なるほど！
  `TEXT` 変数の値が
  整数じゃなかったら
  演算できなくて
  失敗を返すんだね！

## `bc` コマンド

しげる（通常）：
  `bc` は
  計算機なんだ
  小数演算などで
  使われるよ

```bash
bc [オプション]... [ファイル]...
```

しげる（通常）：
  さっそく実行してみよう！

```bash
bc <<< '1.1 + 1.2'
```

みどり（通常）：
  ええっと…
  答えは `2.3` かな？

```console
2.3
```

しげる（通常）：
  正解！
みどり（通常）：
  これも算術式展開 `$(( ... ))` で…
  って聞くのは野暮かな？
しげる（通常）：
  現在では小数の計算も
  算術式展開を使うことが多いよ
  `expr` の小数バージョンのような
  使われ方をするのも同じだね
しげる（通常）：
  `bc` 自体がスクリプト言語で
  プログラムのように数式を書けるんだ
  複雑な計算式をテキストに記述して
  `bc` に計算させるという
  使い方もされるよ
しげる（通常）：
  以下は `bc` で
  半径2の円の面積を求めるよ

```bash
bc << \EOF
pi=3.14
r=2
r*r*pi
EOF
```

みどり（通常）：
  `bc` の書き方を知らなくても
  どんな計算を行っているか
  見ればだいたい伝わる内容だね！

```console
12.56
```

## まとめ

みどり（通常）：
  今回は数学に関するコマンド
  `seq`, `factor`, `expr`, `bc`
  を学んだよ！
しげる（通常）：
  用途はアイデア次第だよ！

