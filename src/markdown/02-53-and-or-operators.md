chapter=2
story=53
title=AND演算子とOR演算子
keyword=and operator
keyword=or operator
prev=2/52/
prev-title=testコマンド
next=2/54/
next-title=正規表現

# AND 演算子と OR 演算子

みどり（通常）：
  お兄ちゃん！
  今回は終了ステータスを
  有効に使う方法を
  教えてくれるんだよね？
しげる（通常）：
  そうだよ！
  今回は AND 演算子 `&&` と
  OR 演算子 `||` を学ぼう！

## AND 演算子 `&&`

しげる（通常）：
  まずは AND 演算子 `&&` からだよ
  このように書くんだ

```bash
コマンド1 && コマンド2
```

しげる（通常）：
  これは
  「`コマンド1` が成功したら
  `コマンド2` を実行する」
  という意味になるよ
みどり（通常）：
  へー！
  `コマンド1` は
  まさに前回の
  `test` が使えるね！
しげる（通常）：
  そのとおり！
  `nproc` を使って
  数値の大小で処理を
  分けてみよう！

```bash
nproc
```

みどり（通常）：
  `nproc` は CPU のコア数を
  表示してくれるんだったよね！
みどり（通常）：
  実行結果は
  こうだったよ

```console
4
```

しげる（通常）：
  それでは AND 演算子を
  使った例を見てみよう

```bash
[ "$(nproc)" -ge 4 ] && echo "この Linux システムはすごい！ CPU のコアが $(nproc) 個もあるよ！"
```

みどり（通常）：
  ええっと…
  `$(nproc)` は
   CPU のコア数に
  置き換わるんだよね
  それが4以上だったら
  成功になるのかな？
しげる（通常）：
  そうそう
  その解釈で合っているよ
  それが成功を返したら
  次の `echo ...` が
  実行されるんだ
みどり（通常）：
  じゃあ実行してみるね！

```console
この Linux システムはすごい！ CPU のコアが 4 個もあるよ！
```

みどり（驚き）：
  おお！
  期待どおりに動いたね！
  しかもコマンド展開のおかげで
  コア数も自動で挿入されるんだね！
しげる（笑顔）：
  いい感じだね！

## OR 演算子 `||`

しげる（通常）：
  次は OR 演算子 `||` だね
  これはこのように書くよ

```bash
コマンド1 || コマンド2
```

しげる（通常）：
  これは
  「`コマンド1` が失敗したら
  `コマンド2` を実行する」
  という意味になるよ
みどり（通常）：
  AND 演算子 `&&` の逆だね！
しげる（通常）：
  早速 OR 演算子を
  試してみよう！

```bash
[ "$(nproc)" -ge 4 ] || echo "この Linux システムは頑張り屋！ $(nproc) 個のコアを上手く使い回しているよ！"
```

みどり（通常）：
  じゃあ実行するね！
みどり（驚き）：
  …あれ？
  今度は何も
  表示されないね？
しげる（通常）：
  `[ $(nproc) -ge 4 ]` が
  成功したからだね
しげる（通常）：
  この場合 `||` の
  後ろのコマンドは
  実行されないんだ

## AND 演算子と OR 演算子の組み合わせ

みどり（通常）：
  うーん…
  何も表示されないのは
  ちょっとさみしいな…
しげる（通常）：
  `&&` と `||` は
  組み合わせられるんだ
  以下のように書くよ！

```bash
コマンド1 && コマンド2 || コマンド3
```

しげる（通常）：
  このようにすると
  `コマンド1` が成功したら `コマンド2` を
  `コマンド1` が失敗したら `コマンド3` を
  実行してくれるんだ
みどり（通常）：
  `コマンド1` が
  成功でも失敗でも
  なんらかのコマンドが
  実行されるんだね
しげる（通常）：
  それでは CPU のコア数がどんな場合でも
  メッセージを表示するようにしてみよう！

```bash
[ "$(nproc)" -ge 8 ] \
  && echo "この Linux システムはすごい！ CPU のコアが $(nproc) 個もあるよ！" \
  || echo "この Linux システムは頑張り屋！ $(nproc) 個のコアを上手く使い回しているよ！"
```

しげる（通常）：
  今度は条件が失敗するように
  比較する数字を
  `4` から `8` に増やしたよ
みどり（通常）：
  長くなるから
  「バックスラッシュ(`\`)」で
  コマンドラインを複数行に分けて
  見やすくしているんだね！
しげる（通常）：
  そういうことだね
  では実行してみようか

```bash
この Linux システムは頑張り屋！4 個のコアを上手く使い回しているよ！
```

みどり（通常）：
  おお！
  今度は OR 演算子の方の
  メッセージが表示されたね！

## まとめ

みどり（通常）：
  今回は AND 演算子 `&&` と
  OR 演算子 `||` を学んだよ！
  これで条件によって
  処理を分けることができるんだ
みどり（通常）：
  また `&&` と `||` を組み合わせられよ
  最終的に必ずどちらかの
  処理が実行されるんだ！
しげる（通常）：
  これらを使えば状況によって
  処理を柔軟に分けることができるよ！

