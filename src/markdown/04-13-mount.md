chapter=4
story=13
title=マウント
keyword=super user
keyword=root
keyword=mount
keyword=unmount
keyword=lsusb
prev=4/12/
prev-title=nologin
next=4/14/
next-title=パーティション

# マウント

みどり（通常）：
  お兄ちゃん！
  USB メモリがあるんだけど
  Linux で読むには
  どうすればいいのかな？
しげる（通常）：
  それなら
  「マウント(mount)」を使おう！
  別のファイルシステムを
  現在のファイルシステムに
  くっつける仕組みだよ

## デバイスファイル

しげる（通常）：
  まずは USB メモリを挿す前後で
  Linux の認識がどう変わるか
  確認してみよう
しげる（通常）：
  `lsblk` は
  ブロックデバイス一覧を
  表示するよ！

```bash
lsblk [オプション]... [デバイスファイル]...
```

みどり（通常）：
  ブロックデバイス？
しげる（通常）：
  SSD や HDD のようなストレージデバイスのことだよ
  USB メモリもブロックデバイスの一種なんだ
しげる（通常）：
  引数なしで実行すると
  認識している全ての
  ブロックデバイスを
  表示しれくれるんだ
  実行して確認してみよう

```bash
lsblk
```

みどり（笑顔）：
  うん！

```console
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 953.9G  0 disk
├─sda1   8:1    0   512M  0 part /boot
└─sda2   8:2    0 953.4G  0 part /
```

みどり（通常）：
  こんな感じの
  表示だったよ？
しげる（通常）：
  このシステムには
  ストレージ `sda` があって
  `sda1` と `sda2` パーティションを
  持っていることを意味しているよ
  これらは `/dev` 配下で
  デバイスファイルと呼ばれる
  ファイルで表現されているんだ
しげる（通常）：
  今度は USB メモリを挿してから
  同じコマンドを実行してみよう

```bash
lsblk
```

みどり（通常）：
  実行するね！

```bash
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 953.9G  0 disk
├─sda1   8:1    0   512M  0 part /boot
└─sda2   8:2    0 953.4G  0 part /
sdb      8:16   0  28.9G  0 disk
└─sdb1   8:17   0  28.9G  0 part
```

みどり（通常）：
  USB メモリを挿したら
  表示が増えたね！
しげる（通常）：
  この場合 `sdb` が
  USB メモリを表していて
  その中のパーティションが
  `sdb1` となっているよ

## `mount` コマンド

しげる（通常）：
  次にマウントポイントを作成してみよう
  これはマウント先のディレクトリのことだよ
  `/mnt` が手動マウント用ディレクトリなので
  その下にディレクトリを作ろう！

```bash
sudo mkdir /mnt/usb
```

みどり（通常）：
  うん、作ったよ！
しげる（通常）：
  そうしたら `mount` で
  マウントしよう！
  以下のように指定するよ

```bash
sudo mount [オプション]... デバイスファイル マウントポイント
```

しげる（通常）：
  今回の場合は
  以下のように
  指定すればいいよ

```bash
sudo mount /dev/sdb1 /mnt/usb
```

みどり（通常）：
  何も表示されなかったけど
  正常に動作したときは
  いつもこんな感じだよね
しげる（通常）：
  そうしたら
  `/mnt/usb` 配下の
  中身を見てみよう

```bash
ls /mnt/usb
```

みどり（驚き）：
  あっ！
  USB メモリの内容が
  そのままここにある！
みどり（笑顔）：
  こうやって
  マウントポイントにマウントして
  USB メモリの内容を扱うんだね！

## `umount` コマンド

みどり（笑顔）：
  お兄ちゃんありがとう！
  USB メモリを使う作業が
  終わったよ！
しげる（通常）：
  使い終わったら
  「アンマウント(unmount)」という
  マウントを解除する操作を行おう
しげる（通常）：
  アンマウントは `umount` で
  以下のように行うよ

```bash
unmount デバイスファイル
unmount マウントポイント
```

みどり（通常）：
  デバイスファイル `/dev/sdb1` でも
  マウントポイント `/mnt/usb` でも
  どちらでもアンマウントしてくれるんだね！

```bash
sudo umount /mnt/usb
```

しげる（通常）：
  アンマウントが終わったら
  安全に USB メモリを取り外せるよ
  `/mnt` 配下に作った
  マウントポイントも
  削除しておこう

```bash
sudo rmdir /mnt/usb
```

みどり（通常）：
  後片付けも
  完了だよ！

## まとめ

みどり（通常）：
  今回はマウントとアンマウントを学んだよ！
  `mount`, `umount` でシステムに対して
  ストレージを付け外しできるんだ！
しげる（通常）：
  最近のディストリビューションでは
  自動マウントしてくれることも多く
  その場合 `/media` 配下にマウントしてくれるよ
  手動でのマウントの機会は少なくなったけど
  重要な操作なので覚えておくと
  いざという時に役に立つよ！

