chapter=6
story=2
title=アーキテクチャ
prev=6/1/
prev-title=リソース
next=6/3/
next-title=CPU

# アーキテクチャ

しげる（通常）：
  今回は CPU に大きく関わる
  「アーキテクチャ(archtecture)」を知ろう！
みどり（通常）：
  `arch` で
  出力される
  ものだよね

```bash
arch
```

みどり（通常）：
  実行結果は
  こうだったよ！

```console
x86_64
```

みどり（通常）：
  この出力にはどんな
  意味があるんだろう？

## 種類

しげる（通常）：
  「アーキテクチャ」は
  建築様式や構造という意味だよ
  CPU の設計や構造の
  呼び名と思ってもらえればいいよ
みどり（通常）：
  アーキテクチャの種類には
  どういうものがあるのかな？
しげる（通常）：
  代表的なアーキテクチャを
  紹介するね！

アーキテクチャ     | ビット数 | デザイン | 設計方針 | 主なメーカ | 主な用途
------------------ | -------- | -------- | -------- | ---------- | --------
`x86`              | 32 bit   | CISC     | 性能重視 | [Intel](https://www.intel.co.jp/content/www/jp/ja/homepage.html), [AMD](https://www.amd.com/ja.html) など | PC など
`x86_64`, `x64`    | 64 bit   | 同上     | 同上     | 同上       | 同上
`aarch`, `arm`     | 32 bit   | RISC     | 効率重視 | [Arm](https://www.arm.com/ja/) など | スマートフォン、省電力 PC、組み込みなど
`aarch64`, `arm64` | 64 bit   | 同上     | 同上     | 同上       | 同上

しげる（通常）：
  `x86_64` や `x86` は
  [Intel Core シリーズ](https://www.intel.co.jp/content/www/jp/ja/products/details/processors/core.html) や
  [AMD Ryzen シリーズ](https://www.amd.com/ja/products/processors/desktops/ryzen.html) など
  デスクトップやノート PC で
  使われているアーキテクチャだよ
みどり（通常）：
  ゲーミング PC を購入したとき
  Intel と AMD の
  どちらの CPU を選ぶか
  迷った記憶があるよ…
しげる（通常）：
  `aarch64` や `aarch` は
  多くのスマートフォンのほか
  第7章で紹介する [Raspberry Pi](https://www.raspberrypi.com/) や
  MacBook の [Apple シリコン](https://support.apple.com/ja-jp/116943) など
  性能よりも電力効率が求められる場面で
  選択されているアーキテクチャだよ
みどり（通常）：
  確かにスマートフォンで
  CPU が Intel とか AMD とか
  聞いたことが無いなぁ…
  性能より電力の長持ちを
  優先したアーキテクチャを
  採用しているからなんだね！
みどり（通常）：
  ところでビット数って何かな？
  現在は 64 bit が主流と聞くけど…
しげる（通常）：
  ビット数は CPU が処理をする
  信号の単位を表すよ
  ビット(bit) は 0 または 1 の
  二値で表現できる情報量の単位なんだ
しげる（通常）：
  例えばビット数が 32 bit なら
  二進数 32 桁をひとつの単位として
  信号を処理するんだ
みどり（通常）：
  ビット数が大きければ
  それだけ大きな単位の
  情報を扱えるんだね！
しげる（通常）：
  そうだね
  ビット数は CPU が扱える数値や
  データサイズの上限などに
  影響するよ
しげる（通常）：
  32 bit で表現できる
  容量の上限は 4GB だよ
  PC が扱うストレージやメモリの容量が
  4GB に到達しそうになった頃から
  32 bit から 64 bit へ移行が進み
  現在は 64 bit が
  主流になっているんだよ
みどり（通常）：
  CISC や RISC って？
しげる（通常）：
  CPU が処理できる命令を
  どのように持たせるかの
  方向性のことなんだ
しげる（通常）：
  「CISC(complex instruction set computer)」は
  CPU に多数の複雑な命令を持たせるんだ
  多くの処理が一つの命令でこなせて処理が効率的な反面
  命令ごとに処理が完了する長さが異なったりして
  命令を実行するタイミングの調整が複雑になるほか
  多数の命令をチップ上に盛り込むことで
  CPU の規模が大きくなり高価になる傾向があるよ
しげる（通常）：
  「RISC(reduced instruction set computer)」は
  逆に CPU に少数の単純な命令を持たせるんだ
  それらを組み合わせて複雑な命令を実現するよ
みどり（通常）：
  RISC は CISC とは逆で
  CPU の規模を小さく単純にでき
  価格や消費電力を抑えた
  CPU を作れるんだけど
  命令を何段階も組み合わせて
  複雑な処理を実現しているので
  処理効率は悪くなっちゃう
  傾向があるんだね
しげる（通常）：
  ただし CISC と RSIC の差は縮まっていて
  普段は意識しなくても問題ないよ
  CPU のよほど深くに立ち入らない限り
  CISC と RISC は概念だけ知っていれば十分だよ
みどり（通常）：
  アーキテクチャは
  Linux を利用する上で
  どんなところに
  影響してくるのかな？
しげる（通常）：
  大抵のバイナリ形式の実行ファイルは
  特定のアーキテクチャ向けに作られているんだ
  そのような実行ファイルは
  異なるアーキテクチャ上では動作しないよ
みどり（通常）：
  プログラムを正しく動かすには OS のほか
  アーキテクチャもチェックしないと
  いけないんだね！
しげる（通常）：
  パッケージ管理システムで
  パッケージの検索をすると
  見つかったパッケージの
  アーキテクチャも
  一緒に表示されているよ
  検索したときに確認してみよう

## まとめ

みどり（通常）：
  今回はアーキテクチャを学んだよ
  CPU 設計の呼び名なんだ！
しげる（通常）：
  他にもスーパーコンピュータ向けや
  マイコン向けのアーキテクチャなどがあるけど
  その分野を扱わない限りは
  覚えなくても問題ないよ
  まずは今回紹介した
  アーキテクチャを覚えておこう！

