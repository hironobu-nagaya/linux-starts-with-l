chapter=2
story=59
title=テキスト関連コマンド(その2)
keyword=cut
keyword=tr
keyword=wc
keyword=fold
prev=2/58/
prev-title=テキスト関連コマンド(その1)
next=2/60/
next-title=パス関連コマンド

# テキスト関連コマンド(その2)

みどり（通常）：
  お兄ちゃん！
  テキスト関連だけでも
  色々なコマンドがあるんだね！
  前回は `sort`, `uniq`, `tac`, `rev` を学んだよ！
しげる（通常）：
  他にもおさえたい
  テキスト関連コマンドがあるよ
  今回は前回に続いて
  そのようなコマンドを紹介するね

## `cut` コマンド

しげる（通常）：
  `cut` は
  文字列の一部分を切り出すよ

```bash
cut [オプション]... [ファイル]...
```

オプション                     | 役割
------------------------------ | ----
`-c 範囲`, `--characters=範囲` | 指定された範囲の文字を切り出す
`-f 範囲`, `--fields=範囲`     | 指定された範囲のフィールドを切り出す
`-d 文字`, `--delimiter=文字`  | フィールド区切り文字を指定（デフォルトはタブ文字）

しげる（通常）：
  こんな感じで使えるよ

コマンド                               | 出力     | 意味
-------------------------------------- | -------- | ----
`cut -c 2 <<< hello`                   | `e`      | 2文字目を切り出す
`cut -c 2,5 <<< hello`                 | `eo`     | 2文字目と5文字目を切り出す
`cut -c 2-4 <<< hello`                 | `ell`    | 2文字目から4文字目までを切り出す
`cut -d / -f 3 <<< /home/midori/diary` | `midori` | 区切り文字を `/` として3番目のフィールドを切り出す

みどり（通常）：
  あれ？
  `cut -d / -f 3 <<< /home/midori/diary` の
  3番目のフィールドって
  `diary` じゃないのかな？
  `home`, `midori`, `diary` で
  3番目だと思うよ？
しげる（通常）：
  これは `cut` を使うときに
  気をつけるべきことだね
  `cut` は文字列を
  「区切り文字」を目印にして
  前後に分割するんだ
しげる（通常）：
  なので1文字目の
  「スラッシュ(`/`)」の前の
  「空文字」が1番目の要素になって
  そこから `home`, `midori` ... と
  フィールドを数えていくので
  3番目の要素は `midori` となるんだ
みどり（驚き）：
  なるほど…！
  気をつけるね！

## `tr` コマンド

しげる（通常）：
  `tr` は
  文字列中の文字を
  置き換えたり
  取り除いたりするよ
  translate の略で
  「変換する」「転換する」
  という意味なんだ

```bash
tr [オプション] セット1 [セット2]
```

オプション                 | 役割
-------------------------- | ----
`-c`, `-C`, `--complement` | 「セット1」の代わりに「セット1以外」を使う
`-d`, `--delete`           | 「セット1」に指定された文字を削除する

しげる（通常）：
  「セット」がわかりづらいので
  例を見たほうがわかりやすいよ

コマンド               | 出力    | 意味
---------------------- | ------- | ----
`tr a-z A-Z <<< hello` | `HELLO` | 「英小文字(`a-z`)」を「英大文字(`A-Z`)」に変換する
`tr -d l <<< hello`    | `heo`   | 「文字 `l`」を削除する
`tr -cd l <<< hello`   | `ll`    | 「`l` 以外の文字」を削除する

みどり（通常）：
  慣れるのに時間が掛かりそうだけど
  かしこい処理をしてくれる
  コマンドなんだね！

## `wc` コマンド

しげる（通常）：
  `wc` は
  文字数などを数えてくれるよ
  word count の略なんだ
しげる（通常）：
  オプションの指定がなければ
  「行数・単語数・文字数」の
  3つを表示するんだ

```bash
wc [オプション]... [ファイル]...
```

オプション      | 役割
--------------- | ----
`-l`, `--lines` | 行数のみ表示する
`-w`, `--words` | 単語数のみ表示する
`-m`, `--chars` | 文字数のみ表示する

みどり（通常）：
  色々な使い道がありそうなコマンドだね！
  `test` の数値比較とも相性がよさそう！

## `fold` コマンド

しげる（通常）：
  `fold` は
  行を指定された文字数で改行するよ

```bash
fold [オプション]... [ファイル]...
```

オプション                    | 役割
----------------------------- | ----
`-w 文字数`, `--width=文字数` | 行を`文字数`で改行(デフォルトは`80`)

みどり（通常）：
  へぇ…
  でも指定の文字数で
  行を折り返すことは
  あまりないかも？
しげる（通常）：
  そうだね
  閲覧のために行を折り返すのではなく
  テキスト加工で使われることが多いんだ
みどり（通常）：
  例えばどんなのかな？
しげる（通常）：
  以下は英大文字小文字数字で構成された
  ランダムな16文字を取り出すよ

```bash
tr -cd a-zA-Z0-9 < /dev/random | fold -w 16 | head -n 1
```

みどり（通常）：
  `fold` で 16 文字で行を折り返し
  `head` で先頭の1行のみ表示することで
  16 文字だけ取り出しているんだね
みどり（驚き）：
  `tr` とか `/dev/random` とか
  色々な要素が組み合わさって
  今まで習ったことの
  集大成みたいだね！
  パスワード生成に使えそう！
しげる（通常）：
  `/dev/random` からの出力は
  「擬似乱数(pseudorandom numbers)」
  と呼ばれるもので
  本物の乱数ではないんだ
  計算から生成される
  「乱数っぽい数字」で
  たくさんの値を高速に生成できるけど
  生成される値が推測可能な場合があるんだ
みどり（驚き）：
  そうなんだ！
  パスワードに使うのは
  ちょっと心配だね…
しげる（通常）：
  セキュリティがからむ場合は
  `/dev/random` ではなく
  本物の乱数を返す
  `/dev/urandom` を使おう！

## まとめ

みどり（通常）：
  今回はテキストを処理するコマンド
  `cut`, `tr`, `wc`, `fold` を学んだよ！
しげる（通常）：
  これらもアイデア次第で色々活用できるよ
  面白い使い方を思いついたら兄にも教えてね！

