chapter=3
story=15
title=引数処理
keyword=shell script
keyword=positional parameters
keyword=shift
prev=3/14/
prev-title=ヌルコマンド
next=3/16/
next-title=オプション処理

# 引数処理

みどり（通常）：
  お兄ちゃん！
  コマンドは引数を
  受けられるよね？
  シェルスクリプトでも
  できないかな？
しげる（通常）：
  もちろんできるよ！
  は引数の扱いを
  学んでいこう！

## 引数を表す特殊変数

しげる（通常）：
  引数を扱うには
  「引数を表す特殊変数」を使うんだ
  以下のようなものがあるよ

変数         | 役割
------------ | ----
`$0`         | スクリプト名（コマンド名）
`$1` ～ `$9` | `n` 番目の引数
`$@`         | 引数全体（ダブルクォートで囲うと "$1" "$2" … と展開される）
`$*`         | 引数全体（ダブルクォートで囲うと "$1 $2 …" と展開される）
`$#`         | 引数の個数

しげる（通常）：
  特に `$1` ～ `$9` は
  「位置引数
  (positional parameters)」
  とも呼ばれるよ
  一緒に覚えておこう
みどり（通常）：
  実例が気になるなぁ
しげる（通常）：
  以下は
  シェルスクリプトを
  実行したときの
  コマンドラインの要素を
  全て表示してくれるよ

```bash
#!/bin/bash

echo "スクリプト名: $0"
echo "引数の個数: $#"

for ARG in "$@"
do
  echo "引数: $ARG"
done
```

みどり（通常）：
  これを実行すれば
  引数の扱いが
  わかりやすいね！

## `shift` コマンド

みどり（通常）：
  位置引数 `$1` ～ `$9` が
  引数の値になるんだよね
  引数が10個以上になったら
  どうなるのかな？
しげる（通常）：
  そのままだと
  10番目以降の引数は
  位置引数 `$1` ～ `$9` では扱えないよ
  そういう時は
  引数の位置をずらす
  `shift` を使うんだ

```bash
shift [N]
```
しげる（通常）：
  これは引数の値を
  `N` 個ずらしてくれるんだ
  `N` の指定がなければ `1` になるよ
  `1` ずらす場合は
  以下のようになるんだ

* `$2` の値が `$1` へ
* `$3` の値が `$2` へ
* …10番目以降も同様にずらされる

みどり（通常）：
  このように
  引数をずらして使えば
  10個目以降の引数を
  扱えるようになるんだね
しげる（通常）：
  以下はさっきの例を
  `shift` を使って
  書き直したものだよ

```bash
#!/bin/bash

echo "スクリプト名: $0"
echo "引数の個数: $#"

while [ "$#" -gt 0 ]
do
  echo "引数: $1"
  shift
done
```

みどり（驚き）：
  「先頭の引数 `$1` を表示」と
  `shift` で要素をずらすを繰り返して
  引数が無くなったら終了なんだね
  かしこい！
しげる（通常）：
  `shift` には一つ注意があるよ
  ずらすと先頭にあった要素の値は
  失われてしまうんだ
  必要なら `shift` 実行前に
  値を別の変数に
  保存しておくといいよ

## まとめ

みどり（通常）：
  今回はシェルスクリプトの
  引数の扱い方を学んだよ！
  引数を表す特殊変数と
  `shift` が使えるよ！
しげる（通常）：
  引数を処理できるようになると
  スクリプトの汎用性が
  ぐっと上がるよ！

