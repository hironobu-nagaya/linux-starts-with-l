chapter=5
story=15
title=ALSA
keyword=ALSA
keyword=alsamixer
keyword=alsactl
keyword=speaker-test
prev=5/14/
prev-title=tmuxコマンド
next=5/16/
next-title=サウンド再生

# ALSA

みどり（通常）：
  お兄ちゃん！
  Linux でサウンドファイルの
  再生ってできないのかな？
しげる（通常）：
  もちろんできるよ！
  今回は「ALSA
  (Advanced Linux Sound Architecture)」
  を説明するよ

## 基本

しげる（通常）：
  ALSA は
  Linux でサウンドを扱うための
  基本的な仕組みを提供している
  ソフトウェアだよ
みどり（通常）：
  へぇ…
  サウンド再生の基礎なんだね
  ALSA にはどんな設定を
  しないといけないのかな？

## `alsamixer` コマンド

しげる（通常）：
  `alsamixer` は
  ミキサー設定をするよ

```bash
alsamixer [オプション]...
```

みどり（通常）：
  料理じゃなくて音楽で使う
  ミキサーのことだよね
しげる（通常）：
  オプションは不要なので
  実行してみよう！

```bash
alsamixer
```

みどり（通常）：
  音量コントロールっぽい
  画面が出てきたよ！
しげる（通常）：
  まずはその中でも
  メインの音量を確認してみよう
  サウンドデバイスによって
  名称は異なるけど
  大抵は一番左側にある
  スライダーがメイン音量だよ
みどり（通常）：
  音量が 0 になっていて
  下に `MM` って
  表示されているね
しげる（通常）：
  `MM` は
  「ミュート(mute)」状態を
  表しているよ
  この場合 M キーを押して
  ミュートを解除しよう
  解除されると表示が
  `OO` に変わるはずだよ
みどり（通常）：
  よし！
  これでミュートの
  解除ができたよ！
  次は音量をあげてみるね
しげる（通常）：
  音量は
  「↑キー」で上げて
  「↓キー」で下げるよ
  適切な音量に設定できたら
  「ESC キー」で終了しよう
みどり（通常）：
  GUI アプリみたいな操作感で
  分かりやすかったよ！

## `alsactl` コマンド

しげる（通常）：
  `alsamixer` の設定は
  デフォルトでは一時的なものなんだ
  Linux を再起動すると
  元に戻ってしまうことがあるんだ
みどり（通常）：
  毎回設定し直すのは
  面倒だね…
しげる（通常）：
  `alsactl` は
  ALSA 管理ツールだよ

```bash
alsactl [オプション]... 操作
```

しげる（通常）：
  `alsactl` で
  `alsamixer` 設定の
  保存や復元ができるんだ

コマンド          | 役割
----------------- | ----
`alsactl store`   | `alsamixer` 設定を保存
`alsactl restore` | 保存した `alsamixer` 設定を復元

みどり（通常）：
  なるほど！
  シャットダウン直前に `alsactl store`
  起動直後に `alsactl restore`
  をすればいいんだね！
しげる（通常）：
  そのとおり！
  最近のディストリビューションでは
  自動的に設定を保存・復元してくれる場合が多いよ
  一度再起動して設定が保持されているか
  確認してみよう
みどり（通常）：
  私の環境では再起動後も
  設定が保持されていたよ
  親切設計だね！
みどり（通常）：
  でも `alsactl` を
  覚えておくのは大事だね

## `speaker-test` コマンド

しげる（通常）：
  `speaker-test` は
  スピーカー動作確認のための
  サウンドを鳴らすよ

```bash
speaker-test [オプション]...
```

しげる（通常）：
  `speaker-test` は
  ホワイトノイズを再生し続けるよ
  スピーカーが動作していれば
  この音が聞こえるはずだよ
  オプションなしで実行してみよう！

```bash
speaker-test
```

みどり（通常）：
  「ザー」ってノイズが聞こえる…
  これはスピーカーがちゃんと
  動作しているってことだよね！
しげる（通常）：
  そうみたいだね！
  `speaker-test` は
  ずっと動き続けるよ
  確認が終わったら
  Ctrl + C で終了しよう

## まとめ

みどり（通常）：
  今回は ALSA とその設定を行ったよ！
  これでサウンド再生の
  準備は整ったのかな？
しげる（通常）：
  そうだね！
  次はいよいよ
  サウンドファイルの
  再生に挑戦しよう！

