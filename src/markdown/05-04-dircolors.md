chapter=5
story=4
title=dircolorsコマンド
keyword=dircolors
keyword=ANSI escape sequences
prev=5/3/
prev-title=ロケール
next=5/5/
next-title=SSH

# `dircolors` コマンド

みどり（通常）：
  お兄ちゃん！
  `ls` で表示される
  ファイル名などには
  色々な色が付いているよね
  あれって変えられるのかな？
しげる（通常）：
  変えられるよ！
  今回は `dircolors` を扱おう！

## 基本

しげる（通常）：
  `dircolors` は
  `LS_COLORS` 環境変数を
  管理するよ

```bash
dircolors [オプション]... [ファイル]
```

オプション               | 役割
------------------------ | ----
`-p`, `--print-database` | デフォルト設定を表示

みどり（通常）：
  `LS_COLORS` 環境変数は
  `ls` の出力の色に
  関係あるのかな？
しげる（通常）：
  そのとおり！

## 設定ファイル作成

しげる（通常）：
  `dircolors` の
  `-p` オプションを指定すると
  設定ファイルの雛形を
  出力してくれるよ
  実行して内容を
  見てみよう！

```bash
dircolors -p
```

みどり（通常）：
  どれどれ？

```console
...
.oga 00;36
.opus 00;36
.spx 00;36
.xspf 00;36
```

みどり（通常）：
  各行の属性や拡張子などで
  色を指定しているんだね
しげる（通常）：
  この数字は
  「ANSI エスケープシーケンス」
  の数値だよ
みどり（通常）：
  それなら
  以前教えてもらったことを
  参考にカスタマイズできるよ！
しげる（通常）：
  この設定を
  `~/.dircolors` ファイルに
  書き出そう！

```bash
dircolors -p > ~/.dircolors
```

みどり（通常）：
  うん！
  書き出したよ！
しげる（通常）：
  あとはこのファイルの内容を
  自分の好きなようにすれば
  設定は完了だよ

```bash
vim ~/.dircolors
```

## 設定ファイル読み込み

みどり（通常）：
  書いた設定を反映するには
  どうすればいいのかな？
しげる（通常）：
  まずは挙動を理解するために
  `dircolors` の引数に
  `~/.dircolors` ファイルを
  指定してみよう！

```bash
dircolors ~/.dircolors
```

みどり（通常）：
  どれどれ？

```console
LS_COLORS='...';
export LS_COLORS
```

みどり（通常）：
  これで出力されるのは
  コマンドなんだね！
しげる（通常）：
  そうなんだ
  だから `dircolors` を
  コマンド展開 `$( ... )` した内容を
  `eval` で評価すると
  設定が反映されるよ

```bash
eval $(dircolors ~/.dircolors)
```

みどり（通常）：
  これを `~/.bash_profile` に書けば
  オリジナルの設定が
  反映されるんだ！

## まとめ

みどり（通常）：
  今回は `dircolors` を学んだよ！
  `ls` の出力のカラー表示を
  設定できるんだ！
しげる（通常）：
  デフォルトでも
  見やすいようになっているけど
  気になる表示色は
  自分の好みに設定しよう！

