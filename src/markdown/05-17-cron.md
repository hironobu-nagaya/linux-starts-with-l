chapter=5
story=17
title=cron
keyword=cron
keyword=crontab
prev=5/16/
prev-title=サウンド再生
next=5/18/
next-title=動画再生

# cron

みどり（通常）：
  お兄ちゃん！
  毎朝 Linux マシンから
  音楽が流れているんだよ！
  目覚まし時計にしているのかな？
  それってどうやるのかな？
しげる（通常）：
  「クロン(cron)」という
  定期的なタスク実行の
  仕組みを使っているよ
  今回は `cron` について
  学んでいこう！

## `crontab` コマンド

しげる（通常）：
  `crontab` は
  `cron` 設定を行うよ

```bash
crontab [オプション]...
```

オプション | 役割
---------- | ----
-e         | 設定を編集
-l         | 設定を表示

しげる（通常）：
  みどり自身の
  `cron` 設定を
  作ってみよう！

```bash
crontab -e
```

みどり（通常）：
  エディタが開かれたよ！
  これを編集すればいいんだね
しげる（通常）：
  `cron` 書式は
  以下のとおりだよ

```cron
分 時 日 月 曜日 コマンド
```

しげる（通常）：
  数値の代わりに `*` を書けるよ
  こうすると「毎」を表すんだ
みどり（通常）：
  「毎日」とか
  「毎月」のように
  指定できるんだね！
しげる（通常）：
  また `*/2` のように表現することで
  「2回に1回」を表現できるんだ
みどり（通常）：
  「隔月」とかを
  指定できるんだ！
しげる（通常）：
  毎朝音楽を流している設定は
  以下のようにしているよ

```cron
30 6 * * * mpg123 --no-control /home/shigeru/music/ohayo.mp3
```

みどり（通常）：
  30分、6時、`mgp123`…
  毎日6時30分に `mpg123` で
  MP3 ファイルを再生しているんだね！
しげる（通常）：
  そういうことだね！
みどり（通常）：
  曜日の指定が
  ちょっとわからないな…
しげる（通常）：
  0 ～ 7 の数値で表されて
  0 と 7 は日曜日を表すよ
  また3文字英字の表現も使えるんだ
  まとめると以下のようになるよ

曜日   | 数値     | 3文字英字
------ | -------- | ---------
日曜日 | `0`, `7` | `sun`
月曜日 | `1`      | `mon`
火曜日 | `2`      | `tue`
水曜日 | `3`      | `wed`
木曜日 | `4`      | `thu`
金曜日 | `5`      | `fri`
土曜日 | `6`      | `sat`

しげる（通常）：
  また `mon-fri` で
  「月曜日から金曜日まで」としたり
  `mon,wed,fri` で
  「月、水、金曜日」を表現できるんだ
みどり（通常）：
  色々な指定ができるんだね
  情報が多くて混乱してきたよ
しげる（通常）：
  いくつか例を挙げてみよう

cron 設定                   | 意味
--------------------------- | -----
`0 12 * * * コマンド`       | 毎日正午にコマンドを実行
`0 1 1 * * コマンド`        | 月初め 1:00 にコマンドを実行
`0 0 * * 0 コマンド`        | 毎週日曜日 00:00 にコマンドを実行
`0 10 * * mon-fri コマンド` | 平日 10:00 にコマンドを実行
`50 23 15 */3 * コマンド`   | 3ヶ月ごとの15日 23:50 にコマンドを実行

みどり（通常）：
  例を真似して覚えるよ！

## まとめ

みどり（通常）：
  今回は `cron` について学んだよ！
  コマンド定期実行の仕組みで
  `crontab` から設定できるんだ！
しげる（通常）：
  定期的に実行している
  コマンドがあれば
  cron に任せてみよう！
  手間も省けるし
  実行し忘れもないよ！

