chapter=4
story=6
title=パッケージ管理
keyword=super user
keyword=root
keyword=package management system
keyword=apt
keyword=dnf
prev=4/5/
prev-title=電源管理
next=4/7/
next-title=ユーザ管理

# パッケージ管理

みどり（通常）：
  お兄ちゃん！
  管理者の仕事って
  他に何があるかな？
しげる（通常）：
  今回は
  「パッケージ管理」を
  やってみよう！

## パッケージ

しげる（通常）：
  「パッケージ(package)」は
  特定の目的で集められた
  プログラムやライブラリの集まりだよ
  インストールされたパッケージは
  普通は誰でも使うことができるんだ
  このパッケージを管理するのも
  管理者の仕事なんだ
みどり（通常）：
  コマンドやライブラリを個々に
  インストールするのではなくて
  目的ごとにまとまった
  パッケージという単位で
  インストールしたりするんだね！

## パッケージ管理システム

みどり（通常）：
  そのパッケージは
  どうやって管理するのかな？
しげる（通常）：
  「パッケージ管理システム
  (package management system)」
  と呼ばれるプログラムを使うよ
しげる（通常）：
  これはディストリビューションによって異なるので
  自分の使っているディストリビューションを確認しよう
  代表的な2つのパッケージ管理システムを紹介するよ

パッケージ管理システム | 採用しているディストリビューション
---------------------- | ----------------------------------
`apt`                  | Debian 系([Debian](https://www.debian.or.jp/), [Ubuntu](https://www.ubuntulinux.jp) など)
`dnf` (以前は `yum`)   | Red Hat 系([CentOS](https://www.centos.org), [Fedora](https://fedoraproject.org/ja/) など)

しげる（通常）：
  パッケージ管理システムは
  多機能で操作が難しい傾向があるんだ
  なので「サブコマンド」という方式で
  操作の分野を分けているよ
みどり（通常）：
  それはどうやって
  指定するものなのかな？
しげる（通常）：
  コマンドの後にキーワードを指定して
  これを一つのコマンドのように扱うんだ
  例えば、検索なら `apt search ...`
  インストールなら `apt install ...`
  のように指定して
  その後にその分野のオプションや
  引数を対象するものなんだ
みどり（笑顔）：
  へぇ！
  それは優しい
  指定方式だね！
しげる（通常）：
  パッケージ管理システム以外でも
  多機能なコマンドは
  サブコマンドを
  採用している場合があるよ
  これまで説明してきたものだと
  `ip` などがそうなんだ
  こういう指定の仕方が
  あるということも
  覚えておこう！

## リポジトリ更新

しげる（通常）：
  最初に
  「リポジトリ(repository)」
  を更新しよう！
  これはどんなパッケージが
  利用可能かなどの
  情報が載っているものなんだ

```bash
sudo apt update
```

```bash
sudo dnf update
```

## パッケージ更新

しげる（通常）：
  取得したリポジトリに基づいて
  パッケージを更新しよう
  これは以下のようにするよ

```bash
sudo apt upgrade
```

```bash
sudo dnf upgrade
```

しげる（通常）：
  更新があれば
  「更新してもよいか？」
  と確認されるよ
  `-y` オプションを指定すれば
  自動で yes と答えてくれるんだ
  サブコマンドなので
  以下のように指定するよ

```bash
sudo apt upgrade -y
```

```bash
sudo dnf upgrade -y
```

## パッケージ検索

しげる（通常）：
  次に目的のパッケージが
  あるかどうかを
  検索する方法だよ
  以下のように指定するんだ

```bash
apt search キーワード...
```

```bash
dnf search キーワード...
```

みどり（通常）：
  `sudo` は
  いらないんだ？
しげる（通常）：
  そうだね
  検索では他ユーザに
  影響を与える変更は
  起こらないから
  `sudo` は不要なんだ

## パッケージインストール

しげる（通常）：
  目的のパッケージを見つけたら
  名前を指定してインストールしよう
  ここでも `-y` オプションが使えるよ

```bash
sudo apt install パッケージ...
```

```bash
sudo dnf install パッケージ...
```

## まとめ

みどり（通常）：
  今回はパッケージ管理システムを学んだよ！
  大きく分けて `apt` と `dnf` があるけど
  基本の操作は同じなんだね！
しげる（通常）：
  細かな操作は違ってくるけど
  基本は同じと考えてもらって大丈夫だよ！
  次回以降パッケージのインストールを
  `apt` で説明していくので
  もし `dnf` を使っていたら読み替えてね！
しげる（通常）：
  Linux ディストリビューションの
  パッケージ管理システムは
  `apt` や `dnf` の場合が多いけど
  独自のパッケージ管理システムを使っていたり
  パッケージ管理システムを採用していないのもあるよ

パッケージ管理システム | 採用しているディストリビューション
---------------------- | ----------------------------------
`zypper`               | [openSUSE](https://www.opensuse.org/ja/)
`pacman`               | [Arch Linux](https://archlinux.org/)

しげる（笑顔）：
  詳しくは自分の使っている
  ディストリビューションを
  調べてみてね
