chapter=5
story=21
title=メッセージ(実践)
keyword=write
keyword=wall
keyword=talk
prev=5/20/
prev-title=メッセージ(準備)
next=5/22/
next-title=アーカイブ

# メッセージ(実践)

みどり（通常）：
  前回は他のユーザと
  メッセージをやり取りする
  準備をしたね！
しげる（通常）：
  今回は実際に
  メッセージを
  送ってみよう！

## `write` コマンド

しげる（通常）：
  `write` は
  相手にメッセージを送るよ
  一方通行の通信だけど
  相手も `write` を実行すれば
  双方向の会話になるんだ

```bash
write ユーザ名 [端末名]
```

みどり（通常）：
  へぇ…
  早速やってみようよ！

```bash
write shigeru
```

しげる（通常）：
  よし
  了解だよ！

```bash
write midori
```

しげる（通常）：
  1行入力して Enter を押すと
  その内容が相手の端末に
  表示されるんだ
みどり（通常）：
  そうなんだ！
  さっそくいくつか
  メッセージを送ってみるね
しげる（通常）：
  ちゃんとこちらの端末に
  メッセージが表示されているよ
  ではこちらからも返事を出すね
みどり（通常）：
  おお！
  ちゃんとチャットになってる！
みどり（通常）：
  終了はどうしたら
  いいのかな？
しげる（通常）：
  終了するには
  Ctrl + C で割り込みをするか
  Ctrl + D で入力終了とすればいいんだ
  こちらの `write` を終了するね
みどり（通常）：
  あっ…
  `EOF` って表示されたよ
  これで会話終了なんだね
みどり（通常）：
  それじゃ
  私も Ctrl + D っと！

## `wall` コマンド

しげる（通常）：
  `write` を扱ったので
  `wall` も説明するね
みどり（通常）：
  「壁(wall)」？
しげる（通常）：
  `wall` は
  write all の略なんだ
  ややこしいよね
しげる（通常）：
  `wall` は
  全ログインユーザに
  メッセージを送るよ

```bash
wall [オプション]... [メッセージ|ファイル]
```

みどり（通常）：
  チャット用というより
  全体周知用かな？
しげる（通常）：
  そうだね
  例えば `shutdown` のメッセージは
  `wall` 経由なんだ

## `talk` コマンド

しげる（通常）：
  `talk` はチャットツールだよ
  自分と相手で画面を二分割して
  リアルタイムのチャットができるんだ

```bash
talk ユーザ名 [端末名]
```

みどり（通常）：
  へぇ！
  `write` より
  チャット向けだね！
しげる（通常）：
  `talk` には
  通話を仲介するプログラム
  `talkd` が必要なんだ
  最近は使われなくなっている機能なので
  インストールされていない場合が多いよ
  使ってみたければ
  インストールしてみよう！
しげる（通常）：
  `talk` は `write` と
  同じように実行するよ
みどり（通常）：
  これもやってみようよ！

```bash
talk shigeru
```

しげる（通常）：
  受信側の僕も同じように
  `talk` を実行すれば
  通話が開始されるよ

```bash
talk midori
```

みどり（通常）：
  画面が二分割されて
  自分の入力エリアと
  お兄ちゃんの表示エリアに
  分かれているんだね
しげる（通常）：
  基本的な使い方は
  `write` と同じだけど
  いくつかの追加操作があるんだ

入力     | 動作
-------- | ----
ESC + P  | 自分のウィンドウを上へスクロール
ESC + N  | 自分のウィンドウを下へスクロール
Ctrl + P | 相手のウィンドウを上へスクロール
Ctrl + N | 相手のウィンドウを下へスクロール
Ctrl + L | 画面再描画

みどり（通常）：
  スクロール機能は便利だね！
  長話になる時は便利そう
しげる（通常）：
  `talk` の開始は
  相手が待機している必要があるんだ
  事前に相手に `talk` の約束などを
  しておくといいよ

## まとめ

みどり（通常）：
  今回は `write` と `talk` で
  他ユーザへのメッセージ送信を学んだよ！
  チャット用ではないけど `wall` で
  ログインユーザ全員に周知もできるんだ
しげる（通常）：
  `write` や `wall` は
  スーパーユーザからの
  メッセージで使われることがあるよ
  あまり使わなくなってはいるけど
  Linux の歴史やシステムの仕組みを学ぶ
  良いきっかけになると思うよ

