chapter=2
story=20
title=ファイル編集
keyword=vi
keyword=vim
keyword=view
keyword=vimtutor
prev=2/19/
prev-title=端末操作
next=2/21/
next-title=コマンドライン
javascripts=edit-content.js

# ファイル編集

みどり（通常）：
  お兄ちゃん！
  ファイルの中身を見れるなら
  編集もできるんだよね？
  次は編集をやってみたい！
しげる（通常）：
  では今回は
  ファイル編集を
  学んでいこう！

## `vi`, `vim` コマンド

しげる（通常）：
  Linux で使えるエディタは
  たくさんあるけど
  最初は `vi` を覚えよう！
  vidual editor の略だよ
みどり（通常）：
  エディタがいっぱいある中で
  どうして `vi` なのかな？
しげる（通常）：
  `vi` は Linux 環境の
  標準的なエディタなんだ
  どんな最低限の環境でも
  `vi` は使えると考えてもいいよ
みどり（通常）：
  へぇー！
  それなら `vi` に
  チャレンジしてみる！
しげる（通常）：
  `vi` の改良版に
  `vim` があるんだ
  vi improved の略なんだよ
  基本操作は変わらないけど
  細かな点で使いやすくなるよう
  配慮されているんだ
  利用可能なら `vim` を使おう！
みどり（通常）：
  わかった！
  `vi` の代わりに
  `vim` を使うね！
しげる（通常）：
  今回は `diary` ファイルを
  編集してみよう

```bash
vim diary
```

みどり（驚き）：
  わっ！
  画面が変わった！
  なんだか編集できそうな見た目だね
しげる（通常）：
  `vi` には「モード(mode)」という概念があるんだ
  今は「標準モード」という状態なんだよ
  このモードではキーボードの入力は
  そのまま文字として表示されないよ
みどり（通常）：
  えっ？
  キーを押しても
  文字が出ないの？
  どうやって文字を
  入力するのかな？
しげる（通常）：
  それには
  「挿入(insert)モード」に
  切り替えるんだ
  「`i` キー」を押してごらん
  これで「挿入モード」になって
  文字が入力できるんだ
みどり（笑顔）：
  なるほど！
  「`i` キー」を押してから
  文字を打ち込むね！

```plaintext
!start-class-today!○月×日!end! 今回は vim でファイル編集！!cursor!
```

みどり（通常）：
  こんな感じでどうかな？
しげる（笑顔）：
  うん、いいね！
しげる（通常）：
  入力が終わったら「ESC キー」を押して
  「標準モード」に戻ろう
  どのモードでも「ESCキー」を押せば
  「標準モード」に戻れると覚えよう！
しげる（通常）：
  「標準モード」に戻ったら
  「大文字の`Z`」を2回入力しよう
  これで保存して終了だよ！
みどり（通常）：
  できた！
  いつものシェル画面に戻ったよ！
みどり（通常）：
  編集できたか確認してみるね！

```bash
cat diary
```

みどり（通常）：
  どきどき…

```console
!start-class-today!○月×日!end! 今回は vim でファイル編集！
```

みどり（笑顔）：
  ちゃんと編集内容が
  保存されているね！

## `view` コマンド

しげる（通常）：
  `vi` を読み込み専用で開く
  `view` があるんだ
  変更の心配が少ないので
  閲覧目的で使われるよ
みどり（通常）：
  見るだけの `vi` である `view` …
  名前をつけた人はユーモアがあるね！

## `vimtutor` コマンド

みどり（通常）：
  `vi` の操作ってなんだか特殊だね
  モードの種類やどのキーを押すかとか…
  全部お兄ちゃんに頼らないと
  進めない気がするよ…
しげる（通常）：
  それなら `vimtutor` を使うといいよ
  これは `vim` に付属している
  チュートリアルツールなんだ
  これに沿って操作すれば
  基本的な使い方が身に付くよ！
しげる（通常）：
  日本語チュートリアルを
  起動するには以下を実行しよう！

```bash
vimtutor ja
```

みどり（笑顔）：
  チュートリアルがあるのはありがたいね！
  これで一人でも練習して学べるよ！

## まとめ

みどり（通常）：
  今回は編集関連コマンドを学んだよ！
  `vim` が使えるのなら
  `vi` の代わりに使うと良く
  操作には慣れが必要だけど
  `vimtutor` で練習できるよ！
みどり（驚き）：
  えっと `vimtutor` では…
  「下にスクロールするのは `j`」
  って書いてある！
みどり（通常）：
  これって `less` の操作と同じだよね？
しげる（通常）：
  `less` の操作は `vi` に影響を受けているよ
  そのようなコマンドはたくさんあるんだ
  だから `vi` を覚えることは
  Linux を使いこなす上で役に立つよ
みどり（笑顔）：
  なるほど！
  `vi` の操作は特殊な感じがするけど
  他のコマンドも `vi` のような
  操作になっていることが多いんだね
  じゃあ `vimtutor` を使って
  もっと練習してみる！
しげる（通常）：
  端末で使えるエディタは他にもあるけど
  `vi` は基礎として最低限の操作は
  できるようにしておこう！

エディタ | 説明
-------- | ----
`emacs`  | `vi` と人気を二分する高性能エディタ
`nano`   | 簡単に使える

