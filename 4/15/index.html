<html lang="ja">
<head>
<title>Lから始まるLinux - 4章15話 fdiskコマンド</title>
<base href="../..">
<meta charset="utf-8">
<meta name="author" content="Hironobu Nagaya">
<meta name="robots" content="all">
<meta name="keywords" content="Lから始まるLinux,Linux starts with L,linux,super user,root,fdisk,partition">
<meta name="description" content="兄妹の対話を通してLinuxへの理解を深めていくお話です">
<meta name="viewport" content="width=device-width, initial-scale=0.5" />
<meta name="format-detection" content="telephone=no, email=no, address=no" />
<link rel="prev" href="4/14/" />
<link rel="next" href="4/16/" />
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="css/normalize.css" type="text/css">
<link rel="stylesheet" href="css/common.css" type="text/css">
<link rel="stylesheet" href="css/story.css" type="text/css">
</head>
<body>
<header>
<h1>Lから始まるLinux</h1>
<div class="relation">
<div>
<div>前</div>
<div>4章14話</div>
<div><a href="4/14/">パーティション</a></div>
</div>
<div>
<div>今</div>
<div>4章15話 fdiskコマンド</div>
<div><a href=".">もくじ</a></div>
</div>
<div>
<div>次</div>
<div>4章16話</div>
<div><a href="4/16/">ファイルシステム</a></div>
</div>
</div>
</header>
<main>
<section>
<article class="header1"><code>fdisk</code><span> コマンド</span></article>
<article class="talk">
<div><img src="img/midori.svg" alt="若木 みどり" /></div>
<div>
<span><span>前回はパーティションについて学んだね！</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>今回はパーティションを</span></span>
<span><span>実際に操作してみよう！</span></span>
</div>
</article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><span>ストレージのパーティションを変更すると</span></span>
<span><span>そのパーティション上にあったデータは</span></span>
<span><span>使えなくなってしまうよ</span></span>
<span><span>今回の操作はそのことに注意してね</span></span>
</div>
</article>
<article class="header2"><span>使い方</span></article>
<article class="talk">
<div><img src="img/shigeru.svg" alt="若木 しげる" /></div>
<div>
<span><code>fdisk</code><span> は</span></span>
<span><span>パーティションを管理するよ</span></span>
</div>
</article>
<article class="code"><pre><code class="bash">fdisk <wbr>[オプション]... <wbr>デバイス
</code></pre></article><article class="header2"><span>実践</span></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>まずはブロックデバイス一覧を確認しよう！</span></span></div></article><article class="code"><pre><code class="bash">lsblk
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="console">NAME   <wbr>MAJ:MIN <wbr>RM   <wbr>SIZE <wbr>RO <wbr>TYPE <wbr>MOUNTPOINT
sda      <wbr>8:0    <wbr>0 <wbr>953.9G  <wbr>0 <wbr>disk
├─sda1   <wbr>8:1    <wbr>0   <wbr>512M  <wbr>0 <wbr>part <wbr>/boot
└─sda2   <wbr>8:2    <wbr>0 <wbr>953.4G  <wbr>0 <wbr>part <wbr>/
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>/dev/sda</code><span> がシステムのストレージで</span></span><span><code>/dev/sda1</code><span> と </span><code>/dev/sda2</code><span> が</span></span><span><span>そのパーティションだよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>未フォーマットの USB メモリを用意したよ！</span></span><span><span>この USB メモリを Linux マシンに差してから</span></span><span><span>もう一度 </span><code>lsblk</code><span> を実行してみよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>やってみるね！</span></span></div></article><article class="code"><pre><code class="console">NAME   <wbr>MAJ:MIN <wbr>RM   <wbr>SIZE <wbr>RO <wbr>TYPE <wbr>MOUNTPOINT
sda      <wbr>8:0    <wbr>0 <wbr>953.9G  <wbr>0 <wbr>disk
├─sda1   <wbr>8:1    <wbr>0   <wbr>512M  <wbr>0 <wbr>part <wbr>/boot
└─sda2   <wbr>8:2    <wbr>0 <wbr>953.4G  <wbr>0 <wbr>part <wbr>/
sdb      <wbr>8:16   <wbr>0  <wbr>28.9G  <wbr>0 <wbr>disk
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>sdb</code><span> が追加されたね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>/dev/sdb</code><span> が USB メモリを指すデバイスだよ</span></span><span><span>最初にここにパーティションを作成しよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>Windows や macOS でも</span></span><span><span>使えるようにしたいなぁ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>それなら MBR で1つだけの</span></span><span><span>パーティションを作成しよう！</span></span><span><span>この場合 </span><code>fdisk</code><span> は</span></span><span><span>以下のように実行するよ</span></span></div></article><article class="code"><pre><code class="bash">sudo <wbr>fdisk <wbr>/dev/sdb
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ここから</span></span><span><span>パーティションを</span></span><span><span>操作するんだね！</span></span></div></article><article class="code"><pre><code class="console">
Welcome <wbr>to <wbr>fdisk <wbr>(util-linux <wbr>2.37.4).
Changes <wbr>will <wbr>remain <wbr>in <wbr>memory <wbr>only, <wbr>until <wbr>you <wbr>decide <wbr>to <wbr>write <wbr>them.
Be <wbr>careful <wbr>before <wbr>using <wbr>the <wbr>write <wbr>command.


Command <wbr>(m <wbr>for <wbr>help): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>入力を求められているね</span></span><span><code>fdisk</code><span> は対話的な</span></span><span><span>コマンドなんだ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>対話的な操作では</span></span><span><span>以下のようなコマンドを</span></span><span><span>入力して操作するよ</span></span></div></article><article class="table"><table><thead><tr><th><span>コマンド</span></th><th><span>役割</span></th></tr></thead><tbody><tr><td><code>m</code></td><td><span>ヘルプを表示</span></td></tr><tr><td><code>p</code></td><td><span>現在のパーティション構成を表示</span></td></tr><tr><td><code>l</code></td><td><span>パーティション種別を表示</span></td></tr><tr><td><code>o</code></td><td><span>MBR パーティションテーブル新規作成</span></td></tr><tr><td><code>g</code></td><td><span>GPT パーティションテーブル新規作成</span></td></tr><tr><td><code>n</code></td><td><span>パーティション作成</span></td></tr><tr><td><code>d</code></td><td><span>パーティション削除</span></td></tr><tr><td><code>w</code></td><td><span>現在のパーティション構成を書き込む</span></td></tr><tr><td><code>q</code></td><td><span>現在のパーティション構成を破棄して終了</span></td></tr></tbody></table></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>MBR でパーティションを作成するので</span></span><span><span>まずは </span><code>o</code><span> を指定しよう！</span></span></div></article><article class="code"><pre><code class="fdisk">Command <wbr>(m <wbr>for <wbr>help): <wbr>o
Created <wbr>a <wbr>new <wbr>DOS <wbr>(MBR) <wbr>disklabel <wbr>with <wbr>disk <wbr>identifier <wbr>0xf9885ead.
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>これでこの USB メモリの</span></span><span><span>パーティションは</span></span><span><span>MBR で作られるんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>次に </span><code>n</code><span> で</span></span><span><span>新しいパーティションを</span></span><span><span>作成しよう！</span></span></div></article><article class="code"><pre><code class="fdisk">Command <wbr>(m <wbr>for <wbr>help): <wbr>n
Partition <wbr>type
   <wbr>p   <wbr>primary <wbr>(0 <wbr>primary, <wbr>0 <wbr>extended, <wbr>4 <wbr>free)
   <wbr>e   <wbr>extended <wbr>(container <wbr>for <wbr>logical <wbr>partitions)
Select <wbr>(default <wbr>p): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「パーティションの種類は？」<wbr></span></span><span><span>って聞かれたよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>MBR で作れる</span></span><span><span>基本的な4つの</span></span><span><span>パーティションが</span></span><span><code>primary</code><span> だよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>extended</code><span> で5番目以降の</span></span><span><span>パーティションを作る</span></span><span><span>仕組みがあるんだけど</span></span><span><span>今回はパーティションを</span></span><span><span>1つしか作らないので</span></span><span><code>primary</code><span> を選ぼう</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>default p</code><span> となっているので</span></span><span><span>Enter だけ押せば</span></span><span><code>primary</code><span> となるよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>じゃあデフォルト設定で進めるね！</span></span></div></article><article class="code"><pre><code class="fdisk">Using <wbr>default <wbr>response <wbr>p.
</code></pre></article><article class="code"><pre><code class="fdisk">Partition <wbr>number <wbr>(1-4, <wbr>default <wbr>1): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今度は</span></span><span><span><wbr>「パーティション番号は？」<wbr></span></span><span><span>と聞かれたね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>通常パーティション番号は</span></span><span><span>先頭から順番に使うよ</span></span><span><span>なのでここでは</span></span><span><code>1</code><span> を指定しよう</span></span><span><code>default 1</code><span> とあるので</span></span><span><span>Enter だけ押せば</span></span><span><code>1</code><span> になるよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="fdisk">First <wbr>sector <wbr>(2048-60620799, <wbr>default <wbr>2048): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「最初のセクターは？」<wbr></span></span><span><span>と聞かれたよ？</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>セクターは</span></span><span><span><wbr>「利用可能なストレージ領域」<wbr></span></span><span><span>だと思ってもらえれば大丈夫だよ</span></span><span><code>2048</code><span> から </span><code>60620799</code><span> まで</span></span><span><span>選択可能と言われていて</span></span><span><span>今回作成するパーティションは</span></span><span><span>どこから使い始めるのかを</span></span><span><span>指定するんだ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>default 2048</code><span> と</span></span><span><span>一番最初の領域が</span></span><span><span>デフォルトになっているね</span></span><span><span>じゃあこれもデフォルトを指定する</span></span><span><span>Enter で進めるよ！</span></span></div></article><article class="code"><pre><code class="fdisk">Last <wbr>sector, <wbr>+/-sectors <wbr>or <wbr>+/-size{K,M,G,T,P} <wbr>(2048-60620799, <wbr>default <wbr>60620799): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span><wbr>「最後のセクターは？」<wbr>かぁ…</span></span><span><span><wbr>「最初」<wbr>と<wbr>「最後」<wbr>を指定して</span></span><span><span>その範囲をパーティションにするんだね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>そのとおり！</span></span><span><span>デフォルトは</span></span><span><span>一番最後の </span><code>60620799</code><span> が</span></span><span><span>指定されているので</span></span><span><span>このまま Enter を押そう！</span></span></div></article><article class="code"><pre><code class="fdisk">Created <wbr>a <wbr>new <wbr>partition <wbr>1 <wbr>of <wbr>type <wbr>'Linux' <wbr>and <wbr>of <wbr>size <wbr>28.9 <wbr>GiB.
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>おー！</span></span><span><span>デフォルトの指定だけで</span></span><span><span>パーティションが作れちゃったよ！</span></span><span><span>でも </span><code>type 'Linux'</code><span> と</span></span><span><span>Linux で使われるみたいな</span></span><span><span>表示があるけど…</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>パーティションには</span></span><span><span>その利用目的も</span></span><span><span>一緒に記録されているんだ</span></span><span><code>t</code><span> でその種別を変更しよう！</span></span></div></article><article class="code"><pre><code class="fdisk">Command <wbr>(m <wbr>for <wbr>help): <wbr>t
Selected <wbr>partition <wbr>1
Hex <wbr>code <wbr>or <wbr>alias <wbr>(type <wbr>L <wbr>to <wbr>list <wbr>all): <wbr><span class="cursor">▌</span>
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ここで種別を</span></span><span><span>指定するんだね</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>ここでは </span><code>FAT32</code><span> という</span></span><span><span>フォーマットを指定するよ</span></span><span><code>0c</code><span> を入力しよう！</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span></div></article><article class="code"><pre><code class="fdisk">Hex <wbr>code <wbr>or <wbr>alias <wbr>(type <wbr>L <wbr>to <wbr>list <wbr>all): <wbr>0c
Changed <wbr>type <wbr>of <wbr>partition <wbr>'Linux' <wbr>to <wbr>'W95 <wbr>FAT32 <wbr>(LBA)'.
</code></pre></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>種別を指定する番号は</span></span><span><code>l</code><span> コマンドで確認できるよ</span></span></div></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>ふぅ…</span></span><span><span>パーティションも作ったし</span></span><span><span>その種別もちゃんと指定できたね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>最後にこのパーティションテーブルを</span></span><span><span>USB メモリに書き込んで終わりだよ</span></span><span><code>w</code><span> コマンドを実行しよう！</span></span></div></article><article class="code"><pre><code class="fdisk">Command <wbr>(m <wbr>for <wbr>help): <wbr>w
The <wbr>partition <wbr>table <wbr>has <wbr>been <wbr>altered.
Calling <wbr>ioctl() <wbr>to <wbr>re-read <wbr>partition <wbr>table.
Syncing <wbr>disks.
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><code>fdisk</code><span> が終了して</span></span><span><span>元のシェル操作に戻ったよ</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>この状態で </span><code>lsblk</code><span> を</span></span><span><span>実行してみよう！</span></span><span><span>作成したパーティションが</span></span><span><span>表示に現れるはずだよ</span></span></div></article><article class="code"><pre><code class="bash">lsblk
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>うん！</span></span><span><span>確認は大事だね！</span></span></div></article><article class="code"><pre><code class="console">NAME   <wbr>MAJ:MIN <wbr>RM   <wbr>SIZE <wbr>RO <wbr>TYPE <wbr>MOUNTPOINT
sda      <wbr>8:0    <wbr>0 <wbr>953.9G  <wbr>0 <wbr>disk
├─sda1   <wbr>8:1    <wbr>0   <wbr>512M  <wbr>0 <wbr>part <wbr>/boot
└─sda2   <wbr>8:2    <wbr>0 <wbr>953.4G  <wbr>0 <wbr>part <wbr>/
sdb      <wbr>8:16   <wbr>0  <wbr>28.9G  <wbr>0 <wbr>disk
└─sdb1   <wbr>8:17   <wbr>0  <wbr>28.9G  <wbr>0 <wbr>part
</code></pre></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>USB メモリを表す </span><code>sdb</code><span> の下に</span></span><span><code>sdb1</code><span> が追加されたよ！</span></span><span><span>これが今回作成した</span></span><span><span>パーティションなんだね！</span></span></div></article><article class="header2"><span>まとめ</span></article><article class="talk"><div><img src="img/midori.svg" alt="若木 みどり" /></div><div><span><span>今回は </span><code>fdisk</code><span> で</span></span><span><span>パーティションを作成したよ！</span></span><span><span>ちょっと操作が多くて</span></span><span><span>大変だったね！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><span>パーティション作成は</span></span><span><span>頻繁に行う操作ではないからね</span></span><span><span>必要になったら調べながら</span></span><span><span>操作するぐらいで大丈夫だよ！</span></span></div></article><article class="talk"><div><img src="img/shigeru.svg" alt="若木 しげる" /></div><div><span><code>fdisk</code><span> は古くからある</span></span><span><span>パーティション操作ツールなんだ</span></span><span><span>たいていのシステムで</span></span><span><span>使えるという利点があるけど</span></span><span><span>より便利に改良された</span></span><span><span>パーティション操作ツールも存在するよ</span></span></div></article><article class="unordered-list"><ul><li><code>gdisk</code></li><li><code>parted</code></li></ul></article></section></main><footer><div class="relation"><div><div>前</div><div>4章14話</div><div><a href="4/14/">パーティション</a></div></div><div><div>今</div><div>4章15話 fdiskコマンド</div><div><a href=".">もくじ</a></div></div><div><div>次</div><div>4章16話</div><div><a href="4/16/">ファイルシステム</a></div></div></div></footer><script src="js/jquery.js"></script><script src="js/common.js"></script></body></html>
